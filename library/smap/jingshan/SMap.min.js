!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):e.SMap=i()}(this,function(){"use strict";function e(e,i){this.northeast=i,this.southwest=e,this.xmin=e[0],this.ymin=e[1],this.zmin=void 0!==e[2]?e[2]:void 0,this.xmax=i[0],this.ymax=i[1],this.zmax=void 0!==i[2]?i[2]:void 0}function i(e,i,t){this.X=e,this.Y=i,this.Z=void 0===t?.15:t}function t(e){this.visible=!(void 0!==e.visible&&!e.visible),this.position=void 0===e.position||"top-right"===e.position?"top-right":e.position,this.collapse=!0===e.collapse}var o,l,r=((o=function(e,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(a,l=t),a);function a(e){var i=l.call(this,e)||this;return i.controlName="basemaptoggle",i}var n,s,c=((n=function(e,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}n(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(p,s=t),p);function p(e){var i=s.call(this,e)||this;return i.controlName="bimfilter",i.layerid=e.layerid,i}var u,d,f=((u=function(e,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}u(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(h,d=t),h);function h(e){var i=d.call(this,e)||this;return i.controlName="basemapgallery",i}var y,b,m=((y=function(e,i){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}y(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(v,b=t),v);function v(e){var i=b.call(this,e)||this;return i.controlName="baseMapGalleryExpand",i}var w,g,x=((w=function(e,i){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}w(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(z,g=t),z);function z(e){var i=g.call(this,e)||this;return i.controlName="compass",i}var C,S,k=((C=function(e,i){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}C(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(L,S=t),L);function L(e){var i=S.call(this,e)||this;return i.controlName="fullscreen",i}var _,E,I=((_=function(e,i){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}_(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(M,E=t),M);function M(e){var i=E.call(this,e)||this;return i.controlName="home",i}var A,R,P=((A=function(e,i){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}A(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(O,R=t),O);function O(e){var i=R.call(this,e)||this;return i.controlName="toc",i}var N,T,j=((N=function(e,i){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}N(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(D,T=t),D);function D(e){var i=T.call(this,e)||this;return i.controlName="measurearea",i}var H,W,B=((H=function(e,i){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}H(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(F,W=t),F);function F(e){var i=W.call(this,e)||this;return i.controlName="measureline",i}var J,V,U=((J=function(e,i){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}J(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(Z,V=t),Z);function Z(e){var i=V.call(this,e)||this;return i.controlName="performanceinfo",i.layerid=e.layerid,i}var G,q,X=((G=function(e,i){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}G(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(Y,q=t),Y);function Y(e){var i=q.call(this,e)||this;return i.controlName="undergroundswitch",i}var $,K,Q=(($=function(e,i){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}$(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(ee,K=t),ee);function ee(e){var i=K.call(this,e)||this;return i.controlName="zoom",i}var ie=(te.jsapi="http://31.8.11.75/smiapi/arcgis",te.jsapiversion4X="4.16",te.userName="smiapi",te.menuName="smiapi_23d",te.proxyURL="http://31.8.11.75/mapkProx/proxy.jsp?",te.tokenserviceurl="http://mapserver.smi.sh.cegn.cn:8080/OneMapServer/rest/services",te.mapconfigbackendurl="http://31.8.11.75:8401/mapconfig/usermenu?",te.tokenconfigname="smiapi_new",te.tokenUser="none",te.tokenPassword="none",te);function te(){}var oe=ie.jsapiversion4X,le="next";function re(e){if(null===e&&(e=oe),e.toString().toLowerCase()===le)return le;var i=e&&e.match(/^(\d)\.(\d+)/);return i&&{major:parseInt(i[1],10),minor:parseInt(i[2],10)}}function ae(e){return void 0===e&&(e=oe),ie.jsapi+"/"+e+"/init.js"}function ne(e){var i=document.createElement("link");return i.rel="stylesheet",i.href=e,i}function se(e,i){if(i){var t=document.querySelector(i);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}function ce(e){return document.querySelector('link[href*="'+e+'"]')}function pe(e){return!e||re(e)?function(e){void 0===e&&(e=oe),null===e&&(e=oe);var i=ae(e),t=i.substring(0,i.indexOf("init.js")),o=re(e);return o===le||3!==o.major?t+"esri/themes/light/main.css":t+(o.minor<=10?"js/":"")+"esri/css/esri.css"}(e):e}function ue(e,i){var t=pe(e),o=ce(t);if(o||se(o=ne(t),i),4===function(e){null===e&&(e=oe);var i=e&&e.match(/^(\d)\.(\d+)/);return i&&{major:parseInt(i[1],10),minor:parseInt(i[2],10)}}(e).major){var l=t.substring(0,t.indexOf("esri/themes/"))+"esri/themes/gis/css/gis.css",r=ce(l);r||se(r=ne(l),i)}return o}var de={Promise:"undefined"!=typeof window?window.Promise:void 0},fe={};function he(e,i,t){var o,l,r,a;t&&(r=t,a=function(e){r(e.error||new Error("There was an error attempting to load "+l.src)),l.removeEventListener("error",a,!1)},(l=e).addEventListener("error",a,!1),o=a);var n=function(){i(e),e.removeEventListener("load",n,!1),o&&e.removeEventListener("error",o,!1)};e.addEventListener("load",n,!1)}function ye(){return document.querySelector("script[data-shsmi]")}function be(){var e=window.require;return e&&e.on}function me(e){void 0===e&&(e={});var s={};[fe,e].forEach(function(e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])});var c=s.version,p=s.url||ae(c);return new de.Promise(function(e,i){var t,o,l=ye();if(l){var r=l.getAttribute("src");r!==p?i(new Error("The ArcGIS API for JavaScript is already loaded ("+r+").")):be()?e(l):he(l,e,i)}else if(be())i(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=s.css;if(a)ue(!0===a?c:a,s.insertCssBefore);else ue(null,s.insertCssBefore);if(s.dojoConfig)window.dojoConfig=s.dojoConfig;else{var n={async:!0,packages:[{location:ie.jsapi+"/extensions",name:"smiapi"},{location:ie.jsapi+"/extensions/geolocation",name:"geolocate",main:"geolocate"}],deps:["@dojo/framework/shim/main"],has:{"esri-promise-compatibility":1,"esri-featurelayer-webgl":1}};window.dojoConfig=n}t=p,(o=document.createElement("script")).type="text/javascript",o.src=t,o.setAttribute("data-shsmi","loading"),he(l=o,function(){l.setAttribute("data-shsmi","loaded"),e(l)},i),document.head.appendChild(l)}})}function ve(i){return new de.Promise(function(t,e){var o=window.require.on("error",e);window.require(i,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o.remove(),t(e)})})}function we(e,i){if(void 0===i&&(i={}),be())return ve(e);var t=ye(),o=t&&t.getAttribute("src");return!i.url&&o&&(i.url=o),me(i).then(function(){return ve(e)})}var ge=function(e,a,n,s){return new(n=n||Promise)(function(t,i){function o(e){try{r(s.next(e))}catch(e){i(e)}}function l(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var i;e.done?t(e.value):((i=e.value)instanceof n?i:new n(function(e){e(i)})).then(o,l)}r((s=s.apply(e,a||[])).next())})},xe=function(t,o){var l,r,a,e,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function i(i){return function(e){return function(i){if(l)throw new TypeError("Generator is already executing.");for(;n;)try{if(l=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return n.label++,{value:i[1],done:!1};case 5:n.label++,r=i[1],i=[0];continue;case 7:i=n.ops.pop(),n.trys.pop();continue;default:if(!(a=0<(a=n.trys).length&&a[a.length-1])&&(6===i[0]||2===i[0])){n=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){n.label=i[1];break}if(6===i[0]&&n.label<a[1]){n.label=a[1],a=i;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(i);break}a[2]&&n.ops.pop(),n.trys.pop();continue}i=o.call(t,n)}catch(e){i=[6,e],r=0}finally{l=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,e])}}};function ze(z,t,C,S){return ge(this,void 0,void 0,function(){var i,d,f,h,y,b,m,v,w,g,x;return xe(this,function(e){switch(e.label){case 0:return[4,we(["esri/geometry/Extent","esri/layers/SHCTiledMapServiceLayer","esri/layers/SceneLayer","esri/layers/TileLayer","esri/layers/GraphicsLayer","esri/layers/MapImageLayer","esri/layers/GeoJSONLayer","esri/layers/GroupLayer","esri/layers/FeatureLayer","esri/geometry/SpatialReference"])];case 1:return i=e.sent(),d=i[0],f=i[1],h=i[2],y=i[3],b=i[4],m=i[5],v=i[6],w=i[7],g=i[8],x=i[9],t.map(function(e){if("GroupLayer"===e.mapType.trim()){if("3D"===S){var i=new w({id:e.layerEName,title:e.layerCName,visible:parseFloat(e.isVisible),opacity:parseFloat(e.opacity)});z.add(i),e.hasChildren&&ze(i,e.children,C,S)}else if(1===parseFloat(e.modeType)){i=new w({id:e.layerEName,title:e.layerCName,visible:parseFloat(e.isVisible),opacity:parseFloat(e.opacity)});z.add(i),e.hasChildren&&ze(i,e.children,C,S)}}else switch(e.mapType.trim()){case"SHCTiledMapServiceLayer":var t=new d({xmin:-65e3,ymin:-76e3,xmax:75000.00000000003,ymax:72000.00000000003,spatialReference:x.WebMercator});!0==!parseFloat(e.isToken)?z.add(f({url:e.url,fullExtent:t,opacity:parseFloat(e.opacity),title:e.layerCName,id:e.layerEName,visible:parseFloat(e.isVisible)})):z.add(f({url:e.url,token:C,fullExtent:t,opacity:parseFloat(e.opacity),title:e.layerCName,id:e.layerEName,visible:parseFloat(e.isVisible)}));break;case"TileLayer":var o=new y({url:e.url,id:e.layerEName,visible:parseFloat(e.isVisible),opacity:parseFloat(e.opacity),listMode:e.listMode,title:e.layerCName});e.maxScale&&(o.maxScale=e.maxScale),e.minScale&&(o.minScale=e.minScale),z.add(o);break;case"MapImageLayer":var l=new m({url:e.url,opacity:parseFloat(e.opacity),title:e.layerCName,id:e.layerEName,visible:parseFloat(e.isVisible)});e.maxScale&&(l.maxScale=e.maxScale),e.minScale&&(l.minScale=e.minScale),e.sublayers&&(l.sublayers=e.sublayers),z.add(l);break;case"SceneLayer":var r=new h({url:e.url,opacity:parseFloat(e.opacity),title:e.layerCName,id:e.layerEName,visible:parseFloat(e.isVisible)});if(e.renderer){var a=JSON.parse(e.renderer);r.renderer=a}if(e.popuptemplate){var n=JSON.parse(e.popuptemplate);r.popupTemplate=n}if(e.definitionExpress&&(r.definitionExpression=e.definitionExpress),e.elevationInfo){var s=JSON.parse(e.elevationInfo);r.elevationInfo=s}e.maxScale&&(r.maxScale=e.maxScale),e.minScale&&(r.minScale=e.minScale),z.add(r);break;case"GraphicsLayer":var c=new b({opacity:parseFloat(e.opacity),title:e.layerCName,id:e.layerEName,visible:parseFloat(e.isVisible)});if(e.elevationInfo){s=JSON.parse(e.elevationInfo);c.elevationInfo=s}e.maxScale&&(c.maxScale=e.maxScale),e.minScale&&(c.minScale=e.minScale),z.add(c);break;case"GeoJSONLayer":var p=new v({url:e.url,opacity:parseFloat(e.opacity),title:e.layerCName,id:e.layerEName,visible:parseFloat(e.isVisible)});if(e.maxScale&&(p.maxScale=e.maxScale),e.minScale&&(p.minScale=e.minScale),e.labelingInfo){a=JSON.parse(e.labelingInfo);p.labelingInfo=a}z.add(p);break;case"FeatureLayer":var u=new g({url:e.url,opacity:parseFloat(e.opacity),title:e.layerCName,id:e.layerEName,visible:parseFloat(e.isVisible)});if(e.renderer){a=JSON.parse(e.renderer);u.renderer=a}if(e.labelingInfo){a=JSON.parse(e.labelingInfo);u.labelingInfo=a}if(e.popuptemplate){n=JSON.parse(e.popuptemplate);u.popupTemplate=n}e.definitionExpress&&(u.definitionExpression=e.definitionExpress),e.elevationInfo&&(u.elevationInfo=JSON.parse(e.elevationInfo)),e.maxScale&&(u.maxScale=e.maxScale),e.maxScale&&(u.minScale=e.minScale),z.add(u)}}),[2]}})})}var Ce=function(e,a,n,s){return new(n=n||Promise)(function(t,i){function o(e){try{r(s.next(e))}catch(e){i(e)}}function l(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var i;e.done?t(e.value):((i=e.value)instanceof n?i:new n(function(e){e(i)})).then(o,l)}r((s=s.apply(e,a||[])).next())})},Se=function(t,o){var l,r,a,e,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function i(i){return function(e){return function(i){if(l)throw new TypeError("Generator is already executing.");for(;n;)try{if(l=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return n.label++,{value:i[1],done:!1};case 5:n.label++,r=i[1],i=[0];continue;case 7:i=n.ops.pop(),n.trys.pop();continue;default:if(!(a=0<(a=n.trys).length&&a[a.length-1])&&(6===i[0]||2===i[0])){n=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){n.label=i[1];break}if(6===i[0]&&n.label<a[1]){n.label=a[1],a=i;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(i);break}a[2]&&n.ops.pop(),n.trys.pop();continue}i=o.call(t,n)}catch(e){i=[6,e],r=0}finally{l=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,e])}}};function ke(v,w,g,e,x,i,z,C){return Ce(this,void 0,void 0,function(){var i,t,o,l,r,a,n,s,c,p,u,d,f,h,y,b,m=this;return Se(this,function(e){switch(e.label){case 0:return[4,we(["esri/Map","esri/Basemap","esri/geometry/Point","esri/core/urlUtils","esri/config","esri/core/watchUtils","esri/views/SceneView","esri/identity/IdentityManager","esri/geometry/SpatialReference"])];case 1:return i=e.sent(),t=i[0],o=i[1],l=i[2],r=i[3],a=i[4],n=i[5],s=i[6],c=i[7],p=i[8],parseFloat(w.useProxy)&&x.map(function(e){r.addProxyRule({proxyUrl:e.proxyUrl,urlPrefix:e.domainName})}),a.geometryServiceUrl=w.geometryserviceUrl,u=g.filter(function(e){return"basemap"===e.layerEName}),"2"!==w.tokenType&&c.registerToken({server:ie.tokenserviceurl,token:z}),c.on("dialog-create",function(){c.dialog.open=!0}),[4,function(l){return ge(this,void 0,void 0,function(){var i,t,o;return xe(this,function(e){switch(e.label){case 0:return[4,we(["esri/geometry/Extent","esri/layers/SHCTiledMapServiceLayer","esri/geometry/SpatialReference","esri/layers/TileLayer"])];case 1:return i=e.sent(),i[0],i[1],i[2],t=i[3],o=[],l.forEach(function(e){switch(e.mapType){case"TileLayer":o.push(new t(e.url,{id:e.layerEName,visible:parseFloat(e.isVisible),opacity:e.opacity,title:e.layerCName}))}}),[2,o]}})})}(u[0].children)];case 2:if(d=e.sent(),f=new o({baseLayers:d,title:"底图",id:"basemap_as"}),h=new t({basemap:f}),void 0!==C.mapStyle)switch(C.mapStyle){case"smap://styles/light":h.basemap.id="basemap_zw",h.ground.surfaceColor="#EDEDED";break;case"smap://styles/dark":h.basemap.id="basemap_as",h.ground.surfaceColor="#021425";break;case"smap://styles/image":h.basemap.id="basemap_air",h.ground.surfaceColor="#021425";break;default:h.basemap.id="basemap_as",h.ground.surfaceColor="#021425"}else h.basemap.id="basemap_as",h.ground.surfaceColor="#021425";return(h.basemap.baseLayers.items.forEach(function(e){e.id===h.basemap.id?e.visible=!0:e.visible=!1}),y=new s({map:h,container:v,spatialReference:{wkid:102100},viewingMode:"local"}),we(["esri/core/Collection"]).then(function(e){var t=e[0];return Ce(m,void 0,void 0,function(){var i;return Se(this,function(e){switch(e.label){case 0:return b=new t,i=void 0===C.viewMode||"2D"===C.viewMode?"2D":"3D",[4,ze(b,g.slice(1),z,i)];case 1:return e.sent(),h.addMany(b),["model_white_zw","model_air_real","model_white_as"].forEach(function(e){var i=h.findLayerById(e);!1===C.showBuildingBlock?i&&(i.visible=!1):i&&("basemap_zw"===h.basemap.id?i.visible="model_white_zw"===e:"basemap_as"===h.basemap.id?i.visible="model_white_as"===e:"basemap_air"===h.basemap.id&&(i.visible="model_air_real"===e))}),[2]}})})}).catch(function(e){console.error(e)}),y.ui.empty("top-left"),y.ui.empty("top-right"),y.ui.empty("bottom-left"),y.ui.empty("bottom-right"),y.padding={top:5,bottom:0,left:0,right:5},y.when(function(){c.on("dialog-create",function(){c.dialog.open=!0})}),void 0!==C.center&&(y.center=new l({x:C.center[0],y:C.center[1],z:void 0!==C.center[2]?C.center[2]:0,spatialReference:p.WebMercator})),void 0!==C.zoom&&(y.zoom=C.zoom),void 0===C.pitch)?[3,4]:[4,y.goTo({center:y.center,zoom:y.zoom,tilt:C.pitch,heading:0})];case 3:e.sent(),n.when(y,"animation",function(e){e.when(function(e){void 0!==C.zooms&&y.watch("zoom",function(e){e>=C.zooms[1]&&(y.zoom=C.zooms[1]),e<=C.zooms[0]&&(y.zoom=C.zooms[0])})}).catch(function(e){console.log(e)})}),e.label=4;case 4:return[2,{sceneView:y,mapv:h}]}})})}function Le(m,v,w,e,g,i,x,z){return Ce(this,void 0,void 0,function(){var i,t,o,l,r,a,n,s,c,p,u,d,f,h,y,b=this;return Se(this,function(e){switch(e.label){case 0:return[4,we(["esri/Map","esri/Basemap","esri/core/urlUtils","esri/config","esri/identity/IdentityManager","esri/geometry/SpatialReference","esri/geometry/Point","esri/views/MapView"])];case 1:return i=e.sent(),t=i[0],o=i[1],l=i[2],r=i[3],a=i[4],n=i[5],s=i[6],c=i[7],parseFloat(v.useProxy)&&g.map(function(e){l.addProxyRule({proxyUrl:e.proxyUrl,urlPrefix:e.domainName})}),r.geometryServiceUrl=v.geometryserviceUrl,p=w.filter(function(e){return"basemap"===e.layerEName}),"2"!==v.tokenType&&a.registerToken({server:p[0].children[1].url.substring(0,p[0].children[1].url.lastIndexOf("/rest/services"))+"/rest/services",token:x}),a.on("dialog-create",function(){a.dialog.open=!0}),[4,function(l){return ge(this,void 0,void 0,function(){var i,t,o;return xe(this,function(e){switch(e.label){case 0:return[4,we(["esri/geometry/Extent","esri/layers/SHCTiledMapServiceLayer","esri/geometry/SpatialReference","esri/layers/TileLayer"])];case 1:return i=e.sent(),i[0],i[1],i[2],t=i[3],o=[],l.map(function(e){switch(e.mapType){case"SHCTiledMapServiceLayer":case"TileLayer":o.push(new t(e.url,{id:e.layerEName,visible:parseFloat(e.isVisible),opacity:e.opacity,listMode:e.listMode,title:e.layerCName}))}}),[2,o]}})})}(p[0].children)];case 2:if(u=e.sent(),d=new o({baseLayers:u,title:"底图",id:"basemap_as"}),f=new t({basemap:d}),void 0!==z.mapStyle)switch(z.mapStyle){case"smap://styles/light":f.basemap.id="basemap_zw",f.ground.surfaceColor="#EDEDED";break;case"smap://styles/dark":f.basemap.id="basemap_as",f.ground.surfaceColor="#021425";break;case"smap://styles/image":f.basemap.id="basemap_air",f.ground.surfaceColor="#021425";break;default:f.basemap.id="basemap_as",f.ground.surfaceColor="#021425"}else f.basemap.id="basemap_as",f.ground.surfaceColor="#021425";return f.basemap.baseLayers.items.forEach(function(e){e.id===f.basemap.id?e.visible=!0:e.visible=!1}),new n({wkt:'PROJCS["shanghaicity",GEOGCS["GCS_Beijing_1954",DATUM["D_Beijing_1954",SPHEROID["Krasovsky_1940",6378245.0,298.3]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",-3457147.81],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",121.2751921],PARAMETER["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]'}),h=new c({map:f,container:m,spatialReference:{wkid:102100}}),we(["esri/core/Collection"]).then(function(e){var t=e[0];return Ce(b,void 0,void 0,function(){var i;return Se(this,function(e){switch(e.label){case 0:return y=new t,i=void 0===z.viewMode||"2D"===z.viewMode?"2D":"3D",[4,ze(y,w.slice(1),x,i)];case 1:return e.sent(),f.addMany(y),[2]}})})}).catch(function(e){console.error(e)}),h.ui.empty("top-left"),h.ui.empty("top-right"),h.ui.empty("bottom-left"),h.ui.empty("bottom-right"),h.padding={top:5,bottom:0,left:0,right:5},void 0!==z.center&&(h.center=new s({x:z.center[0],y:z.center[1],spatialReference:{wkid:102100}})),void 0!==z.zoom&&(h.zoom=z.zoom),void 0!==z.zooms&&(h.constraints.minZoom=z.zooms[0],h.constraints.maxZoom=z.zooms[1]),void 0!==z.rotateEnable&&(h.constraints.rotationEnabled=z.rotateEnable),[2,{mapView:h,mapv:f}]}})})}var _e=(Ee.prototype._addListener=function(e,i,t){if(this.emit("newListener",e,i),this.events.has(e)){var o=this.events.get(e);t?o.unshift(i):o.push(i)}else this.events.set(e,[i]);var l=this.getMaxListeners();if(0<l&&this.listenerCount(e)>l){var r=new Error("Possible EventEmitter memory leak detected.\n         "+this.listenerCount(e)+" "+e.toString()+" listeners.\n         Use emitter.setMaxListeners() to increase limit");r.name="MaxListenersExceededWarning",console.warn(r)}return this},Ee.prototype.addListener=function(e,i){return this._addListener(e,i,!1)},Ee.prototype.emit=function(e){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];if(this.events.has(e)){for(var o=0,l=this.events.get(e).slice();o<l.length;o++){var r=l[o];try{r.apply(this,i)}catch(e){this.emit("error",e)}}return!0}if("error"===e)throw 0<i.length?i[0]:Error("Unhandled error.");return!1},Ee.prototype.eventNames=function(){return Array.from(this.events.keys())},Ee.prototype.getMaxListeners=function(){return this.maxListeners||Ee.defaultMaxListeners},Ee.prototype.listenerCount=function(e){return this.events.has(e)?this.events.get(e).length:0},Ee.prototype._listeners=function(e,i,t){if(!e.events.has(i))return[];var o=e.events.get(i);return t?this.unwrapListeners(o):o.slice(0)},Ee.prototype.unwrapListeners=function(e){for(var i=new Array(e.length),t=0;t<e.length;t++)i[t]=e[t].listener||e[t];return i},Ee.prototype.listeners=function(e){return this._listeners(this,e,!0)},Ee.prototype.rawListeners=function(e){return this._listeners(this,e,!1)},Ee.prototype.off=function(e,i){return this.removeListener(e,i)},Ee.prototype.on=function(e,i){return this.addListener(e,i)},Ee.prototype.once=function(e,i){var t=this.onceWrap(e,i);return this.on(e,t),this},Ee.prototype.onceWrap=function(e,i){function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.context.removeListener(this.eventName,this.rawListener),this.listener.apply(this.context,e)}var o={eventName:e,listener:i,rawListener:t,context:this},l=t.bind(o);return(o.rawListener=l).listener=i,l},Ee.prototype.prependListener=function(e,i){return this._addListener(e,i,!0)},Ee.prototype.prependOnceListener=function(e,i){var t=this.onceWrap(e,i);return this.prependListener(e,t),this},Ee.prototype.removeAllListeners=function(e){var i=this;if(void 0===this.events)return this;if(this.events.has(e)){var t=this.events.get(e).slice();this.events.delete(e);for(var o=0,l=t;o<l.length;o++){var r=l[o];this.emit("removeListener",e,r)}}else this.eventNames().map(function(e){i.removeAllListeners(e)});return this},Ee.prototype.removeListener=function(e,i){if(this.events.has(e)){var t=this.events.get(e);-1!==t.indexOf(i)&&(t.splice(t.indexOf(i),1),this.emit("removeListener",e,i),0===t.length&&this.events.delete(e))}return this},Ee.prototype.setMaxListeners=function(e){return this.maxListeners=e,this},Ee.defaultMaxListeners=50,Ee);function Ee(){this.events=new Map}var Ie=(Me.maploaded="maploaded",Me.zoomchanged="zoomchanged",Me.extentchanged="extentchanged",Me.centerchanged="centerchanged",Me.blur="blur",Me.click="click",Me.doubleclick="doubleclick",Me.drag="drag",Me.focus="focus",Me.hold="hold",Me.keydown="key-down",Me.keyup="key-up",Me.mousewheel="mouse-wheel",Me.pointerdown="pointer-down",Me.pointerenter="pointer-enter",Me.pointerleave="pointer-leave",Me.pointermove="pointer-move",Me.pointerup="pointer-up",Me.resize="pointer-up",Me.popupvisible="popup-visible",Me);function Me(){}var Ae,Re,Pe=(Ae=function(e,i){return(Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}Ae(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)}),Oe=function(e,a,n,s){return new(n=n||Promise)(function(t,i){function o(e){try{r(s.next(e))}catch(e){i(e)}}function l(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var i;e.done?t(e.value):((i=e.value)instanceof n?i:new n(function(e){e(i)})).then(o,l)}r((s=s.apply(e,a||[])).next())})},Ne=function(t,o){var l,r,a,e,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function i(i){return function(e){return function(i){if(l)throw new TypeError("Generator is already executing.");for(;n;)try{if(l=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return n.label++,{value:i[1],done:!1};case 5:n.label++,r=i[1],i=[0];continue;case 7:i=n.ops.pop(),n.trys.pop();continue;default:if(!(a=0<(a=n.trys).length&&a[a.length-1])&&(6===i[0]||2===i[0])){n=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){n.label=i[1];break}if(6===i[0]&&n.label<a[1]){n.label=a[1],a=i;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(i);break}a[2]&&n.ops.pop(),n.trys.pop();continue}i=o.call(t,n)}catch(e){i=[6,e],r=0}finally{l=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,e])}}},Te=(Pe(je,Re=_e),je.prototype.setlayerRenderer=function(e,i){var t=this.view.map.findLayerById(e);t&&(t.renderer=i)},je.prototype.addLayer=function(e){!function(y,b,m){ge(this,void 0,void 0,function(){return xe(this,function(e){return we(["esri/layers/TileLayer","esri/layers/SceneLayer","esri/layers/FeatureLayer","esri/layers/MapImageLayer","esri/layers/SHCTiledMapServiceLayer","esri/layers/GraphicsLayer","esri/geometry/Extent","esri/geometry/SpatialReference"]).then(function(e){var i=e[0],t=e[1],o=e[2],l=e[3],r=e[4],a=e[5],n=e[6],s=e[7];switch(y.layerType){case"TileLayer":var c=new i({url:y.layerUrl,id:y.layerId,visible:void 0===y.layerVisible||y.layerVisible,opacity:void 0!==y.layerOpacity?y.layerOpacity:1,title:y.layerTitle});y.layerMaxScale&&(c.maxScale=y.layerMaxScale),y.layerMinScale&&(c.minScale=y.layerMinScale),b.map.add(c);break;case"FeatureLayer":var p=new o({url:y.layerUrl,id:y.layerId,visible:void 0===y.layerVisible||y.layerVisible,opacity:void 0!==y.layerOpacity?y.layerOpacity:1,title:y.layerTitle,popupEnabled:void 0===y.layerPopupEnabled||y.layerPopupEnabled});y.layerPopupTemplate&&(p.popupTemplate=y.layerPopupTemplate),y.layerRenderer&&(p.renderer=y.layerRenderer),y.layerMaxScale&&(p.maxScale=y.layerMaxScale),y.layerMinScale&&(p.minScale=y.layerMinScale),y.layerLabelingInfo&&(p.labelingInfo=y.layerLabelingInfo),y.layerLabelsVisible&&(p.labelsVisible=y.layerLabelsVisible),y.layerelevationInfo&&(p.elevationInfo=y.layerelevationInfo),y.layerdefinitionExpression&&(p.layerdefinitionExpression=y.layerdefinitionExpression),b.map.add(p);break;case"SceneLayer":var u=new t({url:y.layerUrl,id:y.layerId,visible:void 0===y.layerVisible||y.layerVisible,opacity:void 0!==y.layerOpacity?y.layerOpacity:1,title:y.layerTitle,popupEnabled:void 0===y.layerPopupEnabled||y.layerPopupEnabled});y.layerPopupTemplate&&(u.popupTemplate=y.layerPopupTemplate),y.layerRenderer&&(u.renderer=y.layerRenderer),y.layerMaxScale&&(u.maxScale=y.layerMaxScale),y.layerMinScale&&(u.minScale=y.layerMinScale),y.layerelevationInfo&&(u.elevationInfo=y.layerelevationInfo),y.layerdefinitionExpression&&(u.layerdefinitionExpression=y.layerdefinitionExpression),b.map.add(u);break;case"MapImageLayer":var d=new l({url:y.layerUrl,id:y.layerId,visible:void 0===y.layerVisible||y.layerVisible,opacity:void 0!==y.layerOpacity?y.layerOpacity:1,title:y.layerTitle});y.layerMaxScale&&(d.maxScale=y.layerMaxScale),y.layerMinScale&&(d.minScale=y.layerMinScale),y.layerSublayers&&(d.sublayers=y.layerSublayers),b.map.add(d);break;case"SHCTiledMapServiceLayer":var f=new n({xmin:-65e3,ymin:-76e3,xmax:75000.00000000003,ymax:72000.00000000003,spatialReference:s.WebMercator});!0===y.isToken?b.map.add(new r({url:y.layerUrl,token:m,fullExtent:f,title:y.layerTitle,opacity:void 0!==y.layerOpacity?y.layerOpacity:1,id:y.layerId,visible:void 0===y.layerVisible||y.layerVisible})):b.map.add(new r({url:y.layerUrl,fullExtent:f,opacity:void 0!==y.layerOpacity?y.layerOpacity:1,title:y.layerTitle,id:y.layerId,visible:void 0===y.layerVisible||y.layerVisible}));break;case"GraphicsLayer":var h=new a({id:y.layerId,visible:void 0===y.layerVisible||y.layerVisible,opacity:void 0!==y.layerOpacity?y.layerOpacity:1,title:y.layerTitle});y.layerMaxScale&&(h.maxScale=y.layerMaxScale),y.layerMinScale&&(h.minScale=y.layerMinScale),y.layerelevationInfo&&(h.elevationInfo=y.layerelevationInfo),b.map.add(h)}}).catch(function(e){console.error(e)}),[2]})})}(e,this.view,this.maptoken)},je.prototype.getLayer=function(e){return this.view.map.findLayerById(e)},je.prototype.setLayerProperties=function(e){!function(t,o){ge(this,void 0,void 0,function(){var i;return xe(this,function(e){return t.layerId&&(i=o.map.findLayerById(t.layerId))&&(void 0!==t.layerTitle&&(i.title=t.layerTitle),void 0!==t.layerVisible&&(i.visible=t.layerVisible),void 0!==t.layerVisible&&(i.opacity=t.layerOpacity),void 0!==t.layerPopupEnabled&&(i.popupEnabled=t.layerPopupEnabled),void 0!==t.layerPopupTemplate&&(i.popupTemplate=t.layerPopupTemplate),void 0!==t.layerMaxScale&&(i.maxScale=t.layerMaxScale),void 0!==t.layerMinScale&&(i.minScale=t.layerMinScale),void 0!==t.layerLabelsVisible&&(i.labelsVisible=t.layerLabelsVisible),void 0!==t.layerLabelingInfo&&(i.labelingInfo=t.layerLabelingInfo),void 0!==t.layerRenderer&&(i.renderer=t.layerRenderer),void 0!==t.layerSublayers&&(i.sublayers=t.layerSublayers),void 0!==t.layerdefinitionExpression&&(i.definitionExpression=t.layerdefinitionExpression),void 0!==t.layerelevationInfo&&(i.elevationInfo=t.layerelevationInfo)),[2]})})}(e,this.view)},je.prototype.setmemoryLimit=function(e){this.view.qualitySettings.memoryLimit=e},je.prototype.removeLayer=function(e){var i=this.view.map.findLayerById(e);i&&this.view.map.remove(i)},je.prototype.getZoom=function(){if(this.view)return this.view.zoom},je.prototype.setZoom=function(e){this.view&&(this.view.zoom=e)},je.prototype.panTo=function(t){var o=this;this.view&&we(["esri/geometry/Point"]).then(function(e){var i=new e[0]({x:t[0],y:t[1],z:void 0!==t[2]?t[2]:0,spatialReference:o.view.spatialReference});o.view.center=i}).catch(function(e){console.error(e)})},je.prototype.panBy=function(e,i){if(this.view){var t=this.view.center,o=this.view.toScreen(t);this.view.center=this.view.toMap({x:o.x+e,y:o.y+i})}},je.prototype.getBounds=function(){if(this.view){var e={};return e.southwest=[this.view.extent.xmin.toFixed(6),this.view.extent.ymin.toFixed(6)],"3D"===this.viewMode&&void 0!==this.view.extent.zmin&&e.southwest.push(this.view.extent.zmin.toFixed(6)),e.northeast=[this.view.extent.xmax.toFixed(6),this.view.extent.ymax.toFixed(6)],"3D"===this.viewMode&&void 0!==this.view.extent.zmax&&e.northeast.push(this.view.extent.zmax.toFixed(6)),e}},je.prototype.setBounds=function(o){var l=this;this.view&&we(["esri/geometry/Extent","esri/geometry/SpatialReference"]).then(function(e){var i=e[0],t=(e[1],new i({xmin:o.xmin,ymin:o.ymin,xmax:o.xmax,zmax:o.ymax,spatialReference:l.view.spatialReference}));"3D"===l.viewMode&&void 0!==o.zmin&&void 0!==o.zmax&&(t.zmin=o.zmin,t.zmax=o.zmax),l.view.extent=t}).catch(function(e){console.error(e)})},je.prototype.setCenter=function(l,r,a){return Oe(this,void 0,void 0,function(){var i,t,o;return Ne(this,function(e){switch(e.label){case 0:return this.view?[4,we(["esri/geometry/Point","esri/geometry/SpatialReference"])]:[3,2];case 1:i=e.sent(),t=i[0],i[1],o=null,o="2D"===this.viewMode?new t({x:l,y:r,spatialReference:this.view.spatialReference}):new t({x:l,y:r,z:void 0!==a?a:0,spatialReference:this.view.spatialReference}),this.view.center=o,e.label=2;case 2:return[2]}})})},je.prototype.setZoomAndCenter=function(l,r){return Oe(this,void 0,void 0,function(){var i,t,o;return Ne(this,function(e){switch(e.label){case 0:return this.view?[4,we(["esri/geometry/Point","esri/geometry/SpatialReference"])]:[3,2];case 1:return i=e.sent(),t=i[0],i[1],o=null,"2D"===this.viewMode?(this.view.zoom=l,o=new t({x:r[0],y:r[1],spatialReference:this.view.spatialReference}),this.view.center=o):(o=new t({x:r[0],y:r[1],z:void 0!==r[2]?r[2]:0,spatialReference:this.view.spatialReference}),this.view.goTo({center:o,zoom:l,tilt:this.view.camera.tilt,heading:this.view.camera.heading})),[2];case 2:return[2]}})})},je.prototype.getCenter=function(){if(this.view){var e=[];return e.push(this.view.center.x.toFixed(6)),e.push(this.view.center.y.toFixed(6)),"3D"===this.viewMode&&e.push(this.view.center.z.toFixed(6)),e}},je.prototype.getScale=function(){if(this.view)return this.view.scale},je.prototype.setRotation=function(e){this.view&&("2D"===this.viewMode?this.view.rotation=e:this.view.goTo({center:this.view.center,zoom:this.view.zoom,tilt:this.view.camera.tilt,heading:e}))},je.prototype.setPitch=function(e){this.view&&"3D"===this.viewMode&&this.view.goTo({center:this.view.center,zoom:this.view.zoom,tilt:e,heading:this.view.camera.heading})},je.prototype.getPitch=function(){if(this.view&&"3D"===this.viewMode)return this.view.camera.tilt},je.prototype.zoomIn=function(){this.view&&("3D"===this.viewMode?this.view.zoom+1>=this.zooms[0]&&this.view.zoom+1<=this.zooms[1]&&this.view.goTo({center:this.view.center,zoom:this.view.zoom+1,tilt:this.view.camera.tilt,heading:this.view.camera.heading}):this.view.goTo({center:this.view.center,zoom:this.view.zoom+1}))},je.prototype.zoomOut=function(){this.view&&("3D"===this.viewMode?this.view.zoom-1>=this.zooms[0]&&this.view.zoom-1<=this.zooms[1]&&this.view.goTo({center:this.view.center,zoom:this.view.zoom-1,tilt:this.view.camera.tilt,heading:this.view.camera.heading}):this.view.goTo({center:this.view.center,zoom:this.view.zoom-1}))},je.prototype.setMapStyle=function(e){var t=this;if(this.view){switch(e){case"smap://styles/light":this.view.map.basemap.id="basemap_zw",this.view.map.ground.surfaceColor="#EDEDED";break;case"smap://styles/dark":this.view.map.basemap.id="basemap_as",this.view.map.ground.surfaceColor="#021425";break;case"smap://styles/image":this.view.map.basemap.id="basemap_air",this.view.map.ground.surfaceColor="#021425";break;default:return this.view.map.basemap.id="basemap_air",void(this.view.map.ground.surfaceColor="#021425")}if(this.view.map.basemap.baseLayers.items.forEach(function(e){e.id===t.view.map.basemap.id?e.visible=!0:e.visible=!1}),"2D"===this.viewMode)return;["model_white_zw","model_air_real","model_white_as"].forEach(function(e){var i=t.view.map.findLayerById(e);!1===t.showBuildingBlock?i&&(i.visible=!1):i&&("basemap_zw"===t.view.map.basemap.id?i.visible="model_white_zw"===e:"basemap_as"===t.view.map.basemap.id?i.visible="model_white_as"===e:"basemap_air"===t.view.map.basemap.id&&(i.visible="model_air_real"===e))})}},je.prototype.getMapStyle=function(){if(this.view)switch(this.view.map.basemap.id){case"basemap_zw":return"smap://styles/light";case"basemap_as":return"smap://styles/dark";case"basemap_air":return"smap://styles/image"}},je.prototype.enableMouseEvent=function(e){if(e)this.watchHandles.filter(function(e){return"EnablemouseEventdraghandler"===e[0]||"EnablemouseEventdoubleclickhandler"===e[0]||"EnablemouseEventmouseWheelhandler"===e[0]}).forEach(function(e){e[1].remove()}),this.watchHandles=this.watchHandles.filter(function(e){return"EnablemouseEventdraghandler"!==e[0]&&"EnablemouseEventdoubleclickhandler"!==e[0]&&"EnablemouseEventmouseWheelhandler"!==e[0]});else{var i=this.view.on("drag",function(e){e.stopPropagation()});this.watchHandles.push(["EnablemouseEventdraghandler",i]),this.view.on("double-click",function(e){e.stopPropagation()}),this.watchHandles.push(["EnablemouseEventdoubleclickhandler",i]),this.view.on("mouse-wheel",function(e){e.stopPropagation()}),this.watchHandles.push(["EnablemouseEventmouseWheelhandler",i])}},je.prototype.switchMode=function(e){if("2d"===e){this.view.goTo({heading:0,tilt:0});var i=this.view.on("drag",function(e){2===e.button&&e.stopPropagation()});this.watchHandles.push(["viewmodeswitchhandler",i])}else this.view.goTo({heading:0,tilt:60}),this.watchHandles.filter(function(e){return"viewmodeswitchhandler"===e[0]}).forEach(function(e){e[1].remove()}),this.watchHandles=this.watchHandles.filter(function(e){return"viewmodeswitchhandler"!==e[0]})},je.prototype.showBuilding=function(e){var t=this;null!==this.view&&"2D"!==this.viewMode&&(this.showBuildingBlock=!!e,["model_white_zw","model_air_real","model_white_as"].forEach(function(e){var i=t.view.map.findLayerById(e);!1===t.showBuildingBlock?i&&(i.visible=!1):i&&("basemap_zw"===t.view.map.basemap.id?i.visible="model_white_zw"===e:"basemap_as"===t.view.map.basemap.id?i.visible="model_white_as"===e:"basemap_air"===t.view.map.basemap.id&&(i.visible="model_air_real"===e))}))},je.prototype.addControl=function(r){var a=this;if("toc"===r.controlName.toLowerCase())we(["esri/widgets/LayerList","esri/widgets/Expand"]).then(function(e){var i=e[0],t=e[1],o=new i({container:document.createElement("div"),id:"maplayerlist",view:a.view});if(r.collapse){var l=new t({id:"layerlistonly",view:a.view,content:o.domNode,expandIconClass:"esri-icon-layers",expandTooltip:"专题图层框",group:"top-left"});a.mapControl.push([r.controlName,l]),r.visible&&a.view.ui.add(l,r.position)}else a.mapControl.push([r.controlName,o]),a.view.ui.add(o,r.position)}).catch(function(e){console.error(e)});else if("zoom"===r.controlName.toLowerCase())we(["esri/widgets/Zoom"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("compass"===r.controlName.toLowerCase())we(["esri/widgets/Compass"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("home"===r.controlName.toLowerCase())we(["esri/widgets/Home"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("fullscreen"===r.controlName.toLowerCase())we(["esri/widgets/Fullscreen"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("undergroundswitch"===r.controlName.toLowerCase()){if("2D"===this.viewMode)return;we(["esri/widgets/AboveBelowModeSwitch"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)})}else if("measurearea"===r.controlName.toLowerCase())"2D"===this.viewMode?we(["esri/widgets/AreaMeasureMentButton2D"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)}):we(["esri/widgets/AreaMeasureMentButton3D"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("measureline"===r.controlName.toLowerCase())"2D"===this.viewMode?we(["esri/widgets/DistanceMeasureMentButton2D"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)}):we(["esri/widgets/DistanceMeasureMentButton3D"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("basemaptoggle"===r.controlName.toLowerCase())"2D"===this.viewMode?we(["esri/widgets/BaseMapSwitchButton2D"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)}):we(["esri/widgets/BaseMapSwitchButton3D"]).then(function(e){var i=new e[0]({view:a.view,showBuildingBlock:a.showBuildingBlock});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("basemapgallery"===r.controlName.toLowerCase())we(["esri/widgets/BMapGallery_Control"]).then(function(e){var i=new e[0]({view:a.view,showBuildingBlock:a.showBuildingBlock});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("basemapgalleryexpand"===r.controlName.toLowerCase())we(["esri/widgets/BMapGallery_Expand"]).then(function(e){var i=new e[0]({view:a.view,showBuildingBlock:a.showBuildingBlock});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)});else if("bimfilter"===r.controlName.toLowerCase()){if("2D"===this.viewMode)return;we(["esri/widgets/BuildingSencelayerFilter"]).then(function(e){var i=new e[0]({view:a.view,layerid:r.layerid});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)})}else if("performanceinfo"===r.controlName.toLowerCase()){if("2D"===this.viewMode)return;we(["esri/widgets/PerformanceInfo"]).then(function(e){var i=new e[0]({view:a.view});a.mapControl.push([r.controlName,i]),r.visible&&a.view.ui.add(i,r.position)}).catch(function(e){console.error(e)})}},je.prototype.removeControl=function(o){var l=this;this.mapControl.forEach(function(e,i,t){e[0]===o.controlName&&(l.view.ui.remove(e[1]),l.mapControl.slice(i,1))})},je.prototype.enableThroughGround=function(e){null!==this.view&&"2D"!==this.viewMode&&(e?(this.view.map.ground.surfaceColor="#fff",this.view.map.ground.opacity=0,this.view.map.ground.navigationConstraint={type:"none"}):(this.view.map.ground.surfaceColor=null,this.view.map.ground.opacity=1,this.view.map.ground.navigationConstraint={type:"stay-above"}))},je.prototype.setExtentConstrain=function(a,n){var s=this;we(["esri/geometry/Extent","esri/geometry/geometryEngine","esri/core/watchUtils"]).then(function(e){var i=e[0],t=e[1],o=e[2],l=new i({xmin:a[0],ymin:a[1],xmax:n[0],ymax:n[1],spatialReference:s.view.spatialReference});s.view.extent=l;var r=o.whenTrue(s.view,"stationary",function(){t.contains(l,s.view.extent)||(s.view.extent=l)});s.watchHandles.push(["extentcontrain",r])})},je.prototype.removeExtentConstrain=function(){this.watchHandles.filter(function(e){return"extentcontrain"===e[0]}).forEach(function(e){e[1].remove()}),this.watchHandles=this.watchHandles.filter(function(e){return"extentcontrain"!==e[0]})},je.prototype.add=function(z){var C=this;we(["esri/Graphic","esri/geometry/Point","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon"]).then(function(e){var v=e[0],w=e[1],g=(e[2],e[3]),x=e[4];if(z instanceof Array)z.forEach(function(e){if("marker"===e.overlaytype.toLowerCase()){var i=void 0;i=e.symbol?e.symbol:"2d"===C.view.type?{type:"picture-marker",url:e.icon.image,width:e.icon.size.width,height:e.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:e.icon.size.width,resource:{href:e.icon.image}}]};var t=e.attributes;t.uuid=e.uuid;var o=new v({geometry:new w({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:C.view.spatialReference}),symbol:i,attributes:t});if(C.mapoverlayers.push(["smap-default",e.uuid,o]),C.view.graphics.add(o),e.label.visible){var l=null;l=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}};var r=new v({geometry:new w({x:"3d"===C.view.type?e.position[0]+e.label.xoffset:e.position[0],y:"3d"===C.view.type?e.position[1]+e.label.yoffset:e.position[1],z:"3d"===C.view.type?e.position[2]+e.label.zoffset:e.position[2],spatialReference:C.view.spatialReference}),symbol:l,attributes:t});C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",e.uuid,r])}}else if("polyline"===e.overlaytype.toLowerCase()){var a=null;a=e.symbol?e.symbol:{type:"simple-line",color:e.strokeColor,style:e.style,width:e.width,cap:e.cap,join:e.lineJoin};var n=[];e.path.forEach(function(e){n.push([e.X,e.Y,e.Z])});var s=new g({hasZ:!1,hasM:!1,paths:n,spatialReference:C.view.spatialReference}),c=e.attributes;c.uuid=e.uuid;var p=new v({geometry:s,symbol:a,attributes:c});if(C.mapoverlayers.push(["smap-default",e.uuid,p]),C.view.graphics.add(p),e.label.visible){var u=null;u=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},r=new v({geometry:p.geometry.extent.center,symbol:u,attributes:c}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",e.uuid,r])}}else if("polygon"===e.overlaytype.toLowerCase()){var d=void 0;d=e.symbol?e.symbol:"simple"===e.symboltype?{type:"simple-fill",color:e.fillColor,style:e.style,outline:{color:e.strokeColor,width:e.strokeWeight,style:e.strokestyle}}:{type:"picture-fill",url:e.url,width:e.picwidth,height:e.picheight,outline:{style:e.strokestyle,color:e.strokeColor,width:e.strokeWeight}};var f=[];e.paths.forEach(function(e){f.push([e.X,e.Y,e.Z])});var h=new x({hasZ:!0,hasM:!0,rings:f,spatialReference:C.view.spatialReference}),y=e.attributes;y.uuid=e.uuid;var b=new v({geometry:h,symbol:d,attributes:y});if(C.mapoverlayers.push(["smap-default",e.uuid,b]),C.view.graphics.add(b),e.label.visible){var m=null;m=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},r=new v({geometry:b.geometry.extent.center,symbol:m,attributes:y}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",e.uuid,r])}}});else if("group"===z.type)z.overlayers.forEach(function(e){if("marker"===e.overlaytype.toLowerCase()){var i=void 0;i=e.symbol?e.symbol:"2d"===C.view.type?{type:"picture-marker",url:e.icon.image,width:e.icon.size.width,height:e.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:e.icon.size.width,resource:{href:e.icon.image}}]};var t=e.attributes;t.uuid=e.uuid;var o=new v({geometry:new w({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:C.view.spatialReference}),symbol:i,attributes:t});if(C.mapoverlayers.push([z.uuid,e.uuid,o]),C.view.graphics.add(o),e.label.visible){var l=null;l=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}};var r=new v({geometry:new w({x:"3d"===C.view.type?e.position[0]+e.label.xoffset:e.position[0],y:"3d"===C.view.type?e.position[1]+e.label.yoffset:e.position[1],z:"3d"===C.view.type?e.position[2]+e.label.zoffset:e.position[2],spatialReference:C.view.spatialReference}),symbol:l,attributes:t});C.view.graphics.add(r),C.mapoverlayers.push([z.uuid,e.uuid,r])}}else if("polyline"===e.overlaytype.toLowerCase()){var a=null;a=e.symbol?e.symbol:{type:"simple-line",color:e.strokeColor,style:e.style,width:e.width,cap:e.cap,join:e.lineJoin};var n=[];e.path.forEach(function(e){n.push([e.X,e.Y,e.Z])});var s=new g({hasZ:!1,hasM:!1,paths:n,spatialReference:C.view.spatialReference}),c=e.attributes;c.uuid=e.uuid;var p=new v({geometry:s,symbol:a,attributes:c});if(C.mapoverlayers.push([z.uuid,e.uuid,p]),C.view.graphics.add(p),e.label.visible){var u=null;u=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},r=new v({geometry:p.geometry.extent.center,symbol:u,attributes:c}),C.view.graphics.add(r),C.mapoverlayers.push([z.uuid,e.uuid,r])}}else if("polygon"===e.overlaytype.toLowerCase()){var d=void 0;d=e.symbol?e.symbol:"simple"===e.symboltype?{type:"simple-fill",color:e.fillColor,style:e.style,outline:{color:e.strokeColor,width:e.strokeWeight,style:e.strokestyle}}:{type:"picture-fill",url:e.url,width:e.picwidth,height:e.picheight,outline:{style:e.strokestyle,color:e.strokeColor,width:e.strokeWeight}};var f=[];e.paths.forEach(function(e){f.push([e.X,e.Y,e.Z])});var h=e.attributes;h.uuid=e.uuid;var y=new x({hasZ:!0,hasM:!0,rings:f,spatialReference:C.view.spatialReference}),b=new v({geometry:y,symbol:d,attributes:h});if(C.mapoverlayers.push([z.uuid,e.uuid,b]),C.view.graphics.add(b),e.label.visible){var m=null;m=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},r=new v({geometry:b.geometry.extent.center,symbol:m,attributes:h}),C.view.graphics.add(r),C.mapoverlayers.push([z.uuid,e.uuid,r])}}});else if("element"===z.type)if("marker"===z.overlaytype.toLowerCase()){var i=void 0;i=z.symbol?z.symbol:"2d"===C.view.type?{type:"picture-marker",url:z.icon.image,width:z.icon.size.width,height:z.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:z.icon.size.width,resource:{href:z.icon.image}}]};var t=z.attributes;t.uuid=z.uuid;var o=new v({geometry:new w({x:z.position[0],y:z.position[1],z:void 0===z.position[2]?0:z.position[2],spatialReference:C.view.spatialReference}),symbol:i,attributes:t});if(C.mapoverlayers.push(["smap-default",z.uuid,o]),C.view.graphics.add(o),z.label.visible){var l=null;l=z.label.labelingInfo?z.label.labelingInfo:{type:z.label.type,text:z.label.text,color:z.label.color,angle:z.label.angle,backgroundColor:z.label.backgroundColor,borderLineColor:z.label.borderLineColor,borderLineSize:z.label.borderLineSize,kerning:z.label.kerning,lineHeight:z.label.lineHeight,lineWidth:z.label.lineWidth,rotated:z.label.rotated,haloColor:z.label.haloColor,haloSize:z.label.haloSize,xoffset:z.label.xoffset,yoffset:z.label.yoffset,verticalAlignment:z.label.verticalAlignment,horizontalAlignment:z.label.horizontalAlignment,font:{size:z.label.size,family:"Josefin Slab",weight:z.label.weight}};var r=new v({geometry:new w({x:"3d"===C.view.type?z.position[0]+z.label.xoffset:z.position[0],y:"3d"===C.view.type?z.position[1]+z.label.yoffset:z.position[1],z:"3d"===C.view.type?z.position[2]+z.label.zoffset:z.position[2],spatialReference:C.view.spatialReference}),symbol:l,attributes:t});C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",z.uuid,r])}}else if("polyline"===z.overlaytype.toLowerCase()){var a=null;a=z.symbol?z.symbol:{type:"simple-line",color:z.strokeColor,style:z.style,width:z.width,cap:z.cap,join:z.lineJoin};var n=[];z.path.forEach(function(e){n.push([e.X,e.Y,e.Z])});var s=new g({hasZ:!1,hasM:!1,paths:n,spatialReference:C.view.spatialReference}),c=z.attributes;c.uuid=z.uuid;var p=new v({geometry:s,symbol:a,attributes:c});if(C.mapoverlayers.push(["smap-default",z.uuid,p]),C.view.graphics.add(p),z.label.visible){var u=null;u=z.label.labelingInfo?z.label.labelingInfo:{type:z.label.type,text:z.label.text,color:z.label.color,angle:z.label.angle,backgroundColor:z.label.backgroundColor,borderLineColor:z.label.borderLineColor,borderLineSize:z.label.borderLineSize,kerning:z.label.kerning,lineHeight:z.label.lineHeight,lineWidth:z.label.lineWidth,rotated:z.label.rotated,haloColor:z.label.haloColor,haloSize:z.label.haloSize,xoffset:z.label.xoffset,yoffset:z.label.yoffset,verticalAlignment:z.label.verticalAlignment,horizontalAlignment:z.label.horizontalAlignment,font:{size:z.label.size,family:"Josefin Slab",weight:z.label.weight}},r=new v({geometry:p.geometry.extent.center,symbol:u,attributes:c}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",z.uuid,r])}}else if("polygon"===z.overlaytype.toLowerCase()){var d=void 0;d=z.symbol?z.symbol:"simple"===z.symboltype?{type:"simple-fill",color:z.fillColor,style:z.style,outline:{color:z.strokeColor,width:z.strokeWeight,style:z.strokestyle}}:{type:"picture-fill",url:z.url,width:z.picwidth,height:z.picheight,outline:{style:z.strokestyle,color:z.strokeColor,width:z.strokeWeight}};var f=[];z.paths.forEach(function(e){f.push([e.X,e.Y,e.Z])});var h=z.attributes;h.uuid=z.uuid;var y=new x({hasZ:!0,hasM:!0,rings:f,spatialReference:C.view.spatialReference}),b=new v({geometry:y,symbol:d,attributes:h});C.mapoverlayers.push(["smap-default",z.uuid,b]),C.view.graphics.add(b),z.label.visible&&(u=null,u=z.label.labelingInfo?z.label.labelingInfo:{type:z.label.type,text:z.label.text,color:z.label.color,angle:z.label.angle,backgroundColor:z.label.backgroundColor,borderLineColor:z.label.borderLineColor,borderLineSize:z.label.borderLineSize,kerning:z.label.kerning,lineHeight:z.label.lineHeight,lineWidth:z.label.lineWidth,rotated:z.label.rotated,haloColor:z.label.haloColor,haloSize:z.label.haloSize,xoffset:z.label.xoffset,yoffset:z.label.yoffset,verticalAlignment:z.label.verticalAlignment,horizontalAlignment:z.label.horizontalAlignment,font:{size:z.label.size,family:"Josefin Slab",weight:z.label.weight}},r=new v({geometry:b.geometry.extent.center,symbol:u,attributes:h}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",z.uuid,r]))}}).catch(function(e){console.error(e)})},je.prototype.remove=function(i){var t=this;i instanceof Array?i.forEach(function(i){t.mapoverlayers.filter(function(e){return e[1]===i.uuid}).forEach(function(e){t.view.graphics.remove(e[2])}),t.mapoverlayers=t.mapoverlayers.filter(function(e){return e[1]!==i.uuid})}):"group"===i.type?(this.mapoverlayers.filter(function(e){return e[0]===i.uuid}).forEach(function(e){t.view.graphics.remove(e[2])}),this.mapoverlayers=this.mapoverlayers.filter(function(e){return e[0]!==i.uuid})):"element"===i.type&&(this.mapoverlayers.filter(function(e){return e[1]===i.uuid}).forEach(function(e){t.view.graphics.remove(e[2])}),this.mapoverlayers=this.mapoverlayers.filter(function(e){return e[1]!==i.uuid}))},je.prototype.update=function(z){var C=this;we(["esri/Graphic","esri/geometry/Point","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon"]).then(function(e){var v=e[0],w=e[1],g=(e[2],e[3]),x=e[4];if(z instanceof Array)z.forEach(function(i){if(C.mapoverlayers.filter(function(e){return e[1]===i.uuid}).forEach(function(e){C.view.graphics.remove(e[2])}),C.mapoverlayers=C.mapoverlayers.filter(function(e){return e[1]!==i.uuid}),"marker"===i.overlaytype.toLowerCase()){var e=void 0;e=i.symbol?i.symbol:"2d"===C.view.type?{type:"picture-marker",url:i.icon.image,width:i.icon.size.width,height:i.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:i.icon.size.width,resource:{href:i.icon.image}}]};var t=i.attributes;t.uuid=i.uuid;var o=new v({geometry:new w({x:i.position[0],y:i.position[1],z:void 0===i.position[2]?0:i.position[2],spatialReference:C.view.spatialReference}),symbol:e,attributes:t});if(C.mapoverlayers.push(["smap-default",i.uuid,o]),C.view.graphics.add(o),i.label.visible){var l=null;l=i.label.labelingInfo?i.label.labelingInfo:{type:i.label.type,text:i.label.text,color:i.label.color,angle:i.label.angle,backgroundColor:i.label.backgroundColor,borderLineColor:i.label.borderLineColor,borderLineSize:i.label.borderLineSize,kerning:i.label.kerning,lineHeight:i.label.lineHeight,lineWidth:i.label.lineWidth,rotated:i.label.rotated,haloColor:i.label.haloColor,haloSize:i.label.haloSize,xoffset:i.label.xoffset,yoffset:i.label.yoffset,verticalAlignment:i.label.verticalAlignment,horizontalAlignment:i.label.horizontalAlignment,font:{size:i.label.size,family:"Josefin Slab",weight:i.label.weight}};var r=new v({geometry:new w({x:"3d"===C.view.type?i.position[0]+i.label.xoffset:i.position[0],y:"3d"===C.view.type?i.position[1]+i.label.yoffset:i.position[1],z:"3d"===C.view.type?i.position[2]+i.label.zoffset:i.position[2],spatialReference:C.view.spatialReference}),symbol:l,attributes:t});C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",i.uuid,r])}}else if("polyline"===i.overlaytype.toLowerCase()){var a=null;a=i.symbol?i.symbol:{type:"simple-line",color:i.strokeColor,style:i.style,width:i.width,cap:i.cap,join:i.lineJoin};var n=[];i.path.forEach(function(e){n.push([e.X,e.Y,e.Z])});var s=new g({hasZ:!1,hasM:!1,paths:n,spatialReference:C.view.spatialReference}),c=i.attributes;c.uuid=i.uuid;var p=new v({geometry:s,symbol:a,attributes:c});if(C.mapoverlayers.push(["smap-default",i.uuid,p]),C.view.graphics.add(p),i.label.visible){var u=null;u=i.label.labelingInfo?i.label.labelingInfo:{type:i.label.type,text:i.label.text,color:i.label.color,angle:i.label.angle,backgroundColor:i.label.backgroundColor,borderLineColor:i.label.borderLineColor,borderLineSize:i.label.borderLineSize,kerning:i.label.kerning,lineHeight:i.label.lineHeight,lineWidth:i.label.lineWidth,rotated:i.label.rotated,haloColor:i.label.haloColor,haloSize:i.label.haloSize,xoffset:i.label.xoffset,yoffset:i.label.yoffset,verticalAlignment:i.label.verticalAlignment,horizontalAlignment:i.label.horizontalAlignment,font:{size:i.label.size,family:"Josefin Slab",weight:i.label.weight}},r=new v({geometry:p.geometry.extent.center,symbol:u,attributes:c}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",i.uuid,r])}}else if("polygon"===i.overlaytype.toLowerCase()){var d=void 0;d=i.symbol?i.symbol:"simple"===i.symboltype?{type:"simple-fill",color:i.fillColor,style:i.style,outline:{color:i.strokeColor,width:i.strokeWeight,style:i.strokestyle}}:{type:"picture-fill",url:i.url,width:i.picwidth,height:i.picheight,outline:{style:i.strokestyle,color:i.strokeColor,width:i.strokeWeight}};var f=[];i.paths.forEach(function(e){f.push([e.X,e.Y,e.Z])});var h=new x({hasZ:!0,hasM:!0,rings:f,spatialReference:C.view.spatialReference}),y=i.attributes;y.uuid=i.uuid;var b=new v({geometry:h,symbol:d,attributes:y});if(C.mapoverlayers.push(["smap-default",i.uuid,b]),C.view.graphics.add(b),i.label.visible){var m=null;m=i.label.labelingInfo?i.label.labelingInfo:{type:i.label.type,text:i.label.text,color:i.label.color,angle:i.label.angle,backgroundColor:i.label.backgroundColor,borderLineColor:i.label.borderLineColor,borderLineSize:i.label.borderLineSize,kerning:i.label.kerning,lineHeight:i.label.lineHeight,lineWidth:i.label.lineWidth,rotated:i.label.rotated,haloColor:i.label.haloColor,haloSize:i.label.haloSize,xoffset:i.label.xoffset,yoffset:i.label.yoffset,verticalAlignment:i.label.verticalAlignment,horizontalAlignment:i.label.horizontalAlignment,font:{size:i.label.size,family:"Josefin Slab",weight:i.label.weight}},r=new v({geometry:b.geometry.extent.center,symbol:m,attributes:y}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",i.uuid,r])}}});else if("group"===z.type)C.mapoverlayers.filter(function(e){return e[0]===z.uuid}).forEach(function(e){C.view.graphics.remove(e[2])}),C.mapoverlayers=C.mapoverlayers.filter(function(e){return e[0]!==z.uuid}),z.overlayers.forEach(function(e){if("marker"===e.overlaytype.toLowerCase()){var i=void 0;i=e.symbol?e.symbol:"2d"===C.view.type?{type:"picture-marker",url:e.icon.image,width:e.icon.size.width,height:e.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:e.icon.size.width,resource:{href:e.icon.image}}]};var t=e.attributes;t.uuid=e.uuid;var o=new v({geometry:new w({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:C.view.spatialReference}),symbol:i,attributes:t});if(C.mapoverlayers.push([z.uuid,e.uuid,o]),C.view.graphics.add(o),e.label.visible){var l=null;l=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}};var r=new v({geometry:new w({x:"3d"===C.view.type?e.position[0]+e.label.xoffset:e.position[0],y:"3d"===C.view.type?e.position[1]+e.label.yoffset:e.position[1],z:"3d"===C.view.type?e.position[2]+e.label.zoffset:e.position[2],spatialReference:C.view.spatialReference}),symbol:l,attributes:t});C.view.graphics.add(r),C.mapoverlayers.push([z.uuid,e.uuid,r])}}else if("polyline"===e.overlaytype.toLowerCase()){var a=null;a=e.symbol?e.symbol:{type:"simple-line",color:e.strokeColor,style:e.style,width:e.width,cap:e.cap,join:e.lineJoin};var n=[];e.path.forEach(function(e){n.push([e.X,e.Y,e.Z])});var s=new g({hasZ:!1,hasM:!1,paths:n,spatialReference:C.view.spatialReference}),c=e.attributes;c.uuid=e.uuid;var p=new v({geometry:s,symbol:a,attributes:c});if(C.mapoverlayers.push([z.uuid,e.uuid,p]),C.view.graphics.add(p),e.label.visible){var u=null;u=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},r=new v({geometry:p.geometry.extent.center,symbol:u,attributes:c}),C.view.graphics.add(r),C.mapoverlayers.push([z.uuid,e.uuid,r])}}else if("polygon"===e.overlaytype.toLowerCase()){var d=void 0;d=e.symbol?e.symbol:"simple"===z.symboltype?{type:"simple-fill",color:z.fillColor,style:z.style,outline:{color:z.strokeColor,width:z.strokeWeight,style:z.strokestyle}}:{type:"picture-fill",url:z.url,width:z.picwidth,height:z.picheight,outline:{style:z.strokestyle,color:z.strokeColor,width:z.strokeWeight}};var f=[];z.paths.forEach(function(e){f.push([e.X,e.Y,e.Z])});var h=e.attributes;h.uuid=e.uuid;var y=new x({hasZ:!0,hasM:!0,rings:f,spatialReference:C.view.spatialReference}),b=new v({geometry:y,symbol:d,attributes:h});if(C.mapoverlayers.push(["smap-default",z.uuid,b]),C.view.graphics.add(b),z.label.visible){var m=null;m=e.label.labelingInfo?e.label.labelingInfo:{type:z.label.type,text:z.label.text,color:z.label.color,angle:z.label.angle,backgroundColor:z.label.backgroundColor,borderLineColor:z.label.borderLineColor,borderLineSize:z.label.borderLineSize,kerning:z.label.kerning,lineHeight:z.label.lineHeight,lineWidth:z.label.lineWidth,rotated:z.label.rotated,haloColor:z.label.haloColor,haloSize:z.label.haloSize,xoffset:z.label.xoffset,yoffset:z.label.yoffset,verticalAlignment:z.label.verticalAlignment,horizontalAlignment:z.label.horizontalAlignment,font:{size:z.label.size,family:"Josefin Slab",weight:z.label.weight}},r=new v({geometry:b.geometry.extent.center,symbol:m,attributes:h}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",z.uuid,r])}}});else if("element"===z.type)if(C.mapoverlayers.filter(function(e){return e[1]===z.uuid}).forEach(function(e){C.view.graphics.remove(e[2])}),C.mapoverlayers=C.mapoverlayers.filter(function(e){return e[1]!==z.uuid}),"marker"===z.overlaytype.toLowerCase()){var i=void 0;i=z.symbol?z.symbol:"2d"===C.view.type?{type:"picture-marker",url:z.icon.image,width:z.icon.size.width,height:z.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:z.icon.size.width,resource:{href:z.icon.image}}]};var t=z.attributes;t.uuid=z.uuid;var o=new v({geometry:new w({x:z.position[0],y:z.position[1],z:void 0===z.position[2]?0:z.position[2],spatialReference:C.view.spatialReference}),symbol:i,attributes:t});if(C.mapoverlayers.push(["smap-default",z.uuid,o]),C.view.graphics.add(o),z.label.visible){var l=null;l=z.label.labelingInfo?z.label.labelingInfo:{type:z.label.type,text:z.label.text,color:z.label.color,angle:z.label.angle,backgroundColor:z.label.backgroundColor,borderLineColor:z.label.borderLineColor,borderLineSize:z.label.borderLineSize,kerning:z.label.kerning,lineHeight:z.label.lineHeight,lineWidth:z.label.lineWidth,rotated:z.label.rotated,haloColor:z.label.haloColor,haloSize:z.label.haloSize,xoffset:z.label.xoffset,yoffset:z.label.yoffset,verticalAlignment:z.label.verticalAlignment,horizontalAlignment:z.label.horizontalAlignment,font:{size:z.label.size,family:"Josefin Slab",weight:z.label.weight}};var r=new v({geometry:new w({x:"3d"===C.view.type?z.position[0]+z.label.xoffset:z.position[0],y:"3d"===C.view.type?z.position[1]+z.label.yoffset:z.position[1],z:"3d"===C.view.type?z.position[2]+z.label.zoffset:z.position[2],spatialReference:C.view.spatialReference}),symbol:l,attributes:t});C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",z.uuid,r])}}else if("polyline"===z.overlaytype.toLowerCase()){var a=null;a=z.symbol?z.symbol:{type:"simple-line",color:z.strokeColor,style:z.style,width:z.width,cap:z.cap,join:z.lineJoin};var n=[];z.path.forEach(function(e){n.push([e.X,e.Y,e.Z])});var s=new g({hasZ:!1,hasM:!1,paths:n,spatialReference:C.view.spatialReference}),c=z.attributes;c.uuid=z.uuid;var p=new v({geometry:s,symbol:a,attributes:c});if(C.mapoverlayers.push(["smap-default",z.uuid,p]),C.view.graphics.add(p),z.label.visible){var u=null;u=z.label.labelingInfo?z.label.labelingInfo:{type:z.label.type,text:z.label.text,color:z.label.color,angle:z.label.angle,backgroundColor:z.label.backgroundColor,borderLineColor:z.label.borderLineColor,borderLineSize:z.label.borderLineSize,kerning:z.label.kerning,lineHeight:z.label.lineHeight,lineWidth:z.label.lineWidth,rotated:z.label.rotated,haloColor:z.label.haloColor,haloSize:z.label.haloSize,xoffset:z.label.xoffset,yoffset:z.label.yoffset,verticalAlignment:z.label.verticalAlignment,horizontalAlignment:z.label.horizontalAlignment,font:{size:z.label.size,family:"Josefin Slab",weight:z.label.weight}},r=new v({geometry:p.geometry.extent.center,symbol:u,attributes:c}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",z.uuid,r])}}else if("polygon"===z.overlaytype.toLowerCase()){var d=void 0;d=z.symbol?z.symbol:"simple"===z.symboltype?{type:"simple-fill",color:z.fillColor,style:z.style,outline:{color:z.strokeColor,width:z.strokeWeight,style:z.strokestyle}}:{type:"picture-fill",url:z.url,width:z.picwidth,height:z.picheight,outline:{style:z.strokestyle,color:z.strokeColor,width:z.strokeWeight}};var f=[];z.paths.forEach(function(e){f.push([e.X,e.Y,e.Z])});var h=new x({hasZ:!0,hasM:!0,rings:f,spatialReference:C.view.spatialReference}),y=z.attributes;y.uuid=z.uuid;var b=new v({geometry:h,symbol:d,attributes:y});C.mapoverlayers.push(["smap-default",z.uuid,b]),C.view.graphics.add(b),z.label.visible&&(u=null,u=z.label.labelingInfo?z.label.labelingInfo:{type:z.label.type,text:z.label.text,color:z.label.color,angle:z.label.angle,backgroundColor:z.label.backgroundColor,borderLineColor:z.label.borderLineColor,borderLineSize:z.label.borderLineSize,kerning:z.label.kerning,lineHeight:z.label.lineHeight,lineWidth:z.label.lineWidth,rotated:z.label.rotated,haloColor:z.label.haloColor,haloSize:z.label.haloSize,xoffset:z.label.xoffset,yoffset:z.label.yoffset,verticalAlignment:z.label.verticalAlignment,horizontalAlignment:z.label.horizontalAlignment,font:{size:z.label.size,family:"Josefin Slab",weight:z.label.weight}},r=new v({geometry:b.geometry.extent.center,symbol:u,attributes:y}),C.view.graphics.add(r),C.mapoverlayers.push(["smap-default",z.uuid,r]))}})},je.prototype.addfeature=function(y){var b=this;we(["esri/layers/FeatureLayer","esri/layers/support/LabelClass","esri/Graphic","esri/geometry/Point","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon"]).then(function(e){var s=e[0],c=e[1],p=e[2],u=e[3];if(e[4],e[5],e[6],y instanceof Array)y.forEach(function(e){if("marker"===e.overlaytype.toLowerCase()){var i=void 0;i=e.renderer?e.renderer:"3D"===b.viewMode?{type:"simple",symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:e.icon.size.width,resource:{href:e.icon.image}}]}}:{type:"simple",symbol:{type:"picture-marker",url:e.icon.image,width:e.icon.size.width,height:e.icon.size.height}};var t=[{name:"objectId",alias:"objectId",type:"oid"},{name:"uuid",alias:"唯一标识",type:"string"}];Object.keys(e.attributes).forEach(function(e){t.push({name:e,alias:e,type:"string"})});var o=new s({id:e.uuid,title:e.uuid,objectIdField:"OBJECTID",geometryType:"point",renderer:i,screenSizePerspectiveEnabled:!0,popupEnabled:!1,popupTemplate:!1,fields:t,source:[],spatialReference:b.view.spatialReference});e.elevationInfo||(o.elevationInfo=e.elevationInfo);var l=e.attributes;l.uuid=e.uuid;var r=new p({geometry:new u({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:b.view.spatialReference}),attributes:l});if(o.source.add(r),b.view.map.add(o),b.mapoverlayersflayer.push([e.uuid,e.uuid,r]),e.label.visible){var a=void 0;if(e.label.labelingInfo)a=e.label.labelingInfo,o.labelingInfo=a;else{a="2D"===b.viewMode?{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:e.label.color},size:e.label.size,halo:{color:e.label.haloColor,size:e.label.haloSize}}]};var n=new c({labelExpressionInfo:{expression:"$feature.NAME"},symbol:a,labelPlacement:e.label.placement,minScale:e.label.minScale,maxScale:e.label.maxScale});o.labelingInfo=[n]}}}});else if("group"===y.type){var i,t=[{name:"objectId",alias:"objectId",type:"oid"},{name:"uuid",alias:"唯一标识",type:"string"}];if(t.push({name:"style",alias:"样式",type:"string"}),y.datafiled.forEach(function(e){t.push(e)}),"marker"===y.overlaytype.toLowerCase()){y.renderer?i=y.renderer:(i={type:"unique-value",field:"style",uniqueValueInfos:[]},y.style.forEach(function(e){"3D"===b.viewMode?i.uniqueValueInfos.push({value:e.style,label:e.style,symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:e.size.height,resource:{href:e.url}}]}}):i.uniqueValueInfos.push({value:e.style,label:e.style,symbol:{type:"picture-marker",url:e.url,width:e.size.width,height:e.size.height}})}));var o=new s({id:y.uuid,title:y.uuid,objectIdField:"OBJECTID",geometryType:"point",renderer:i,screenSizePerspectiveEnabled:"3D"===b.viewMode,popupEnabled:!1,popupTemplate:!1,fields:t,source:[],spatialReference:b.view.spatialReference});if(y.elevationInfo&&(o.elevationInfo=y.elevationInfo),y.frreduction&&("3d"===b.view.type?o.featureReduction={type:y.frreduction.type}:o.featureReduction=y.frreduction.clusterConfig),b.view.map.add(o),y.overlayers.forEach(function(e){e.attributes.uuid=e.uuid;var i=new p({geometry:new u({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:b.view.spatialReference}),attributes:e.attributes});o.source.add(i),b.mapoverlayersflayer.push([y.uuid,e.uuid,i])}),y.label.visible){var l=void 0;if(y.label.labelingInfo)l=y.label.labelingInfo,o.labelingInfo=l;else{l="2D"===b.viewMode?{type:y.label.type,text:y.label.text,color:y.label.color,angle:y.label.angle,backgroundColor:y.label.backgroundColor,borderLineColor:y.label.borderLineColor,borderLineSize:y.label.borderLineSize,kerning:y.label.kerning,lineHeight:y.label.lineHeight,lineWidth:y.label.lineWidth,rotated:y.label.rotated,haloColor:y.label.haloColor,haloSize:y.label.haloSize,xoffset:y.label.xoffset,yoffset:y.label.yoffset,verticalAlignment:y.label.verticalAlignment,horizontalAlignment:y.label.horizontalAlignment,font:{size:y.label.size,family:"Josefin Slab",weight:y.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:y.label.color},size:y.label.size,halo:{color:y.label.haloColor,size:y.label.haloSize}}]};var r=new c({labelExpressionInfo:{expression:"$feature.NAME"},symbol:l,labelPlacement:y.label.placement,minScale:y.label.minScale,maxScale:y.label.maxScale});o.labelingInfo=[r]}}}}else if("element"===y.type&&"marker"===y.overlaytype.toLowerCase()){var a=void 0;a=y.renderer?y.renderer:"3D"===b.viewMode?{type:"simple",symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:y.icon.size.width,resource:{href:y.icon.image}}]}}:{type:"simple",symbol:{type:"picture-marker",url:y.icon.image,width:y.icon.size.width,height:y.icon.size.height}};var n=[{name:"objectId",alias:"objectId",type:"oid"},{name:"uuid",alias:"唯一标识",type:"string"}];Object.keys(y.attributes).forEach(function(e){n.push({name:e,alias:e,type:"string"})});var d=new s({id:y.uuid,title:y.uuid,objectIdField:"OBJECTID",geometryType:"point",renderer:a,screenSizePerspectiveEnabled:!0,popupEnabled:!1,popupTemplate:!1,fields:n,source:[],spatialReference:b.view.spatialReference});y.elevationInfo&&(d.elevationInfo=y.elevationInfo);var f=y.attributes;f.uuid=y.uuid;var h=new p({geometry:new u({x:y.position[0],y:y.position[1],z:void 0===y.position[2]?0:y.position[2],spatialReference:b.view.spatialReference}),attributes:f});d.source.add(h),b.view.map.add(d),b.mapoverlayersflayer.push([y.uuid,y.uuid,h]),y.label.visible&&(l=void 0,y.label.labelingInfo?(l=y.label.labelingInfo,d.labelingInfo=l):(l="2D"===b.viewMode?{type:y.label.type,text:y.label.text,color:y.label.color,angle:y.label.angle,backgroundColor:y.label.backgroundColor,borderLineColor:y.label.borderLineColor,borderLineSize:y.label.borderLineSize,kerning:y.label.kerning,lineHeight:y.label.lineHeight,lineWidth:y.label.lineWidth,rotated:y.label.rotated,haloColor:y.label.haloColor,haloSize:y.label.haloSize,xoffset:y.label.xoffset,yoffset:y.label.yoffset,verticalAlignment:y.label.verticalAlignment,horizontalAlignment:y.label.horizontalAlignment,font:{size:y.label.size,family:"Josefin Slab",weight:y.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:y.label.color},size:y.label.size,halo:{color:y.label.haloColor,size:y.label.haloSize}}]},r=new c({labelExpressionInfo:{expression:"$feature.NAME"},symbol:l,labelPlacement:y.label.placement,minScale:y.label.minScale,maxScale:y.label.maxScale}),d.labelingInfo=[r]))}})},je.prototype.updatefeature=function(n){var s=this;we(["esri/layers/FeatureLayer","esri/layers/support/LabelClass","esri/Graphic","esri/geometry/Point","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon"]).then(function(e){e[0];var a=e[1],o=(e[2],e[3]);if(e[4],e[5],e[6],n instanceof Array)n.forEach(function(r){"marker"===r.overlaytype.toLowerCase()&&s.mapoverlayersflayer.filter(function(e){return e[1]===r.uuid}).forEach(function(i){var e=[],t=new o({x:r.position[0],y:r.position[1],z:void 0===r.position[2]?0:r.position[2],spatialReference:s.view.spatialReference});i[2].geometry=t,Object.keys(r.attributes).map(function(e){"objectId"!==e&&i[2].setAttribute(e,r.attributes[e])}),e.push(i[2]);var l=s.view.map.findLayerById(i[0]);null!==l&&l.applyEdits({updateFeatures:e}).then(function(e){var i;if(i=r.renderer?r.renderer:"3D"===s.viewMode?{type:"simple",symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:r.icon.size.width,resource:{href:r.icon.image}}]}}:{type:"simple",symbol:{type:"picture-marker",url:r.icon.image,width:r.icon.size.width,height:r.icon.size.height}},r.label.visible){var t=void 0;if(r.label.labelingInfo)t=r.label.labelingInfo,l.labelingInfo=t;else{t="2D"===s.viewMode?{type:r.label.type,text:r.label.text,color:r.label.color,angle:r.label.angle,backgroundColor:r.label.backgroundColor,borderLineColor:r.label.borderLineColor,borderLineSize:r.label.borderLineSize,kerning:r.label.kerning,lineHeight:r.label.lineHeight,lineWidth:r.label.lineWidth,rotated:r.label.rotated,haloColor:r.label.haloColor,haloSize:r.label.haloSize,xoffset:r.label.xoffset,yoffset:r.label.yoffset,verticalAlignment:r.label.verticalAlignment,horizontalAlignment:r.label.horizontalAlignment,font:{size:r.label.size,family:"Josefin Slab",weight:r.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:r.label.color},size:r.label.size,halo:{color:r.label.haloColor,size:r.label.haloSize}}]};var o=new a({labelExpressionInfo:{expression:"$feature.NAME"},symbol:t,labelPlacement:r.label.placement,minScale:r.label.minScale,maxScale:r.label.maxScale});l.labelingInfo=[o]}}l.renderer=i,l.refresh()})})});else if("group"===n.type){var l=[];n.overlayers.forEach(function(i){var t=s.mapoverlayersflayer.filter(function(e){return e[1]===i.uuid});if(1===t.length){i.attributes.uuid=i.uuid;var e=new o({x:i.position[0],y:i.position[1],z:void 0===i.position[2]?0:i.position[2],spatialReference:s.view.spatialReference});t[0][2].geometry=e,Object.keys(i.attributes).map(function(e){"objectId"!==e&&t[0][2].setAttribute(e,i.attributes[e])}),l.push(t[0][2])}});var r=s.view.map.findLayerById(n.uuid);null!==r&&r.applyEdits({updateFeatures:l}).then(function(e){var i;if(n.renderer?i=n.renderer:(i={type:"unique-value",field:"style",uniqueValueInfos:[]},n.style.forEach(function(e){"3D"===s.viewMode?i.uniqueValueInfos.push({value:e.style,label:e.style,symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:e.size.height,resource:{href:e.url}}]}}):i.uniqueValueInfos.push({value:e.style,label:e.style,symbol:{type:"picture-marker",url:e.url,width:e.size.width,height:e.size.height}})})),r.renderer=i,100<r.source.items.length&&null!=n.frreduction&&(r.featureReduction={type:n.frreduction.type,clusterRadius:n.frreduction.clusterRadius}),n.label.visible){var t=void 0;if(n.label.labelingInfo)t=n.label.labelingInfo;else{t="2D"===s.viewMode?{type:n.label.type,text:n.label.text,color:n.label.color,angle:n.label.angle,backgroundColor:n.label.backgroundColor,borderLineColor:n.label.borderLineColor,borderLineSize:n.label.borderLineSize,kerning:n.label.kerning,lineHeight:n.label.lineHeight,lineWidth:n.label.lineWidth,rotated:n.label.rotated,haloColor:n.label.haloColor,haloSize:n.label.haloSize,xoffset:n.label.xoffset,yoffset:n.label.yoffset,verticalAlignment:n.label.verticalAlignment,horizontalAlignment:n.label.horizontalAlignment,font:{size:n.label.size,family:"Josefin Slab",weight:n.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:n.label.color},size:n.label.size,halo:{color:n.label.haloColor,size:n.label.haloSize}}]};var o=new a({labelExpressionInfo:{expression:"$feature.NAME"},symbol:t,labelPlacement:n.label.placement,minScale:n.label.minScale,maxScale:n.label.maxScale});r.labelingInfo=[o]}}r.refresh()})}else"element"===n.type&&s.mapoverlayersflayer.filter(function(e){return e[1]===n.uuid}).forEach(function(l){var e=[];n.attributes.uuid=n.uuid;var i=new o({x:n.position[0],y:n.position[1],z:void 0===n.position[2]?0:n.position[2],spatialReference:s.view.spatialReference});l[2].geometry=i,Object.keys(n.attributes).map(function(e){"objectId"!==e&&l[2].setAttribute(e,n.attributes[e])}),e.push(l[2]);var r=s.view.map.findLayerById(l[0]);null!==r&&r.applyEdits({updateFeatures:e}).then(function(e){var i;if(l[0]===l[1]&&(i=n.renderer?"3D"===s.viewMode?{type:"simple",symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:n.icon.size.width,resource:{href:n.icon.image}}]}}:{type:"simple",symbol:{type:"picture-marker",url:n.icon.image,width:n.icon.size.width,height:n.icon.size.height}}:n.renderer,r.renderer=i,n.label.visible)){var t=void 0;if(n.label.labelingInfo)t=n.label.labelingInfo,r.labelingInfo=t;else{t="2D"===s.viewMode?{type:n.label.type,text:n.label.text,color:n.label.color,angle:n.label.angle,backgroundColor:n.label.backgroundColor,borderLineColor:n.label.borderLineColor,borderLineSize:n.label.borderLineSize,kerning:n.label.kerning,lineHeight:n.label.lineHeight,lineWidth:n.label.lineWidth,rotated:n.label.rotated,haloColor:n.label.haloColor,haloSize:n.label.haloSize,xoffset:n.label.xoffset,yoffset:n.label.yoffset,verticalAlignment:n.label.verticalAlignment,horizontalAlignment:n.label.horizontalAlignment,font:{size:n.label.size,family:"Josefin Slab",weight:n.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:n.label.color},size:n.label.size,halo:{color:n.label.haloColor,size:n.label.haloSize}}]};var o=new a({labelExpressionInfo:{expression:"$feature.NAME"},symbol:t,labelPlacement:n.label.placement,minScale:n.label.minScale,maxScale:n.label.maxScale});r.labelingInfo=[o]}r.refresh()}})})})},je.prototype.removefeature=function(i){var t=this;if(i instanceof Array)i.forEach(function(i){t.mapoverlayersflayer.filter(function(e){return e[1]===i.uuid}).forEach(function(e){var i=t.view.map.findLayerById(e[0]);null!==i&&i.applyEdits({deleteFeatures:[e[2]]}).then(function(e){i.queryFeatures().then(function(e){0===e.features.length&&t.view.map.remove(i)})})}),t.mapoverlayersflayer=t.mapoverlayersflayer.filter(function(e){return e[1]!==i.uuid})});else if("group"===i.type){var e=this.view.map.findLayerById(i.uuid);null!==e&&this.view.map.remove(e),this.mapoverlayersflayer=this.mapoverlayersflayer.filter(function(e){return e[0]!==i.uuid})}else"element"===i.type&&(this.mapoverlayersflayer.filter(function(e){return e[1]===i.uuid}).forEach(function(e){var i=t.view.map.findLayerById(e[0]);null!==i&&i.applyEdits({deleteFeatures:[e[2]]}).then(function(e){i.queryFeatures().then(function(e){0===e.features.length&&t.view.map.remove(i)})})}),this.mapoverlayersflayer=this.mapoverlayersflayer.filter(function(e){return e[1]!==i.uuid}))},je.prototype.clearMap=function(){this.view.graphics.removeAll(),this.mapoverlayers=[]},je.prototype.setmaskboundary=function(f){var h=this;we(["esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Polygon","esri/geometry/geometryEngineAsync","esri/geometry/SpatialReference","esri/Color"]).then(function(e){var c=e[0],i=e[1],t=e[2],p=e[3],u=(e[4],e[5]),o=null;"qx_boundary"===f.boundaryType?o=h.view.map.findLayerById("qx_boundary"):"jd_boundary"===f.boundaryType?o=h.view.map.findLayerById("jd_boundary"):"jwh_boundary"===f.boundaryType&&(o=h.view.map.findLayerById("jwh_boundary"));var d=h.view.map.findLayerById("mask_boundary_graphiclayer");if(null==d&&(d=new i({id:"mask_boundary_graphiclayer",title:"遮罩层",listMode:"hide"}),h.view.map.add(d)),d.removeAll(),f.inputgeometry){if(null===(o=h.view.map.findLayerById("qx_boundary")))return;var l=new t({rings:f.inputgeometry,spatialReference:h.view.spatialReference}),r=o.fullExtent;r.spatialReference=h.view.spatialReference;var s=l;s.spatialReference=h.view.spatialReference,p.buffer(s,f.boundarydistance,"meters").then(function(e){p.difference(r,e).then(function(e){var i;i="3D"===h.viewMode?f.symbol?{type:"polygon-3d",symbolLayers:[{type:"extrude",material:{color:f.maskColor},size:f.symbol.size,edges:{type:"solid",color:f.maskColor}}]}:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:f.maskColor},outline:{color:"white",size:"0px"}}]}:{type:"simple-fill",color:f.maskColor,style:"solid",outline:{color:f.maskColor,width:1}};var t=new c({geometry:e,symbol:i});d.add(t);for(var l=void 0===f.bounarycount?30:f.bounarycount,r=Math.ceil(f.boundarydistance/l),a=new u(f.boundaryColor).toRgba(),o=function(o){p.buffer(s,o*l,"meters").then(function(i){p.buffer(s,(o-1)*l,"meters").then(function(e){p.difference(i,e).then(function(e){var i;a[3]=1/r*o,i="3D"===h.viewMode?f.symbol?{type:"polygon-3d",symbolLayers:[{type:"extrude",material:{color:a},size:f.symbol.size,edges:{type:"solid",color:a}}]}:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:a},outline:{color:"white",size:"0px"}}]}:{type:"simple-fill",color:a,style:"solid",outline:{color:a,width:1}};var t=new c({geometry:e,symbol:i});d.add(t)})})})},n=1;n<=r;n++)o(n)})})}else{if(null===o)return;var a=o.createQuery();a.where=f.boundaryDefinition,o.queryFeatures(a).then(function(e){if(e.features.length){var i=o.fullExtent;i.spatialReference=h.view.spatialReference;var s=e.features[0].geometry;s.spatialReference=h.view.spatialReference,p.buffer(s,f.boundarydistance,"meters").then(function(e){p.difference(i,e).then(function(e){var i;i="3D"===h.viewMode?f.symbol?{type:"polygon-3d",symbolLayers:[{type:"extrude",material:{color:f.maskColor},size:f.symbol.size,edges:{type:"solid",color:f.maskColor}}]}:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:f.maskColor},outline:{color:"white",size:"0px"}}]}:{type:"simple-fill",color:f.maskColor,style:"solid",outline:{color:f.maskColor,width:1}};var t=new c({geometry:e,symbol:i});d.add(t);for(var l=void 0===f.bounarycount?30:f.bounarycount,r=Math.ceil(f.boundarydistance/l),a=new u(f.boundaryColor).toRgba(),o=function(o){p.buffer(s,o*l,"meters").then(function(i){p.buffer(s,(o-1)*l,"meters").then(function(e){p.difference(i,e).then(function(e){var i;a[3]=1/r*o,i="3D"===h.viewMode?f.symbol?{type:"polygon-3d",symbolLayers:[{type:"extrude",material:{color:a},size:f.symbol.size,edges:{type:"solid",color:a}}]}:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:a},outline:{color:"white",size:"0px"}}]}:{type:"simple-fill",color:a,style:"solid",outline:{color:a,width:1}};var t=new c({geometry:e,symbol:i});d.add(t)})})})},n=1;n<=r;n++)o(n)})})}})}})},je.prototype.init=function(n,s,c){return Oe(this,void 0,void 0,function(){var i,t,o=this;return Ne(this,function(e){return i=void 0===c.userName?ie.userName:c.userName,t=void 0===c.menuName?ie.menuName:c.menuName,we(["smiapi/utils/xhrutils"]).then(function(e){var a=e[0];a.mapconfig(i,t,ie.proxyURL,ie.mapconfigbackendurl).then(function(r){return Oe(o,void 0,void 0,function(){var i,t,o,l=this;return Ne(this,function(e){switch(e.label){case 0:return this.mapconfig=r.data.mapconfig[0],this.maplayers=r.data.layers,this.mapwidgets=r.data.mapwidgets,this.mapProxys=r.data.mapProxys,this.mapextent=r.data.mapextent[0],"1"!==this.mapconfig.tokenType?[3,1]:(i=void 0===this.mapconfig.backtokenconfigname?ie.tokenconfigname:this.mapconfig.backtokenconfigname,t=window.location.host,a.maptoken_backend(ie.proxyURL,this.mapconfig.backtokenUrl,i,t).then(function(t){return Oe(l,void 0,void 0,function(){var i;return Ne(this,function(e){switch(e.label){case 0:return this.maptoken=JSON.parse(t.data).token,"3D"!==this.viewMode?[3,2]:[4,ke(n,this.mapconfig,this.maplayers,this.mapwidgets,this.mapProxys,this.mapextent,this.maptoken,c)];case 1:return i=e.sent(),this.view=i.sceneView,[3,4];case 2:return[4,Le(n,this.mapconfig,this.maplayers,this.mapwidgets,this.mapProxys,this.mapextent,this.maptoken,c)];case 3:i=e.sent(),this.view=i.mapView,e.label=4;case 4:return this.initEvent(),[2]}})})}),[3,7]);case 1:return"2"!==this.mapconfig.tokenType?[3,6]:"3D"!==this.viewMode?[3,3]:[4,ke(n,this.mapconfig,this.maplayers,this.mapwidgets,this.mapProxys,this.mapextent,"",c)];case 2:return o=e.sent(),this.view=o.sceneView,[3,5];case 3:return[4,Le(n,this.mapconfig,this.maplayers,this.mapwidgets,this.mapProxys,this.mapextent,"",c)];case 4:o=e.sent(),this.view=o.mapView,e.label=5;case 5:return this.initEvent(),[3,7];case 6:a.maptoken_front(this.mapconfig.fronttokenUrl,ie.tokenUser,ie.tokenPassword).then(function(t){return Oe(l,void 0,void 0,function(){var i;return Ne(this,function(e){switch(e.label){case 0:return this.maptoken=t.token,"3D"!==s?[3,2]:[4,ke(n,this.mapconfig,this.maplayers,this.mapwidgets,this.mapProxys,this.mapextent,this.maptoken,c)];case 1:return i=e.sent(),this.view=i.sceneView,[3,4];case 2:return[4,Le(n,this.mapconfig,this.maplayers,this.mapwidgets,this.mapProxys,this.mapextent,this.maptoken,c)];case 3:i=e.sent(),this.view=i.mapView,e.label=4;case 4:return this.initEvent(),[2]}})})}),e.label=7;case 7:return[2]}})})})}).catch(function(e){console.error(e)}),[2]})})},je.prototype.initEvent=function(){return Oe(this,void 0,void 0,function(){var t=this;return Ne(this,function(e){return we(["esri/core/watchUtils"]).then(function(e){var i=e[0];t.view.when(function(){i.whenTrueOnce(t.view,"ready",function(){t.emit(Ie.maploaded,t.view)}),i.whenTrue(t.view,"stationary",function(){if(t.view.extent){var e={xmin:t.view.extent.xmin.toFixed(6),ymin:t.view.extent.ymin.toFixed(6),xmax:t.view.extent.xmax.toFixed(6),ymax:t.view.extent.ymax.toFixed(6)};if("2D"===t.viewMode)t.emit(Ie.extentchanged,e);else{var i={xmin:t.view.extent.xmin.toFixed(6),ymin:t.view.extent.ymin.toFixed(6),xmax:t.view.extent.xmax.toFixed(6),ymax:t.view.extent.ymax.toFixed(6),zmin:t.view.extent.zmin,zmax:t.view.extent.zmax};t.emit(Ie.extentchanged,i)}t.view.center&&("2D"===t.viewMode?t.emit(Ie.centerchanged,{x:t.view.center.x.toFixed(6),y:t.view.center.y.toFixed(6)}):t.emit(Ie.centerchanged,{x:t.view.center.x.toFixed(6),y:t.view.center.y.toFixed(6),z:t.view.center.z})),t.view.zoom&&t.emit(Ie.zoomchanged,t.view.zoom)}}),t.view.popup.watch("visible",function(e){t.emit(Ie.popupvisible,e)}),t.view.on("blur",function(e){t.emit(Ie.blur,t.view,e)}),t.view.on("click",function(e){t.emit(Ie.click,t.view,e)}),t.view.on("double-click",function(e){t.emit(Ie.doubleclick,t.view,e)}),t.view.on("drag",function(e){t.emit(Ie.drag,t.view,e)}),t.view.on("focus",function(e){t.emit(Ie.focus,t.view,e)}),t.view.on("hold",function(e){t.emit(Ie.hold,t.view,e)}),t.view.on("key-down",function(e){t.emit(Ie.keydown,t.view,e)}),t.view.on("key-up",function(e){t.emit(Ie.keyup,t.view,e)}),t.view.on("mouse-wheel",function(e){t.emit(Ie.mousewheel,t.view,e)}),t.view.on("pointer-down",function(e){t.emit(Ie.pointerdown,t.view,e)}),t.view.on("pointer-enter",function(e){t.emit(Ie.pointerenter,t.view,e)}),t.view.on("pointer-leave",function(e){t.emit(Ie.pointerleave,t.view,e)}),t.view.on("pointer-move",function(e){t.emit(Ie.pointermove,t.view,e)}),t.view.on("pointer-up",function(e){t.emit(Ie.pointerup,t.view,e)}),t.view.on("resize",function(e){t.emit(Ie.resize,t.view,e)})})}),[2]})})},je);function je(e,i){void 0===i&&(i={});var t=Re.call(this)||this;return t.viewMode="2D",t.showBuildingBlock=!1,t.maptoken="",t.view=null,t.mapControl=[],t.mapoverlayers=[],t.mapoverlayersflayer=[],t.watchHandles=[],t.viewMode=void 0===i.viewMode||"2D"===i.viewMode?"2D":"3D",t.zooms=void 0===i.zooms?[1,12]:i.zooms,t.showBuildingBlock=!!i.showBuildingBlock,t.init(e,t.viewMode,i),t}var De=function(e){this.type="text",this.color="white",this.visible=!0,this.size=12,this.weight="normal",this.angle=0,this.backgroundColor="red",this.borderLineColor="blue",this.borderLineSize=200,this.haloColor="yellow",this.haloSize=20,this.horizontalAlignment="right",this.verticalAlignment="top",this.kerning=!0,this.lineHeight=25,this.lineWidth=200,this.rotated=!1,this.xoffset=0,this.yoffset=0,this.zoffset=0,this.placement="above-right",this.maxScale=0,this.minScale=0,this.labelingInfo=null,this.text=void 0===e.text?"标注":e.text,this.color=void 0===e.color?"white":e.color,this.visible=void 0===e.visible||e.visible,this.size=void 0===e.size?12:e.size,this.weight=void 0===e.weight?"normal":e.weight,this.angle=void 0===e.angle?0:e.angle,this.backgroundColor=void 0===e.backgroundColor?"red":e.backgroundColor,this.borderLineColor=void 0===e.borderLineColor?"blue":e.borderLineColor,this.borderLineSize=void 0===e.borderLineSize?200:e.borderLineSize,this.haloColor=void 0===e.haloColor?"yellow":e.haloColor,this.haloSize=void 0===e.haloSize?0:e.haloSize,this.horizontalAlignment=void 0===e.horizontalAlignment?"right":e.horizontalAlignment,this.verticalAlignment=void 0===e.verticalAlignment?"top":e.verticalAlignment,this.kerning=void 0===e.kerning||e.kerning,this.lineHeight=void 0===e.lineHeight?25:e.lineHeight,this.lineWidth=void 0===e.lineWidth?200:e.lineWidth,this.rotated=void 0!==e.rotated&&e.rotated,this.xoffset=void 0===e.xoffset?0:e.xoffset,this.yoffset=void 0===e.yoffset?0:e.yoffset,this.zoffset=void 0===e.zoffset?0:e.zoffset,this.placement=void 0===e.placement?"center-right":e.placement,this.maxScale=void 0===e.maxScale?0:e.maxScale,this.minScale=void 0===e.minScale?0:e.minScale,this.labelingInfo=e.labelingInfo},He=(We.prototype.S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},We.prototype.get_uuid=function(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()},We);function We(){this.uuid=this.get_uuid()}function Be(e){this.uuid=(new He).uuid,this.label=void 0!==e.label?e.label:new De({visible:!1}),this.attributes=void 0===e.attributes?{}:e.attributes,this.type="element",this.renderer=e.renderer,this.elevationInfo=e.elevationInfo,this.symbol=e.symbol}var Fe,Je,Ve=((Fe=function(e,i){return(Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}Fe(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(Ue,Je=Be),Ue);function Ue(e){var i=Je.call(this,e)||this;return i.overlaytype="polygon",i.paths=e.paths,i.symboltype=void 0===e.symboltype?"simple":e.symboltype,i.fillColor=void 0===e.fillColor?"white":e.fillColor,i.style=void 0===e.style?"solid":e.style,i.strokeColor=void 0===e.strokeColor?"red":e.strokeColor,i.strokestyle=void 0===e.strokestyle?"solid":e.strokestyle,i.strokeWeight=void 0===e.strokeWeight?2:e.strokeWeight,i.url=void 0===e.url?"":e.url,i.picwidth=void 0===e.picwidth?20:e.picwidth,i.picheight=void 0===e.picheight?20:e.picheight,i}var Ze,Ge,qe=((Ze=function(e,i){return(Ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}Ze(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(Xe,Ge=Ve),Xe);function Xe(e){var i=Ge.call(this,e)||this;return i.overlaytype="circle",i.center=e.center,i.radius=e.radius,i.radiusUnit=void 0===e.radiusUnit?"meters":e.radiusUnit,i}function Ye(e){this.type="text",this.type=void 0===e.type?"cluster":e.type,this.clusterRadius=void 0===e.clusterRadius?100:e.clusterRadius,this.clusterConfig=void 0===e.clusterConfig?null:e.clusterConfig}function $e(e){this.size=e.size,this.image=e.image}var Ke,Qe,ei=((Ke=function(e,i){return(Ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}Ke(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(ii,Qe=Be),ii);function ii(e){var i=Qe.call(this,e)||this;return i.overlaytype="Marker",i.icon=e.icon,i.position=e.position,i}function ti(e,i){this.uuid=(new He).uuid,this.overlayers=e,this.type="group",this.overlaytype=void 0===i.overlaytype?"marker":i.overlaytype,this.datafiled=void 0===i.datafiled?[]:i.datafiled,this.style=void 0===i.style?[]:i.style,this.label=void 0===i.label?new De({visible:!1}):i.label,this.frreduction=void 0===i.frreduction?null:i.frreduction,this.renderer=void 0===i.renderer?null:i.renderer,this.elevationInfo=i.elevationInfo}var oi,li,ri=((oi=function(e,i){return(oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}oi(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)})(ai,li=Be),ai);function ai(e){var i=li.call(this,e)||this;return i.overlaytype="Polyline",i.path=e.path,i.cap=void 0===e.cap?"square":e.cap,i.strokeColor=void 0===e.strokeColor?"red":e.strokeColor,i.style=void 0===e.style?"solid":e.style,i.lineJoin=void 0===e.lineJoin?"round":e.lineJoin,i.width=void 0===e.width?5:e.width,i}return{load:we,Bounds:e,LayerListControl:P,PerformanceInfoControl:U,Zoom:Q,Home:I,Compass:x,Fullscreen:k,MeasureArea:j,MeasureLine:B,BasemapToggle:r,BMapGallery:f,BMapGalleryExpand:m,UndergroundSwitch:X,BIMFilterControl:c,Marker:ei,Circle:qe,Icon:$e,Size:function(e,i){this.width=e,this.height=i},Label:De,FeatureReduction:Ye,OverlayGroup:ti,LngLat:i,Polyline:ri,Polygon:Ve,MapEvent:Ie,Map:Te}});
//# sourceMappingURL=SMap.min.js.map

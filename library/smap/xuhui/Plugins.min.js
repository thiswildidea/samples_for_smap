!function (e, t) { "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.Plugins = t() }(this, function () { "use strict"; var e = (t.prototype._addListener = function (e, t, r) { if (this.emit("newListener", e, t), this.events.has(e)) { var i = this.events.get(e); r ? i.unshift(t) : i.push(t) } else this.events.set(e, [t]); var n = this.getMaxListeners(); if (0 < n && this.listenerCount(e) > n) { var o = new Error("Possible EventEmitter memory leak detected.\n         " + this.listenerCount(e) + " " + e.toString() + " listeners.\n         Use emitter.setMaxListeners() to increase limit"); o.name = "MaxListenersExceededWarning", console.warn(o) } return this }, t.prototype.addListener = function (e, t) { return this._addListener(e, t, !1) }, t.prototype.emit = function (e) { for (var t = [], r = 1; r < arguments.length; r++)t[r - 1] = arguments[r]; if (this.events.has(e)) { for (var i = 0, n = this.events.get(e).slice(); i < n.length; i++) { var o = n[i]; try { o.apply(this, t) } catch (e) { this.emit("error", e) } } return !0 } if ("error" === e) throw 0 < t.length ? t[0] : Error("Unhandled error."); return !1 }, t.prototype.eventNames = function () { return Array.from(this.events.keys()) }, t.prototype.getMaxListeners = function () { return this.maxListeners || t.defaultMaxListeners }, t.prototype.listenerCount = function (e) { return this.events.has(e) ? this.events.get(e).length : 0 }, t.prototype._listeners = function (e, t, r) { if (!e.events.has(t)) return []; var i = e.events.get(t); return r ? this.unwrapListeners(i) : i.slice(0) }, t.prototype.unwrapListeners = function (e) { for (var t = new Array(e.length), r = 0; r < e.length; r++)t[r] = e[r].listener || e[r]; return t }, t.prototype.listeners = function (e) { return this._listeners(this, e, !0) }, t.prototype.rawListeners = function (e) { return this._listeners(this, e, !1) }, t.prototype.off = function (e, t) { return this.removeListener(e, t) }, t.prototype.on = function (e, t) { return this.addListener(e, t) }, t.prototype.once = function (e, t) { var r = this.onceWrap(e, t); return this.on(e, r), this }, t.prototype.onceWrap = function (e, t) { function r() { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; this.context.removeListener(this.eventName, this.rawListener), this.listener.apply(this.context, e) } var i = { eventName: e, listener: t, rawListener: r, context: this }, n = r.bind(i); return (i.rawListener = n).listener = t, n }, t.prototype.prependListener = function (e, t) { return this._addListener(e, t, !0) }, t.prototype.prependOnceListener = function (e, t) { var r = this.onceWrap(e, t); return this.prependListener(e, r), this }, t.prototype.removeAllListeners = function (e) { var t = this; if (void 0 === this.events) return this; if (this.events.has(e)) { var r = this.events.get(e).slice(); this.events.delete(e); for (var i = 0, n = r; i < n.length; i++) { var o = n[i]; this.emit("removeListener", e, o) } } else this.eventNames().map(function (e) { t.removeAllListeners(e) }); return this }, t.prototype.removeListener = function (e, t) { if (this.events.has(e)) { var r = this.events.get(e); -1 !== r.indexOf(t) && (r.splice(r.indexOf(t), 1), this.emit("removeListener", e, t), 0 === r.length && this.events.delete(e)) } return this }, t.prototype.setMaxListeners = function (e) { return this.maxListeners = e, this }, t.defaultMaxListeners = 50, t); function t() { this.events = new Map } var d = (r.jsapi ="http://10.201.37.225:8080/smiapi/arcgis",r.jsapiversion4X="4.16",r);function r(){}var l=d.jsapiversion4X,n="next";function o(e){if(null===e&&(e=l),e.toString().toLowerCase()===n)return n;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function a(e){return void 0===e&&(e=l),d.jsapi+"/"+e+"/init.js"}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function u(e){return document.querySelector('link[href*="'+e+'"]')}function p(e){return!e||o(e)?function(e){void 0===e&&(e=l),null===e&&(e=l);var t=a(e),r=t.substring(0,t.indexOf("init.js")),i=o(e);return i===n||3!==i.major?r+"esri/themes/light/main.css":r+(i.minor<=10?"js/":"")+"esri/css/esri.css"}(e):e}function y(e,t){var r=p(e),i=u(r);if(i||c(i=s(r),t),4===function(e){null===e&&(e=l);var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}(e).major){var n=r.substring(0,r.indexOf("esri/themes/"))+"esri/themes/gis/css/gis.css",o=u(n);o||c(o=s(n),t)}return i}var B={Promise:"undefined"!=typeof window?window.Promise:void 0},i={};function f(e,t,r){var i,n,o,l;r&&(o=r,l=function(e){o(e.error||new Error("There was an error attempting to load "+n.src)),n.removeEventListener("error",l,!1)},(n=e).addEventListener("error",l,!1),i=l);var a=function(){t(e),e.removeEventListener("load",a,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",a,!1)}function h(){return document.querySelector("script[data-shsmi]")}function v(){var e=window.require;return e&&e.on}function b(e){void 0===e&&(e={});var s={};[i,e].forEach(function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])});var c=s.version,u=s.url||a(c);return new B.Promise(function(e,t){var r,i,n=h();if(n){var o=n.getAttribute("src");o!==u?t(new Error("The ArcGIS API for JavaScript is already loaded ("+o+").")):v()?e(n):f(n,e,t)}else if(v())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=s.css;if(l)y(!0===l?c:l,s.insertCssBefore);else y(null,s.insertCssBefore);if(s.dojoConfig)window.dojoConfig=s.dojoConfig;else{var a={async:!0,packages:[{location:d.jsapi+"/extensions",name:"82B44794-5CE0-A64A-9047F07CAF08BD2C"},{location:d.jsapi+"/extensions/geolocation",name:"geolocate",main:"geolocate"}],deps:["@dojo/framework/shim/main"],has:{"esri-promise-compatibility":1,"esri-featurelayer-webgl":1}};window.dojoConfig=a}r=u,(i=document.createElement("script")).type="text/javascript",i.src=r,i.setAttribute("data-shsmi","loading"),f(n=i,function(){n.setAttribute("data-shsmi","loaded"),e(n)},t),document.head.appendChild(n)}})}function m(t){return new B.Promise(function(r,e){var i=window.require.on("error",e);window.require(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.remove(),r(e)})})}function P(e,t){if(void 0===t&&(t={}),v())return m(e);var r=h(),i=r&&r.getAttribute("src");return!t.url&&i&&(t.url=i),b(t).then(function(){return m(e)})}var x=(w.prototype.S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},w.prototype.get_uuid=function(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()},w);function w(){this.uuid=this.get_uuid()}var g,L,C=(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),R=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},k=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},A=(C(z,L=e),z.prototype.add=function(n){var o=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/A60907A5-C7CC-FC45-C83A29B58E3F5EB6","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=new t(o.view,n.lineStrings,n.options);o.arcLineRendererArray.push([(new x).uuid,i]),r.add(o.view,i)}).catch(function(e){console.error(e)})},z.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.arcLineRendererArray.map(function(e){t.remove(r.view,e[1])})})},z.prototype.setaltitude=function(t){this.arcLineRendererArray&&this.arcLineRendererArray.map(function(e){e[1].setaltitude(t)})},z.prototype.init=function(t){return R(this,void 0,void 0,function(){return k(this,function(e){return this.view=t,[2]})})},z);function z(e){var t=L.call(this)||this;return t.arcLineRendererArray=[],t.view=null,t.init(e),t}var S,F,I=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),E=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},_=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},O=(I(M,F=e),M.prototype.add=function(n){var o=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/45F857C8-303E-9546-9A173A5DACF5B67D","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=new t(o.view,n.lineStrings,n.options);o.arcLineRendererArray.push([(new x).uuid,i]),r.add(o.view,i)}).catch(function(e){console.error(e)})},M.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.arcLineRendererArray.map(function(e){t.remove(r.view,e[1])})})},M.prototype.setaltitude=function(t){this.arcLineRendererArray&&this.arcLineRendererArray.map(function(e){e[1].setaltitude(t)})},M.prototype.init=function(t){return E(this,void 0,void 0,function(){return _(this,function(e){return this.view=t,[2]})})},M);function M(e){var t=F.call(this)||this;return t.arcLineRendererArray=[],t.view=null,t.init(e),t}var j,W,D=(j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),T=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Z=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},G=(D(H,W=e),H.prototype.add=function(n){var o=this;void 0===n&&(n={}),P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/6EB9F731-BBCF-C348-D5F8B690E99E091A","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=new t(o.view,n.center,n.radius,n.height,n.textureurl);r.add(o.view,i),o.auroraRendererArray.push([(new x).uuid,i])}).catch(function(e){console.error(e)})},H.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.auroraRendererArray.map(function(e){t.remove(r.view,e[1])}),r.auroraRendererArray=[]})},H.prototype.init=function(t){return T(this,void 0,void 0,function(){return Z(this,function(e){return this.view=t,[2]})})},H);function H(e){var t=W.call(this)||this;return t.auroraRendererArray=[],t.view=null,t.init(e),t}var q=(J.maploaded="maploaded",J.zoomchanged="zoomchanged",J.extentchanged="extentchanged",J.centerchanged="centerchanged",J.blur="blur",J.click="click",J.doubleclick="doubleclick",J.drag="drag",J.focus="focus",J.hold="hold",J.keydown="key-down",J.keyup="key-up",J.mousewheel="mouse-wheel",J.pointerdown="pointer-down",J.pointerenter="pointer-enter",J.pointerleave="pointer-leave",J.pointermove="pointer-move",J.pointerup="pointer-up",J.resize="pointer-up",J.popupvisible="popup-visible",J);function J(){}var X,Y,U=(X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),N=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},V=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},$=(U(Q,Y=e),Q.prototype.add=function(l){var a=this;void 0===l&&(l={}),P(["esri/layers/GraphicsLayer","esri/Graphic","esri/layers/FeatureLayer"]).then(function(e){var t=e[0],n=e[1],r=e[2];if(a.view){var i=null;if(l.boundaryType&&(i=a.view.map.findLayerById(l.boundaryType)),i||l.url&&(i=new r({url:l.url,id:l.boundaryType,title:l.boundaryType,visible:!1}),a.view.map.add(i)),i){var o=i.createQuery();o.where=l.boundaryDefinition,i.queryFeatures(o).then(function(e){if(0<e.features.length){var r,i=a.view.map.findLayerById(a.displayedLayerid);void 0===i&&(i=new t({title:a.displayedLayerid+"边界",id:a.displayedLayerid,listMode:"hide"}),a.view.map.add(i)),r=void 0!==l.symbol?l.symbol:{type:"simple-fill",color:[255,255,255,0],outline:{color:[255,255,0,1],width:"5px"}},e.features.map(function(e){var t=new n({geometry:e.geometry,symbol:r,attributes:e.attributes});i.add(t)})}})}}}).catch(function(e){console.error(e)})},Q.prototype.remove=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&this.view.map.remove(e)},Q.prototype.show=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!0)},Q.prototype.hide=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!1)},Q.prototype.init=function(t){return N(this,void 0,void 0,function(){var i=this;return V(this,function(e){return this.displayedLayerid=(new x).uuid,this.view=t,this.view.on(q.click,function(r){i.view.hitTest(r).then(function(t){return N(i,void 0,void 0,function(){return V(this,function(e){return 0<t.results.length&&t.results[0].graphic.layer.id===this.displayedLayerid&&this.emit(q.click,t.results[0].graphic,r.mapPoint),[2]})})})}),this.view.on(q.pointermove,function(r){i.view.hitTest(r).then(function(t){return N(i,void 0,void 0,function(){return V(this,function(e){return 0<t.results.length&&t.results[0].graphic.layer.id===this.displayedLayerid&&this.emit(q.pointermove,t.results[0].graphic,r.mapPoint),[2]})})})}),[2]})})},Q);function Q(e){var t=Y.call(this)||this;return t.displayedLayerid="",t.view=null,t.init(e),t}var K,ee,te=(K=function(e,t){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}K(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),re=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},ie=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ne=(te(oe,ee=e),oe.prototype.add=function(n){var o=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/2F6637EA-8119-A957-B8685F98373F16C0","esri/views/3d/externalRenderers"]).then(function(e){var r=e[0],i=e[1];n.points.forEach(function(e){var t=new r(o.view,e,n.options);i.add(o.view,t),o.cloudRendererRendererArray.push([(new x).uuid,t])})}).catch(function(e){console.error(e)})},oe.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.cloudRendererRendererArray.map(function(e){t.remove(r.view,e[1])})})},oe.prototype.init=function(t){return re(this,void 0,void 0,function(){return ie(this,function(e){return this.view=t,[2]})})},oe);function oe(e){var t=ee.call(this)||this;return t.cloudRendererRendererArray=[],t.view=null,t.init(e),t}var le,ae,se=((le=function(e,t){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}le(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ce,ae=e),ce.prototype.add=function(o){var l=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/Mesh","82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/Extrusion","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=e[2],n=o.config;n.data=o.datas,l.mode=o.mode,n.mode=l.mode,n.slice=l.slice,n.stack=l.stack,"mesh"===l.mode?(n.height=1e3,l.contourMapLayerRenderer=new t(l.view,n)):(n.height=3e3,l.contourMapLayerRenderer=new r(l.view,n)),i.add(l.view,l.contourMapLayerRenderer)})},ce.prototype.remove=function(e){var t=this;P(["esri/views/3d/externalRenderers"]).then(function(e){e[0].remove(t.view,t.contourMapLayerRenderer)})},ce.prototype.init=function(e){this.view=e},ce);function ce(e){var t=ae.call(this)||this;return t.contourMapLayerRendererArray=[],t.contourMapLayerRenderer=null,t.mode="mesh",t.slice=0,t.stack=0,t.view=null,t.init(e),t}var ue,de,pe=(ue=function(e,t){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ue(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ye=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},fe=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},he=(pe(ve,de=e),ve.prototype.add=function(n){var o=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/FE81CC3A-24C4-EDC0-7922F5CE22CD1E23","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=new t(o.view,n.lineStrings,n.options);o.arcLineRendererArray.push([(new x).uuid,i]),r.add(o.view,i)}).catch(function(e){console.error(e)})},ve.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.arcLineRendererArray.map(function(e){t.remove(r.view,e[1])})})},ve.prototype.setaltitude=function(t){this.arcLineRendererArray&&this.arcLineRendererArray.map(function(e){e[1].setaltitude(t)})},ve.prototype.init=function(t){return ye(this,void 0,void 0,function(){return fe(this,function(e){return this.view=t,[2]})})},ve);function ve(e){var t=de.call(this)||this;return t.arcLineRendererArray=[],t.view=null,t.init(e),t}var be,me,we=(be=function(e,t){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}be(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ge=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},xe=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Le=(we(Ce,me=e),Ce.prototype.drawcircle=function(){var d=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Point","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],l=e[1],r=e[2],a=e[3],s=e[4];d.emit("drawbegin","circle"),d.drawtool=new t({view:d.view}),d.drawtool.reset();var c=d.view.map.findLayerById(d.displayedLayerid);null==c&&(c=new r({id:d.displayedLayerid,title:"绘制结果显示层",listMode:"hide"}),d.view.map.add(c));var i=(new x).uuid,u=d.view.map.findLayerById(i);u||(u=new r({id:d.displayedLayerid,title:"绘制圆实时追踪显示层",listMode:"hide"}),d.view.map.add(u));var n=d.drawtool.create("circle",{mode:"click"});d.view.focus(),n.on("vertex-add",function(e){if(2===e.vertices.length){u.removeAll();var t=new a({x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:d.view.spatialReference}),r=new a({x:e.vertices[1][0],y:e.vertices[1][1],spatialReference:d.view.spatialReference}),i=s.distance(t,r,"meters"),n=s.buffer(t,i,"meters"),o=new l({geometry:n,symbol:d.polygonsymbol});u.add(o)}}),n.on("vertex-remove",function(e){console.log(e)}),n.on("cursor-update",function(e){if(2===e.vertices.length){u.removeAll();var t=new a({x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:d.view.spatialReference}),r=new a({x:e.vertices[1][0],y:e.vertices[1][1],spatialReference:d.view.spatialReference}),i=s.distance(t,r,"meters"),n=s.buffer(t,i,"meters"),o=new l({geometry:n,symbol:d.polygonsymbol});u.add(o)}}),n.on("redo",function(e){console.log(e)}),n.on("undo",function(e){console.log(e)}),n.on("draw-complete",function(e){if(2===e.vertices.length){var t=new a({x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:d.view.spatialReference}),r=new a({x:e.vertices[1][0],y:e.vertices[1][1],spatialReference:d.view.spatialReference}),i=s.distance(t,r,"meters"),n=s.buffer(t,i,"meters"),o=new l({geometry:n,symbol:d.polygonsymbol});d.view.map.remove(u),c.add(o),d.emit("drawcomplete",o,"circle")}})})},Ce.prototype.drawrectangle=function(){var d=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Polygon"]).then(function(e){var t=e[0],a=e[1],r=e[2],s=e[3];d.emit("drawbegin","rectangle"),d.drawtool=new t({view:d.view}),d.drawtool.reset();var c=d.view.map.findLayerById(d.displayedLayerid);c||(c=new r({id:d.displayedLayerid,title:"绘制结果显示层",listMode:"hide"}),d.view.map.add(c));var i=(new x).uuid,u=d.view.map.findLayerById(i);null==u&&(u=new r({id:d.displayedLayerid,title:"绘制矩形追踪实时显示层",listMode:"hide"}),d.view.map.add(u));var n=d.drawtool.create("rectangle",{mode:"click"});d.view.focus(),n.on("vertex-add",function(e){if(2===e.vertices.length){u.removeAll();var t=e.vertices[0][0]>e.vertices[1][0]?e.vertices[1][0]:e.vertices[0][0],r=e.vertices[0][1]>e.vertices[1][1]?e.vertices[1][1]:e.vertices[0][1],i=e.vertices[0][0]>e.vertices[1][0]?e.vertices[0][0]:e.vertices[1][0],n=e.vertices[0][1]>e.vertices[1][1]?e.vertices[0][1]:e.vertices[1][1],o=new s({hasZ:!0,hasM:!0,rings:[[[t,r],[i,r],[i,n],[t,n],[t,r]]],spatialReference:d.view.spatialReference}),l=new a({geometry:o,symbol:d.polygonsymbol});u.add(l)}}),n.on("vertex-remove",function(e){console.log(e)}),n.on("cursor-update",function(e){if(2===e.vertices.length){u.removeAll();var t=e.vertices[0][0]>e.vertices[1][0]?e.vertices[1][0]:e.vertices[0][0],r=e.vertices[0][1]>e.vertices[1][1]?e.vertices[1][1]:e.vertices[0][1],i=e.vertices[0][0]>e.vertices[1][0]?e.vertices[0][0]:e.vertices[1][0],n=e.vertices[0][1]>e.vertices[1][1]?e.vertices[0][1]:e.vertices[1][1],o=new s({hasZ:!0,hasM:!0,rings:[[[t,r],[i,r],[i,n],[t,n],[t,r]]],spatialReference:d.view.spatialReference}),l=new a({geometry:o,symbol:d.polygonsymbol});u.add(l)}}),n.on("redo",function(e){console.log(e)}),n.on("undo",function(e){console.log(e)}),n.on("draw-complete",function(e){if(2===e.vertices.length){var t=e.vertices[0][0]>e.vertices[1][0]?e.vertices[1][0]:e.vertices[0][0],r=e.vertices[0][1]>e.vertices[1][1]?e.vertices[1][1]:e.vertices[0][1],i=e.vertices[0][0]>e.vertices[1][0]?e.vertices[0][0]:e.vertices[1][0],n=e.vertices[0][1]>e.vertices[1][1]?e.vertices[0][1]:e.vertices[1][1],o=new s({hasZ:!0,hasM:!0,rings:[[[t,r],[i,r],[i,n],[t,n],[t,r]]],spatialReference:d.view.spatialReference}),l=new a({geometry:o,symbol:d.polygonsymbol});d.view.map.remove(u),c.add(l),d.emit("drawcomplete",l,"rectangle")}})})},Ce.prototype.drawPoint=function(){var s=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer"]).then(function(e){var t=e[0],i=e[1],r=e[2];s.emit("drawbegin","point"),s.drawtool=new t({view:s.view}),s.drawtool.reset();var n=s.view.map.findLayerById(s.displayedLayerid);n||(n=new r({id:s.displayedLayerid,title:"绘制结果显示层",listMode:"hide"}),s.view.map.add(n));var o=(new x).uuid,l=s.view.map.findLayerById(o);null==l&&(l=new r({id:s.displayedLayerid,title:"绘制点移动实时追踪显示层",listMode:"hide"}),s.view.map.add(l));var a=s.drawtool.create("point",{mode:"click"});s.view.focus(),a.on("vertex-add",function(e){console.log(e)}),a.on("vertex-remove",function(e){console.log(e)}),a.on("cursor-update",function(e){l.removeAll();var t={type:"point",x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:s.view.spatialReference},r=new i({geometry:t,symbol:s.marksymbol});l.add(r)}),a.on("redo",function(e){console.log(e)}),a.on("undo",function(e){console.log(e)}),a.on("draw-complete",function(e){var t={type:"point",x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:s.view.spatialReference},r=new i({geometry:t,symbol:s.marksymbol});s.view.map.remove(l),n.add(r),s.emit("drawcomplete",r,"point")})})},Ce.prototype.drawMultipoint=function(){var u=this;P(["esri/views/draw/Draw","esri/views/draw/PointDrawAction","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Polygon","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],n=(e[1],e[2]),r=e[3];e[4],e[5],u.emit("drawbegin","multipoint"),u.drawtool=new t({view:u.view}),u.drawtool.reset();var o=u.view.map.findLayerById(u.displayedLayerid);o||(o=new r({id:u.displayedLayerid,title:"绘制结果显示层",listMode:"hide"}),u.view.map.add(o));var i=(new x).uuid,l=u.view.map.findLayerById(i);null==l&&(l=new r({id:u.displayedLayerid,title:"绘制多点临时显示层",listMode:"hide"}),u.view.map.add(l));var a=(new x).uuid,s=u.view.map.findLayerById(a);null==s&&(s=new r({id:u.displayedLayerid,title:"绘制多点移动追踪显示层",listMode:"hide"}),u.view.map.add(s));var c=u.drawtool.create("multipoint",{mode:"click"});u.view.focus(),c.on("vertex-add",function(e){l.removeAll(),e.vertices.map(function(e){var t={type:"point",x:e[0],y:e[1],spatialReference:u.view.spatialReference},r=new n({geometry:t,symbol:u.marksymbol});l.add(r)})}),c.on("vertex-remove",function(e){console.log(e)}),c.on("cursor-update",function(e){s.removeAll(),e.vertices.map(function(e){var t={type:"point",x:e[0],y:e[1],spatialReference:u.view.spatialReference},r=new n({geometry:t,symbol:u.marksymbol});s.add(r)})}),c.on("redo",function(e){console.log(e)}),c.on("undo",function(e){console.log(e)}),c.on("draw-complete",function(e){var i=[];e.vertices.map(function(e){var t={type:"point",x:e[0],y:e[1],spatialReference:u.view.spatialReference},r=new n({geometry:t,symbol:u.marksymbol});i.push(r),o.add(r)}),u.view.map.remove(l),u.view.map.remove(s),u.emit("drawcomplete",i,"multipoint")})})},Ce.prototype.drawPolyline=function(){var u=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],l=e[1],r=e[2],a=e[3];u.emit("drawbegin","polyline"),u.drawtool=new t({view:u.view}),u.drawtool.reset();var s=u.view.map.findLayerById(u.displayedLayerid);s||(s=new r({id:u.displayedLayerid,title:"绘制结果显示层",listMode:"hide"}),u.view.map.add(s));var i=(new x).uuid,c=u.view.map.findLayerById(i);null==c&&(c=new r({id:u.displayedLayerid,title:"绘制线实时追踪显示层",listMode:"hide"}),u.view.map.add(c));var n=u.drawtool.create("polyline");u.view.focus(),n.on(["vertex-add","vertex-remove","cursor-update","redo","undo"],function(e){if(1<e.vertices.length){var t=e.vertices;c.removeAll();var r=new l({geometry:{type:"polyline",paths:t,spatialReference:u.view.spatialReference},symbol:u.polylinesymbol}),i=function(e){var t=e.clone(),r=t.removePoint(0,t.paths[0].length-1),i=t.getPoint(0,t.paths[0].length-1);return{type:"polyline",spatialReference:u.view.spatialReference,hasZ:!1,paths:[[[i.x,i.y],[r.x,r.y]]]}};if(function(e){if(!(e.paths[0].length<3)){var t=e.clone(),r=i(e);return t.removePoint(0,t.paths[0].length-1),a.crosses(r,t)}}(r.geometry)){var n=new l({geometry:i(r.geometry),symbol:u.polylinesymbol});n&&c.addMany([r,n]),n&&e.preventDefault()}else c.add(r)}}),n.on("draw-complete",function(e){if(1<e.vertices.length){var t=e.vertices;c.removeAll();var r=new l({geometry:{type:"polyline",paths:t,spatialReference:u.view.spatialReference},symbol:u.polylinesymbol}),i=function(e){var t=e.clone(),r=t.removePoint(0,t.paths[0].length-1),i=t.getPoint(0,t.paths[0].length-1);return{type:"polyline",spatialReference:u.view.spatialReference,hasZ:!1,paths:[[[i.x,i.y],[r.x,r.y]]]}},n=null;if(function(e){if(!(e.paths[0].length<3)){var t=e.clone(),r=i(e);return t.removePoint(0,t.paths[0].length-1),a.crosses(r,t)}}(r.geometry)){var o=new l({geometry:i(r.geometry),symbol:u.polylinesymbol});o&&(s.addMany([r,o]),n=new l({geometry:a.union(r.geometry,o.geometry),symbol:u.polylinesymbol})),o&&e.preventDefault()}else n=r,s.add(r);u.view.map.remove(c),u.emit("drawcomplete",n,"polyline")}})})},Ce.prototype.drawPolygon=function(){var s=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],n=e[1],r=e[2];e[3],s.emit("drawbegin","polygon"),s.drawtool=new t({view:s.view}),s.drawtool.reset();var o=s.view.map.findLayerById(s.displayedLayerid);o||(o=new r({id:s.displayedLayerid,title:"绘制结果显示层",listMode:"hide"}),s.view.map.add(o));var i=(new x).uuid,l=s.view.map.findLayerById(i);null==l&&(l=new r({id:s.displayedLayerid,title:"绘制多边形实时追踪显示层",listMode:"hide"}),s.view.map.add(l));var a=s.drawtool.create("polygon");s.view.focus(),a.on(["vertex-add","vertex-remove","cursor-update","redo","undo"],function(e){var t=e.vertices;l.removeAll();var r={type:"polygon",rings:t,spatialReference:s.view.spatialReference},i=new n({geometry:r,symbol:s.polygonsymbol});l.add(i)}),a.on("draw-complete",function(e){var t=e.vertices;l.removeAll();var r={type:"polygon",rings:t,spatialReference:s.view.spatialReference},i=new n({geometry:r,symbol:s.polygonsymbol});s.view.map.remove(l),o.add(i),s.emit("drawcomplete",i,"polygon")})})},Ce.prototype.reset=function(){this.drawtool&&this.drawtool.reset()},Ce.prototype.clean=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&this.view.map.remove(e)},Ce.prototype.show=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!0)},Ce.prototype.hide=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!1)},Ce.prototype.init=function(r){return ge(this,void 0,void 0,function(){var t=this;return xe(this,function(e){return this.displayedLayerid=(new x).uuid,this.view=r,"2d"===this.view.type?(this.polygonsymbol={type:"simple-fill",color:[255,255,255,.6],style:"solid",outline:{color:[255,255,0,.8],width:2}},this.polylinesymbol={type:"simple-line",color:[255,255,255,.6],width:"4px",style:"solid"},this.marksymbol={type:"simple-marker",style:"circle",color:[255,255,0,.6],size:"24px",outline:{color:[255,255,0,.8],width:2}}):(this.polygonsymbol={type:"polygon-3d",symbolLayers:[{type:"extrude",castShadows:!1,size:100,material:{color:[255,255,255,.4]},edges:{type:"solid",color:[50,50,50,.5]}}]},this.polylinesymbol={type:"line-3d",symbolLayers:[{type:"path",anchor:"center",Values:"center",profile:"quad",width:2,height:10,material:{color:[255,255,255,.4]},cap:"square",join:"miter",castShadows:!1,profileRotation:"heading"}]},this.marksymbol={type:"point-3d",symbolLayers:[{type:"object",width:20,height:20,depth:20,resource:{primitive:"sphere"},material:{color:[0,0,255,.8]}}],verticalOffset:{screenLength:60,maxWorldLength:1e3,minWorldLength:20},callout:{type:"line",size:1.5,color:"white",border:{color:"black"}}}),this.view.on(q.click,function(e){t.view.hitTest(e).then(function(e){return ge(t,void 0,void 0,function(){return xe(this,function(e){return[2]})})})}),this.view.on(q.pointermove,function(e){t.view.hitTest(e).then(function(e){return ge(t,void 0,void 0,function(){return xe(this,function(e){return[2]})})})}),[2]})})},Ce);function Ce(e){var t=me.call(this)||this;return t.marksymbol=null,t.polylinesymbol=null,t.polygonsymbol=null,t.displayedLayerid="",t.view=null,t.drawtool=null,t.drawlayerscollection=[],t.init(e),t}var Re,ke,Ae=(Re=function(e,t){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Re(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ze=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Se=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Fe=(Ae(Ie,ke=e),Ie.prototype.add=function(n){var o=this;void 0===n&&(n={}),P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/82B44794-5CE0-A64A-9047F07CAF08BD2C","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=new t(o.view,n.center,n.radius,n.height,n.textureurl,n.scale);r.add(o.view,i),o.dynamicCylinderfenceRendererArray.push([(new x).uuid,i])}).catch(function(e){console.error(e)})},Ie.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.dynamicCylinderfenceRendererArray.map(function(e){t.remove(r.view,e[1])}),r.dynamicCylinderfenceRendererArray=[]})},Ie.prototype.init=function(t){return ze(this,void 0,void 0,function(){return Se(this,function(e){return this.view=t,[2]})})},Ie);function Ie(e){var t=ke.call(this)||this;return t.dynamicCylinderfenceRendererArray=[],t.view=null,t.init(e),t}var Ee,_e,Be=(Ee=function(e,t){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Ee(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Pe=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Oe=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Me=(Be(je,_e=e),je.prototype.add=function(n){var o=this;void 0===n&&(n={}),P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/95CEAB7E-A2ED-576F-64F0B53B2C6A134F","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1];if(n.points&&n.texturestart&&n.texturestarend&&n.height){n.view=o.view;var i=new t(n);r.add(o.view,i),o.dynamicPolygonRendererArray.push([(new x).uuid,i])}}).catch(function(e){console.error(e)})},je.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.dynamicPolygonRendererArray.map(function(e){t.remove(r.view,e[1])}),r.dynamicPolygonRendererArray=[]})},je.prototype.init=function(t){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){return this.view=t,[2]})})},je);function je(e){var t=_e.call(this)||this;return t.dynamicPolygonRendererArray=[],t.view=null,t.init(e),t}var We,De,Te=(We=function(e,t){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}We(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ze=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Ge=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},He=(Te(qe,De=e),qe.prototype.add=function(n){var o=this;void 0===n&&(n={}),P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/789A68E1-657F-D870-37F9E6DF554E1C27","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=new t(o.view,n.center,n.radius,n.height,n.textureurl,n.scale);r.add(o.view,i),o.dynamicSquarefenceRendererArray.push([(new x).uuid,i])}).catch(function(e){console.error(e)})},qe.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.dynamicSquarefenceRendererArray.map(function(e){t.remove(r.view,e[1])}),r.dynamicSquarefenceRendererArray=[]})},qe.prototype.init=function(t){return Ze(this,void 0,void 0,function(){return Ge(this,function(e){return this.view=t,[2]})})},qe);function qe(e){var t=De.call(this)||this;return t.dynamicSquarefenceRendererArray=[],t.view=null,t.init(e),t}var Je,Xe,Ye=(Je=function(e,t){return(Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Je(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ue=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Ne=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ve=(Ye($e,Xe=e),$e.prototype.add=function(l){var a=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/599EFB79-18C9-DC0A-E2C9FC2F2316C660"]).then(function(e){var t=e[0],r=document.getElementsByClassName("esri-view-surface")[0],i=document.getElementById(a.displayedLayerid);null!==i&&r.removeChild(i);var n=[];a.datas=l.datas,l.datas.forEach(function(e,t){n.push({name:"Top10",type:"effectScatter",coordinateSystem:"arcgis",zlevel:2,showEffectOn:"render",rippleEffect:{brushType:"stroke"},legendHoverLink:!0,hoverAnimation:!0,symbol:null==e.symbol||void 0===e.symbol?"diamond":e.symbol,cursor:"pointer",label:{normal:{show:!0,position:null==e.labelposition||void 0===e.labelposition?"right":e.labelposition,formatter:"{b}"}},tooltip:{padding:10,backgroundColor:"#222",borderColor:"#777",borderWidth:1},symbolSize:function(e){return e[2]/8},itemStyle:{normal:{color:e.color,shadowBlur:10,shadowColor:"#333"}},data:[{name:e.name,value:[e.x,e.y].concat([e.value])}]})});var o={title:{text:"",subtext:"",left:"center",textStyle:{color:"#fff"}},series:n};new t(a.view,"",a.displayedLayerid).setChartOption(o)})},$e.prototype.update=function(l){var a=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/599EFB79-18C9-DC0A-E2C9FC2F2316C660"]).then(function(e){var t=e[0],r=document.getElementsByClassName("esri-view-surface")[0],i=document.getElementById(a.displayedLayerid);null!==i&&r.removeChild(i);var n=[];a.datas=l.datas,l.datas.forEach(function(e,t){n.push({name:"Top10",type:"effectScatter",coordinateSystem:"arcgis",zlevel:2,showEffectOn:"render",rippleEffect:{brushType:"stroke"},legendHoverLink:!0,hoverAnimation:!0,symbol:null==e.symbol||void 0===e.symbol?"diamond":e.symbol,cursor:"pointer",label:{normal:{show:!0,position:null==e.labelposition||void 0===e.labelposition?"right":e.labelposition,formatter:"{b}"}},tooltip:{padding:10,backgroundColor:"#222",borderColor:"#777",borderWidth:1},symbolSize:function(e){return e[2]/8},itemStyle:{normal:{color:e.color,shadowBlur:10,shadowColor:"#333"}},data:[{name:e.name,value:[e.x,e.y].concat([e.value])}]})});var o={title:{text:"",subtext:"",left:"center",textStyle:{color:"#fff"}},series:n};new t(a.view,"",a.displayedLayerid).setChartOption(o)})},$e.prototype.delete=function(){var e=document.getElementsByClassName("esri-view-surface")[0],t=document.getElementById(this.displayedLayerid);null!==t&&e.removeChild(t)},$e.prototype.init=function(t){return Ue(this,void 0,void 0,function(){var s=this;return Ne(this,function(e){return this.view=t,this.displayedLayerid=(new x).uuid,P(["esri/geometry/Point","esri/geometry/SpatialReference","esri/geometry/support/webMercatorUtils"]).then(function(e){var l=e[0],a=e[1];e[2],s.view.on(q.click,function(i){if(s.datas.length){var r=s.datas.map(function(e){var t=new l({x:e.x,y:e.y,spatialReference:a.WebMercator}),r=s.view.toScreen(t);return Math.sqrt((r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y))}),n=0;r.forEach(function(e,t){e<r[n]&&(n=t)}),35<r[n]||s.emit(q.click,s.datas[n],i.mapPoint)}}),s.view.on(q.doubleclick,function(i){if(s.datas.length){var r=s.datas.map(function(e){var t=new l({x:e.x,y:e.y,spatialReference:a.WebMercator}),r=s.view.toScreen(t);return Math.sqrt((r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y))}),n=0;r.forEach(function(e,t){e<r[n]&&(n=t)}),35<r[n]||s.emit(q.doubleclick,s.datas[n],i.mapPoint)}}),s.view.on(q.pointermove,function(o){s.view.hitTest(o).then(function(t){return Ue(s,void 0,void 0,function(){var r,i,n=this;return Ne(this,function(e){if(0<t.results.length&&t.results[0].graphic.layer.id===this.displayedLayerid){if(!this.datas.length)return[2];if(r=this.datas.map(function(e){var t=new l({x:e.x,y:e.y,spatialReference:a.WebMercator}),r=n.view.toScreen(t);return Math.sqrt((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y))}),i=0,r.forEach(function(e,t){e<r[i]&&(i=t)}),35<r[i])return[2];this.emit(q.pointermove,this.datas[i],this.view.toMap({x:o.x,y:o.y}))}return[2]})})})})}),[2]})})},$e);function $e(e){var t=Xe.call(this)||this;return t.displayedLayerid="",t.view=null,t.datas=null,t.init(e),t}var Qe,Ke,et=(Qe=function(e,t){return(Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Qe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),tt=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},rt=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},it=(et(nt,Ke=e),nt.prototype.add=function(i){var n=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/FC5376C9-9F1D-905F-3BCD66C6DF4ED973","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1];i.options.fragmentShaderSource=n.fragmentShaderSource,n.electricShieldOptionsRenderer=new t(n.view,i.points,i.options),r.add(n.view,n.electricShieldOptionsRenderer)}).catch(function(e){console.error(e)})},nt.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.electricShieldOptionsRenderer&&t.remove(r.view,r.electricShieldOptionsRenderer)})},nt.prototype.setMaterialColor=function(e){this.electricShieldOptionsRenderer&&this.electricShieldOptionsRenderer.setMaterialColor(e)},nt.prototype.setwireframe=function(){this.electricShieldOptionsRenderer&&this.electricShieldOptionsRenderer.setwireframe()},nt.prototype.setaltitude=function(e){this.electricShieldOptionsRenderer&&this.electricShieldOptionsRenderer.setaltitude(e)},nt.prototype.setscaleZ=function(e){this.electricShieldOptionsRenderer&&this.electricShieldOptionsRenderer.setscaleZ(e)},nt.prototype.setopacity=function(e){this.electricShieldOptionsRenderer&&this.electricShieldOptionsRenderer.setopacity(e)},nt.prototype.init=function(t){return tt(this,void 0,void 0,function(){return rt(this,function(e){return this.view=t,[2]})})},nt);function nt(e){var t=Ke.call(this)||this;return t.electricShieldOptionsRenderer=null,t.view=null,t.fragmentShaderSource="\n                #if __VERSION__ == 100\n                 #extension GL_OES_standard_derivatives : enable\n                #endif\n                uniform vec3 color;\n                uniform float opacity;\n                uniform float time;\n                varying vec2 vUv;\n                #define pi 3.1415926535\n                #define PI2RAD 0.01745329252\n                #define TWO_PI (2. * PI)\n                float rands(float p){\n                    return fract(sin(p) * 10000.0);\n                }\n                float noise(vec2 p){\n                    float t = time / 20000.0;\n                    if(t > 1.0) t -= floor(t);\n                    return rands(p.x * 14. + p.y * sin(t) * 0.5);\n                }\n                vec2 sw(vec2 p){\n                    return vec2(floor(p.x), floor(p.y));\n                }\n                vec2 se(vec2 p){\n                    return vec2(ceil(p.x), floor(p.y));\n                }\n                vec2 nw(vec2 p){\n                    return vec2(floor(p.x), ceil(p.y));\n                }\n                vec2 ne(vec2 p){\n                    return vec2(ceil(p.x), ceil(p.y));\n                }\n                float smoothNoise(vec2 p){\n                    vec2 inter = smoothstep(0.0, 1.0, fract(p));\n                    float s = mix(noise(sw(p)), noise(se(p)), inter.x);\n                    float n = mix(noise(nw(p)), noise(ne(p)), inter.x);\n                    return mix(s, n, inter.y);\n                }\n                float fbm(vec2 p){\n                    float z = 2.0;\n                    float rz = 0.0;\n                    vec2 bp = p;\n                    for(float i = 1.0; i < 6.0; i++){\n                    rz += abs((smoothNoise(p) - 0.5)* 2.0) / z;\n                    z *= 2.0;\n                    p *= 2.0;\n                    }\n                    return rz;\n                }\n                void main() {\n                    vec2 uv = vUv;\n                    vec2 uv2 = vUv;\n                    if (uv.y < 0.5) {\n                    discard;\n                    }\n                    uv *= 4.;\n                    float rz = fbm(uv);\n                    uv /= exp(mod(time * 2.0, pi));\n                    rz *= pow(15., 0.9);\n                    gl_FragColor = mix(vec4(color, opacity) / rz, vec4(color, 0.1), 0.2);\n                    if (uv2.x < 0.05) {\n                    gl_FragColor = mix(vec4(color, 0.1), gl_FragColor, uv2.x / 0.05);\n                    }\n                    if (uv2.x > 0.95){\n                    gl_FragColor = mix(gl_FragColor, vec4(color, 0.1), (uv2.x - 0.95) / 0.05);\n                    }\n                }",t.init(e),t}var ot,lt,at=(ot=function(e,t){return(ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ot(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),st=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},ct=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ut=(at(dt,lt=e),dt.prototype.createFeatureGroup=function(_){return st(this,void 0,void 0,function(){var t,r,i,o,n,l,a,s,c,u,d,p,y,f,h,v,b,m,w,g,x,L,C,R,k,A,z,S,F,I,E=this;return ct(this,function(e){switch(e.label){case 0:return[4,P(["esri/layers/FeatureLayer","esri/layers/support/LabelClass","esri/Graphic","esri/geometry/Point","esri/geometry/Circle","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon"])];case 1:return t=e.sent(),r=t[0],i=t[1],o=t[2],n=t[3],l=t[4],t[5],a=t[6],s=t[7],(c=this.view.map.findLayerById(this.displayedLayerid))&&(this.view.map.remove(c),this.mapoverlayersflayer=[]),u=[],"group"===_.type?((d=[{name:"objectId",alias:"objectId",type:"oid"},{name:"uuid",alias:"唯一标识",type:"string"}]).push({name:"style",alias:"样式",type:"string"}),_.datafiled.forEach(function(e){d.push(e)}),"marker"===_.overlaytype.toLowerCase()?(_.renderer?p=_.renderer:(p={type:"unique-value",field:"style",uniqueValueInfos:[]},_.style.forEach(function(e){p.uniqueValueInfos.push({value:e.style,label:e.style,symbol:e.symbol})})),y=new r({id:this.displayedLayerid,title:"Overlayer-marker-"+this.displayedLayerid,visible:_.visible,objectIdField:"objectId",geometryType:"point",renderer:p,screenSizePerspectiveEnabled:"3d"===this.view.type,popupEnabled:!1,popupTemplate:!1,maxScale:_.maxScale,minScale:_.minScale,fields:d,source:[],spatialReference:this.view.spatialReference}),_.elevationInfo&&"3d"===this.view.type&&(y.elevationInfo=_.elevationInfo),_.frreduction&&("3d"===this.view.type?y.featureReduction={type:_.frreduction.type}:y.featureReduction=_.frreduction.clusterConfig),this.view.map.add(y),_.overlayers.forEach(function(e){if(e.attributes&&e.position){var t=e.attributes;t.uuid=e.uuid;var r=new o({geometry:new n({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:E.view.spatialReference}),attributes:t});y.source.add(r),u.push(r),E.mapoverlayersflayer.push([_.uuid,e.uuid,r])}}),100<y.source.items.length&&null!=_.frreduction&&(y.featureReduction={type:_.frreduction.type,clusterRadius:_.frreduction.clusterRadius}),_.label.visible&&(F=void 0,_.label.labelingInfo?(F=_.label.labelingInfo,y.labelingInfo=F):(F="2d"===this.view.type?{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:_.label.color},size:_.label.size,halo:{color:_.label.haloColor,size:_.label.haloSize}}]},I=new i({labelExpressionInfo:{expression:"$feature.NAME"},symbol:F,labelPlacement:_.label.placement,minScale:_.label.minScale,maxScale:_.label.maxScale}),y.labelingInfo=[I]))):"circle"===_.overlaytype.toLowerCase()?(_.renderer?p=_.renderer:(p={type:"unique-value",field:"style",uniqueValueInfos:[]},_.style.forEach(function(e){p.uniqueValueInfos.push({value:e.style,label:e.style,symbol:e.symbol})})),f=new r({id:this.displayedLayerid,title:"Overlayer-circle-"+this.displayedLayerid,visible:_.visible,objectIdField:"objectId",geometryType:"polygon",renderer:p,screenSizePerspectiveEnabled:"3d"===this.view.type,popupEnabled:!1,popupTemplate:!1,maxScale:_.maxScale,minScale:_.minScale,fields:d,source:[],spatialReference:this.view.spatialReference}),_.elevationInfo&&"3d"===this.view.type&&(f.elevationInfo=_.elevationInfo),this.view.map.add(f),_.overlayers.forEach(function(e){if(e.attributes&&e.center&&e.radius){var t=e.attributes;t.uuid=e.uuid;var r=new o({geometry:new l({center:new n({x:e.center.X,y:e.center.Y,z:e.center.Z,spatialReference:E.view.spatialReference}),radius:e.radius,radiusUnit:e.radiusUnit,spatialReference:E.view.spatialReference}),attributes:t});u.push(r),f.source.add(r),E.mapoverlayersflayer.push([_.uuid,e.uuid,r])}}),_.label.visible&&(F=void 0,_.label.labelingInfo?(F=_.label.labelingInfo,f.labelingInfo=F):(F="2d"===this.view.type?{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:_.label.color},size:_.label.size,halo:{color:_.label.haloColor,size:_.label.haloSize}}]},I=new i({labelExpressionInfo:{expression:"$feature.NAME"},symbol:F,labelPlacement:_.label.placement,minScale:_.label.minScale,maxScale:_.label.maxScale}),f.labelingInfo=[I]))):"polyline"===_.overlaytype.toLowerCase()?(_.renderer?p=_.renderer:(p={type:"unique-value",field:"style",uniqueValueInfos:[]},_.style.forEach(function(e){p.uniqueValueInfos.push({value:e.style,label:e.style,symbol:e.symbol})})),h=new r({id:this.displayedLayerid,title:"Overlayer-polyline-"+this.displayedLayerid,visible:_.visible,objectIdField:"objectId",geometryType:"polyline",renderer:p,popupEnabled:!1,popupTemplate:!1,maxScale:_.maxScale,minScale:_.minScale,fields:d,source:[],spatialReference:this.view.spatialReference}),_.elevationInfo&&"3d"===this.view.type&&(h.elevationInfo=_.elevationInfo),this.view.map.add(h),_.overlayers.forEach(function(e){if(e.attributes&&e.path){var t=e.attributes;t.uuid=e.uuid;var r=[];e.path.forEach(function(e){r.push([e.X,e.Y,e.Z])});var i=new a({hasZ:!1,hasM:!1,paths:r,spatialReference:E.view.spatialReference}),n=new o({geometry:i,attributes:t});u.push(n),h.source.add(n),E.mapoverlayersflayer.push([_.uuid,e.uuid,n])}}),_.label.visible&&(F=void 0,_.label.labelingInfo?(F=_.label.labelingInfo,h.labelingInfo=F):(F="2d"===this.view.type?{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:_.label.color},size:_.label.size,halo:{color:_.label.haloColor,size:_.label.haloSize}}]},I=new i({labelExpressionInfo:{expression:"$feature.NAME"},symbol:F,labelPlacement:_.label.placement,minScale:_.label.minScale,maxScale:_.label.maxScale}),h.labelingInfo=[I]))):"polygon"===_.overlaytype.toLowerCase()&&(_.renderer?p=_.renderer:(p={type:"unique-value",field:"style",uniqueValueInfos:[]},_.style.forEach(function(e){p.uniqueValueInfos.push({value:e.style,label:e.style,symbol:e.symbol})})),v=new r({id:this.displayedLayerid,title:"Overlayer-polygon-"+this.displayedLayerid,visible:_.visible,objectIdField:"objectId",geometryType:"polygon",renderer:p,maxScale:_.maxScale,minScale:_.minScale,popupEnabled:!1,popupTemplate:!1,fields:d,source:[],spatialReference:this.view.spatialReference}),_.elevationInfo&&"3d"===this.view.type&&(v.elevationInfo=_.elevationInfo),this.view.map.add(v),_.overlayers.forEach(function(e){if(e.attributes&&e.paths){var t=e.attributes;t.uuid=e.uuid;var r=[];e.paths.forEach(function(e){r.push([e.X,e.Y,e.Z])});var i=new s({hasZ:!0,hasM:!0,rings:r,spatialReference:E.view.spatialReference}),n=new o({geometry:i,attributes:t});u.push(n),v.source.add(n),E.mapoverlayersflayer.push([_.uuid,e.uuid,n])}}),_.label.visible&&(F=void 0,_.label.labelingInfo?(F=_.label.labelingInfo,v.labelingInfo=F):(F="2d"===this.view.type?{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:_.label.color},size:_.label.size,halo:{color:_.label.haloColor,size:_.label.haloSize}}]},I=new i({labelExpressionInfo:{expression:"$feature.NAME"},symbol:F,labelPlacement:_.label.placement,minScale:_.label.minScale,maxScale:_.label.maxScale}),v.labelingInfo=[I])))):"element"===_.type&&(b=[{name:"objectId",alias:"objectId",type:"oid"},{name:"uuid",alias:"唯一标识",type:"string"}],Object.keys(_.attributes).forEach(function(e){b.push({name:e,alias:e,type:"string"})}),"marker"===_.overlaytype.toLowerCase()?(m=void 0,m=_.renderer?_.renderer:"3d"===this.view.type?{type:"simple",symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:_.icon.size.width,resource:{href:_.icon.image}}]}}:{type:"simple",symbol:{type:"picture-marker",url:_.icon.image,width:_.icon.size.width,height:_.icon.size.height}},R=new r({id:this.displayedLayerid,title:"Overlayer-marker-"+this.displayedLayerid,visible:_.visible,objectIdField:"objectId",geometryType:"point",renderer:m,screenSizePerspectiveEnabled:!0,maxScale:_.maxScale,minScale:_.minScale,popupEnabled:!1,popupTemplate:!1,fields:b,source:[],spatialReference:this.view.spatialReference}),_.elevationInfo&&"3d"===this.view.type&&(R.elevationInfo=_.elevationInfo),_.position&&_.attributes&&((k=_.attributes).uuid=_.uuid,S=new o({geometry:new n({x:_.position[0],y:_.position[1],z:void 0===_.position[2]?0:_.position[2],spatialReference:this.view.spatialReference}),attributes:k}),u.push(S),R.source.add(S),this.mapoverlayersflayer.push([_.uuid,_.uuid,S])),this.view.map.add(R),_.label.visible&&(F=void 0,_.label.labelingInfo?(F=_.label.labelingInfo,R.labelingInfo=F):(F="2d"===this.view.type?{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:_.label.color},size:_.label.size,halo:{color:_.label.haloColor,size:_.label.haloSize}}]},I=new i({labelExpressionInfo:{expression:"$feature.NAME"},symbol:F,labelPlacement:_.label.placement,minScale:_.label.minScale,maxScale:_.label.maxScale}),R.labelingInfo=[I]))):"circle"===_.overlaytype.toLowerCase()?(w=void 0,w=_.renderer?_.renderer:"simple"===_.symboltype?{type:"simple",symbol:{type:"simple-fill",color:_.fillColor,style:_.style,outline:{color:_.strokeColor,width:_.strokeWeight,style:_.strokestyle}}}:{type:"picture-fill",url:_.url,width:_.picwidth,height:_.picheight,outline:{style:_.strokestyle,color:_.strokeColor,width:_.strokeWeight}},R=new r({id:this.displayedLayerid,title:"Overlayer-circle-"+this.displayedLayerid,objectIdField:"objectId",geometryType:"polygon",renderer:w,screenSizePerspectiveEnabled:!0,popupEnabled:!1,popupTemplate:!1,visible:_.visible,maxScale:_.maxScale,minScale:_.minScale,fields:b,source:[],spatialReference:this.view.spatialReference}),_.elevationInfo&&"3d"===this.view.type&&(R.elevationInfo=_.elevationInfo),_.center&&_.radius&&_.attributes&&((k=_.attributes).uuid=_.uuid,S=new o({geometry:new l({center:new n({x:_.center.X,y:_.center.Y,z:_.center.Z,spatialReference:this.view.spatialReference}),radius:_.radius,radiusUnit:_.radiusUnit,spatialReference:this.view.spatialReference}),attributes:k}),u.push(S),R.source.add(S),this.mapoverlayersflayer.push([_.uuid,_.uuid,S])),this.view.map.add(R),_.label.visible&&(F=void 0,_.label.labelingInfo?(F=_.label.labelingInfo,R.labelingInfo=F):(F="2d"===this.view.type?{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:_.label.color},size:_.label.size,halo:{color:_.label.haloColor,size:_.label.haloSize}}]},I=new i({labelExpressionInfo:{expression:"$feature.NAME"},symbol:F,labelPlacement:_.label.placement,minScale:_.label.minScale,maxScale:_.label.maxScale}),R.labelingInfo=[I]))):"polyline"===_.overlaytype.toLowerCase()?(g=void 0,_.renderer||(g="simple"===_.symboltype?{type:"simple",symbol:{type:"simple-line",color:_.strokeColor,style:_.style,width:_.width,cap:_.cap,join:_.lineJoin}}:_.renderer,R=new r({id:this.displayedLayerid,title:"Overlayer-polyline-"+this.displayedLayerid,objectIdField:"objectId",geometryType:"polyline",renderer:g,screenSizePerspectiveEnabled:!0,popupEnabled:!1,popupTemplate:!1,visible:_.visible,maxScale:_.maxScale,minScale:_.minScale,fields:b,source:[],spatialReference:this.view.spatialReference}),_.elevationInfo&&"3d"===this.view.type&&(R.elevationInfo=_.elevationInfo),_.path&&_.attributes&&((k=_.attributes).uuid=_.uuid,x=[],_.path.forEach(function(e){x.push([e.X,e.Y,e.Z])}),L=new a({hasZ:!1,hasM:!1,paths:x,spatialReference:this.view.spatialReference}),S=new o({geometry:L,attributes:k}),u.push(S),R.source.add(S),this.mapoverlayersflayer.push([_.uuid,_.uuid,S])),this.view.map.add(R),_.label.visible&&(F=void 0,_.label.labelingInfo?(F=_.label.labelingInfo,R.labelingInfo=F):(F="2d"===this.view.type?{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:_.label.color},size:_.label.size,halo:{color:_.label.haloColor,size:_.label.haloSize}}]},I=new i({labelExpressionInfo:{expression:"$feature.NAME"},symbol:F,labelPlacement:_.label.placement,minScale:_.label.minScale,maxScale:_.label.maxScale}),R.labelingInfo=[I])))):"polygon"===_.overlaytype.toLowerCase()&&(C=void 0,C=_.renderer?_.symbol:"simple"===_.symboltype?{type:"simple",symbol:{type:"simple-fill",color:_.fillColor,style:_.style,outline:{color:_.strokeColor,width:_.strokeWeight,style:_.strokestyle}}}:{type:"simple",symbol:{type:"picture-fill",url:_.url,width:_.picwidth,height:_.picheight,outline:{style:_.strokestyle,color:_.strokeColor,width:_.strokeWeight}}},R=new r({id:this.displayedLayerid,title:"Overlayer-polygon-"+this.displayedLayerid,objectIdField:"objectId",geometryType:"polygon",renderer:C,screenSizePerspectiveEnabled:!0,popupEnabled:!1,popupTemplate:!1,visible:_.visible,maxScale:_.maxScale,minScale:_.minScale,fields:b,source:[],spatialReference:this.view.spatialReference}),_.elevationInfo&&"3d"===this.view.type&&(R.elevationInfo=_.elevationInfo),_.paths&&_.attributes&&((k=_.attributes).uuid=_.uuid,A=[],_.paths.forEach(function(e){A.push([e.X,e.Y,e.Z])}),z=new s({hasZ:!0,hasM:!0,rings:A,spatialReference:this.view.spatialReference}),S=new o({geometry:z,attributes:k}),u.push(S),R.source.add(S),this.mapoverlayersflayer.push([_.uuid,_.uuid,S])),this.view.map.add(R),_.label.visible&&(F=void 0,_.label.labelingInfo?(F=_.label.labelingInfo,R.labelingInfo=F):(F="2d"===this.view.type?{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}}:{type:"label-3d",symbolLayers:[{type:"text",material:{color:_.label.color},size:_.label.size,halo:{color:_.label.haloColor,size:_.label.haloSize}}]},I=new i({labelExpressionInfo:{expression:"$feature.NAME"},symbol:F,labelPlacement:_.label.placement,minScale:_.label.minScale,maxScale:_.label.maxScale}),R.labelingInfo=[I])))),[2,new B.Promise(function(e,t){e(u)})]}})})},dt.prototype.addfeature=function(v){return st(this,void 0,void 0,function(){var t,a,s,c,u,d,r,p,i,n,o,l,y,f,h=this;return ct(this,function(e){switch(e.label){case 0:return[4,P(["esri/layers/FeatureLayer","esri/layers/support/LabelClass","esri/Graphic","esri/geometry/Point","esri/geometry/Circle","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon"])];case 1:return(t=e.sent())[0],t[1],a=t[2],s=t[3],c=t[4],t[5],u=t[6],d=t[7],(r=this.view.map.findLayerById(this.displayedLayerid))&&(p=[],v instanceof Array?(v.forEach(function(e){if("marker"===e.overlaytype.toLowerCase()){(n=e.attributes).uuid=e.uuid;var t=new a({geometry:new s({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:h.view.spatialReference}),attributes:n});p.push(t),h.mapoverlayersflayer.push([e.uuid,e.uuid,t])}else if("circle"===e.overlaytype.toLowerCase())(n=e.attributes).uuid=e.uuid,t=new a({geometry:new c({center:new s({x:e.center.X,y:e.center.Y,z:e.center.Z,spatialReference:h.view.spatialReference}),radius:e.radius,radiusUnit:e.radiusUnit,spatialReference:h.view.spatialReference}),attributes:n}),p.push(t),h.mapoverlayersflayer.push([e.uuid,e.uuid,t]);else if("polyline"===e.overlaytype.toLowerCase()){(n=e.attributes).uuid=e.uuid;var r=[];e.path.forEach(function(e){r.push([e.X,e.Y,e.Z])});var i=new u({hasZ:!1,hasM:!1,paths:r,spatialReference:h.view.spatialReference});t=new a({geometry:i,attributes:n}),p.push(t),h.mapoverlayersflayer.push([e.uuid,e.uuid,t])}else if("polygon"===e.overlaytype.toLowerCase()){var n;(n=e.attributes).uuid=e.uuid;var o=[];e.paths.forEach(function(e){o.push([e.X,e.Y,e.Z])});var l=new d({hasZ:!0,hasM:!0,rings:o,spatialReference:h.view.spatialReference});t=new a({geometry:l,attributes:n}),p.push(t),h.mapoverlayersflayer.push([e.uuid,e.uuid,t])}}),r.applyEdits({addFeatures:p}).then(function(e){return new B.Promise(function(e,t){e(p)})})):("marker"===v.overlaytype.toLowerCase()?((o=v.attributes).uuid=v.uuid,f=new a({geometry:new s({x:v.position[0],y:v.position[1],z:void 0===v.position[2]?0:v.position[2],spatialReference:this.view.spatialReference}),attributes:o}),p.push(f),this.mapoverlayersflayer.push([v.uuid,v.uuid,f])):"circle"===v.overlaytype.toLowerCase()?((o=v.attributes).uuid=v.uuid,f=new a({geometry:new c({center:new s({x:v.center.X,y:v.center.Y,z:v.center.Z,spatialReference:this.view.spatialReference}),radius:v.radius,radiusUnit:v.radiusUnit,spatialReference:this.view.spatialReference}),attributes:o}),p.push(f),this.mapoverlayersflayer.push([v.uuid,v.uuid,f])):"polyline"===v.overlaytype.toLowerCase()?((o=v.attributes).uuid=v.uuid,i=[],v.path.forEach(function(e){i.push([e.X,e.Y,e.Z])}),n=new u({hasZ:!1,hasM:!1,paths:i,spatialReference:this.view.spatialReference}),f=new a({geometry:n,attributes:o}),p.push(f),this.mapoverlayersflayer.push([v.uuid,v.uuid,f])):"polygon"===v.overlaytype.toLowerCase()&&((o=v.attributes).uuid=v.uuid,l=[],v.paths.forEach(function(e){l.push([e.X,e.Y,e.Z])}),y=new d({hasZ:!0,hasM:!0,rings:l,spatialReference:this.view.spatialReference}),f=new a({geometry:y,attributes:o}),p.push(f),this.mapoverlayersflayer.push([v.uuid,v.uuid,f])),r.applyEdits({addFeatures:p}).then(function(e){return new B.Promise(function(e,t){e(p)})}))),[2]}})})},dt.prototype.updatefeature=function(f){return st(this,void 0,void 0,function(){var t,a,s,c,u,d,r,p,y=this;return ct(this,function(e){switch(e.label){case 0:return[4,P(["esri/layers/FeatureLayer","esri/layers/support/LabelClass","esri/Graphic","esri/geometry/Point","esri/geometry/Circle","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon"])];case 1:return(t=e.sent())[0],t[1],t[2],a=t[3],s=t[4],t[5],c=t[6],u=t[7],this.view.map.findLayerById(this.displayedLayerid)&&(d=[],f instanceof Array?(f.forEach(function(t){var r=y.mapoverlayersflayer.filter(function(e){return e[1]===t.uuid});if(1===r.length){if("marker"===t.overlaytype.toLowerCase()){var e=new a({x:t.position[0],y:t.position[1],z:void 0===t.position[2]?0:t.position[2],spatialReference:y.view.spatialReference});r[0][2].geometry=e}else if("circle"===t.overlaytype.toLowerCase())e=new s({center:new a({x:t.center.X,y:t.center.Y,z:t.center.Z,spatialReference:y.view.spatialReference}),radius:t.radius,radiusUnit:t.radiusUnit,spatialReference:y.view.spatialReference}),r[0][2].geometry=e;else if("polyline"===t.overlaytype.toLowerCase()){var i=[];t.path.forEach(function(e){i.push([e.X,e.Y,e.Z])});var n=new c({hasZ:!1,hasM:!1,paths:i,spatialReference:y.view.spatialReference});r[0][2].geometry=n}else if("polygon"===t.overlaytype.toLowerCase()){var o=[];t.paths.forEach(function(e){o.push([e.X,e.Y,e.Z])});var l=new u({hasZ:!0,hasM:!0,rings:o,spatialReference:y.view.spatialReference});r[0][2].geometry=l}Object.keys(t.attributes).map(function(e){"objectId"!==e&&r[0][2].setAttribute(e,t.attributes[e])}),d.push(r[0][2])}}),(r=this.view.map.findLayerById(this.displayedLayerid))&&d.length&&r.applyEdits({updateFeatures:d}).then(function(e){return new B.Promise(function(e,t){e(d)})})):"group"===f.type?(f.overlayers.forEach(function(t){var r=y.mapoverlayersflayer.filter(function(e){return e[1]===t.uuid});if(1===r.length){if("marker"===t.overlaytype.toLowerCase()){var e=new a({x:t.position[0],y:t.position[1],z:void 0===t.position[2]?0:t.position[2],spatialReference:y.view.spatialReference});r[0][2].geometry=e}else if("circle"===t.overlaytype.toLowerCase())e=new s({center:new a({x:t.center.X,y:t.center.Y,z:t.center.Z,spatialReference:y.view.spatialReference}),radius:t.radius,radiusUnit:t.radiusUnit,spatialReference:y.view.spatialReference}),r[0][2].geometry=e;else if("polyline"===t.overlaytype.toLowerCase()){var i=[];t.path.forEach(function(e){i.push([e.X,e.Y,e.Z])});var n=new c({hasZ:!1,hasM:!1,paths:i,spatialReference:y.view.spatialReference});r[0][2].geometry=n}else if("polygon"===t.overlaytype.toLowerCase()){var o=[];t.paths.forEach(function(e){o.push([e.X,e.Y,e.Z])});var l=new u({hasZ:!0,hasM:!0,rings:o,spatialReference:y.view.spatialReference});r[0][2].geometry=l}Object.keys(t.attributes).map(function(e){"objectId"!==e&&r[0][2].setAttribute(e,t.attributes[e])}),d.push(r[0][2])}}),(r=this.view.map.findLayerById(this.displayedLayerid))&&d.length&&r.applyEdits({updateFeatures:d}).then(function(e){return new B.Promise(function(e,t){e(d)})})):"element"===f.type&&(p=this.mapoverlayersflayer.filter(function(e){return e[1]===f.uuid})).forEach(function(t){if(f.attributes.uuid=f.uuid,"marker"===f.overlaytype.toLowerCase()){var e=new a({x:f.position[0],y:f.position[1],z:void 0===f.position[2]?0:f.position[2],spatialReference:y.view.spatialReference});t[2].geometry=e}else if("circle"===f.overlaytype.toLowerCase())e=new s({center:new a({x:f.center.X,y:f.center.Y,z:f.center.Z,spatialReference:y.view.spatialReference}),radius:f.radius,radiusUnit:f.radiusUnit,spatialReference:y.view.spatialReference}),p[0][2].geometry=e;else if("polyline"===f.overlaytype.toLowerCase()){var r=[];f.path.forEach(function(e){r.push([e.X,e.Y,e.Z])});var i=new c({hasZ:!1,hasM:!1,paths:r,spatialReference:y.view.spatialReference});p[0][2].geometry=i}else if("polygon"===f.overlaytype.toLowerCase()){var n=[];f.paths.forEach(function(e){n.push([e.X,e.Y,e.Z])});var o=new u({hasZ:!0,hasM:!0,rings:n,spatialReference:y.view.spatialReference});p[0][2].geometry=o}Object.keys(f.attributes).map(function(e){"objectId"!==e&&t[2].setAttribute(e,f.attributes[e])}),d.push(t[2]);var l=y.view.map.findLayerById(y.displayedLayerid);l&&d.length&&l.applyEdits({updateFeatures:d}).then(function(e){return new B.Promise(function(e,t){e(d)})})})),[2]}})})},dt.prototype.removefeature=function(t){var e=this;if(this.view.map.findLayerById(this.displayedLayerid))if(t instanceof Array){var r=[];t.forEach(function(t){e.mapoverlayersflayer.filter(function(e){return e[1]===t.uuid}).forEach(function(e){r.push(e[2])}),e.mapoverlayersflayer=e.mapoverlayersflayer.filter(function(e){return e[1]!==t.uuid})}),(o=this.view.map.findLayerById(this.displayedLayerid))&&r.length&&o.applyEdits({deleteFeatures:r}).then(function(e){})}else if("group"===t.type){var i=this.mapoverlayersflayer.filter(function(e){return e[0]===t.uuid}),n=[];i.forEach(function(e){n.push(e[2])}),(o=this.view.map.findLayerById(this.displayedLayerid))&&n.length&&o.applyEdits({deleteFeatures:n}).then(function(e){}),this.mapoverlayersflayer=this.mapoverlayersflayer.filter(function(e){return e[0]!==t.uuid})}else if("element"===t.type){i=this.mapoverlayersflayer.filter(function(e){return e[1]===t.uuid});var o,l=[];i.forEach(function(e){l.push(e[2])}),(o=this.view.map.findLayerById(this.displayedLayerid))&&l.length&&o.applyEdits({deleteFeatures:l}).then(function(e){}),this.mapoverlayersflayer=this.mapoverlayersflayer.filter(function(e){return e[1]!==t.uuid})}},dt.prototype.removeAll=function(){var t=this,e=this.view.map.findLayerById(this.displayedLayerid);if(e){var r=[];this.mapoverlayersflayer.forEach(function(e){r.push(e[2])}),e.applyEdits({deleteFeatures:r}).then(function(e){t.mapoverlayersflayer=[]})}},dt.prototype.delete=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(this.view.map.remove(e),this.mapoverlayersflayer=[])},dt.prototype.addcluster=function(e){var t=this.view.map.findLayerById(this.displayedLayerid);t&&(t.featureReduction=e)},dt.prototype.deletecluster=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.featureReduction=null)},dt.prototype.show=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!0)},dt.prototype.hide=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!1)},dt.prototype.init=function(r){return st(this,void 0,void 0,function(){var t=this;return ct(this,function(e){return this.displayedLayerid=(new x).uuid,this.view=r,this.view.on(q.click,function(l){t.view.hitTest(l).then(function(o){return st(t,void 0,void 0,function(){var t,r,i,n=this;return ct(this,function(e){if(0<o.results.length){if(!o.results[0].graphic.layer)return[2];if(!(t=o.results[0].graphic.layer.id))return[2];t===this.displayedLayerid&&(r=o.results[0].graphic.attributes.objectId,(i=o.results[0].graphic.layer.createQuery()).where="objectId ="+r,o.results[0].graphic.layer.queryFeatures(i).then(function(e){0<e.features.length&&n.emit(q.click,e.features,l,l.mapPoint)}))}return[2]})})})}),this.view.on(q.pointermove,function(a){t.view.hitTest(a).then(function(l){return st(t,void 0,void 0,function(){var t,r,i,n,o=this;return ct(this,function(e){if(0<l.results.length){if(!l.results[0].graphic.layer)return[2];if(!(t=l.results[0].graphic.layer.id))return[2];t===this.displayedLayerid&&(r=l.results[0].graphic.attributes.objectId,(i=l.results[0].graphic.layer.createQuery()).where="objectId ="+r,l.results[0].graphic.layer.queryFeatures(i).then(function(e){0<e.features.length&&(o.eventResult=e.features,o.emit(q.pointermove,e.features,a,o.view.toMap({x:a.x,y:a.y})))}))}else{if(null===this.eventResult)return[2];n=this.eventResult,this.eventResult=null,this.emit(q.pointerleave,n,a,this.view.toMap({x:a.x,y:a.y}))}return[2]})})})}),[2]})})},dt);function dt(e){var t=lt.call(this)||this;return t.displayedLayerid="",t.view=null,t.mapoverlayersflayer=[],t.eventResult=null,t.init(e),t}var pt,yt,ft=(pt=function(e,t){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}pt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ht=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},vt=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},bt=(ft(mt,yt=e),mt.prototype.add=function(n){var o=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/FireRenderer","esri/views/3d/externalRenderers"]).then(function(e){var r=e[0],i=e[1];n.points.forEach(function(e){var t=new r(o.view,e,n.options);i.add(o.view,t),o.fireRendererRendererArray.push([(new x).uuid,t])})}).catch(function(e){console.error(e)})},mt.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.fireRendererRendererArray.map(function(e){t.remove(r.view,e[1])})})},mt.prototype.init=function(t){return ht(this,void 0,void 0,function(){return vt(this,function(e){return this.view=t,[2]})})},mt);function mt(e){var t=yt.call(this)||this;return t.fireRendererRendererArray=[],t.view=null,t.init(e),t}var wt,gt,xt=(wt=function(e,t){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}wt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Lt=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Ct=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Rt=(xt(kt,gt=e),kt.prototype.add=function(n){var o=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/4E3CE3AF-B592-B4F6-576E1B86F84B6969","esri/geometry/Point","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=e[2];n.points&&(o.markpoints=n.points.map(function(e){return e.markerid=(new x).uuid,e}),o.markpointscontainerid=(new x).uuid,o.flashGifLayer=new t({points:o.markpoints,view:o.view,markercontainerid:o.markpointscontainerid},function(e){var t=null;null!=e&&(t=new r({x:e.x,y:e.y,spatialReference:{wkid:102100}})),o.emit(q.click,e,t)},function(e){var t=null;null!=e&&(t=new r({x:e.x,y:e.y,spatialReference:{wkid:102100}})),o.emit(q.pointermove,e,t)}),i.add(o.view,o.flashGifLayer),o.markpointsRendererArray.push([(new x).uuid,o.flashGifLayer]))})},kt.prototype.remove=function(){var i=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];i.markpointsRendererArray.map(function(e){t.remove(i.view,e[1])}),i.markpointsRendererArray=[],i.markpoints.forEach(function(e){var t=document.getElementById(i.markpointscontainerid),r=document.getElementById(e.markerid);null!==r&&t.removeChild(r)})})},kt.prototype.init=function(t){return Lt(this,void 0,void 0,function(){return Ct(this,function(e){return this.view=t,[2]})})},kt);function kt(e){var t=gt.call(this)||this;return t.markpointsRendererArray=[],t.markpoints=null,t.view=null,t.flashGifLayer=null,t.markpointscontainerid=null,t.init(e),t}var At,zt,St=(At=function(e,t){return(At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}At(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ft=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},It=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Et=(St(_t,zt=e),_t.prototype.add=function(n){var o=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/92586C78-6DE2-946F-F03F88AF0F8D0D7F","esri/geometry/Point","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=e[2];o.falshpoint3DRenderer=new t({nring:n.nring,spead:n.spead,size:n.size,color:n.color,view:n.view,points:n.points},function(e){var t=null;null!=e&&(t=new r({x:e.x,y:e.y,spatialReference:{wkid:102100}})),o.emit(q.click,e,t)},function(e){var t=null;null!=e&&(t=new r({x:e.x,y:e.y,spatialReference:{wkid:102100}})),o.emit(q.pointermove,e,t)}),i.add(o.view,o.falshpoint3DRenderer)})},_t.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.falshpoint3DRenderer&&t.remove(r.view,r.falshpoint3DRenderer)})},_t.prototype.init=function(t){return Ft(this,void 0,void 0,function(){return It(this,function(e){return this.view=t,[2]})})},_t);function _t(e){var t=zt.call(this)||this;return t.view=null,t.falshpoint3DRenderer=null,t.init(e),t}var Bt,Pt,Ot=(Bt=function(e,t){return(Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Bt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Mt=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},jt=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Wt=(Ot(Dt,Pt=e),Dt.prototype.add=function(_){return Mt(this,void 0,void 0,function(){var t,L,C,r,R,k,A,z,i,n,o,l,a,s,c,u,d,p,y,f,h,v,b,m,w,g,x,S,F,I,E=this;return jt(this,function(e){switch(e.label){case 0:return[4,P(["esri/Graphic","esri/geometry/Point","esri/layers/GraphicsLayer","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Circle"])];case 1:return t=e.sent(),L=t[0],C=t[1],r=t[2],t[3],R=t[4],k=t[5],A=t[6],z=[],(i=this.view.map.findLayerById(this.displayedLayerid))||(i=new r({id:this.displayedLayerid,title:"Overlayer-"+this.displayedLayerid}),this.view.map.add(i)),_ instanceof Array?_.forEach(function(e){if("marker"===e.overlaytype.toLowerCase()){var t=void 0;t=e.symbol?e.symbol:"2d"===E.view.type?{type:"picture-marker",url:e.icon.image,width:e.icon.size.width,height:e.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:e.icon.size.width,resource:{href:e.icon.image}}]};var r=e.attributes;r.uuid=e.uuid;var i=new L({geometry:new C({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:E.view.spatialReference}),symbol:t,attributes:r});if(z.push(i),E.mapoverlayers.push(["smap-default",e.uuid,i]),(w=E.view.map.findLayerById(E.displayedLayerid))&&w.add(i),e.label.visible){var n=null;n=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}};var o=new L({geometry:new C({x:"3d"===E.view.type?e.position[0]+e.label.xoffset:e.position[0],y:"3d"===E.view.type?e.position[1]+e.label.yoffset:e.position[1],z:"3d"===E.view.type?e.position[2]+e.label.zoffset:e.position[2],spatialReference:E.view.spatialReference}),symbol:n,attributes:r});(g=E.view.map.findLayerById(E.displayedLayerid))&&g.add(o),E.mapoverlayers.push(["smap-default",e.uuid,o])}}else if("polyline"===e.overlaytype.toLowerCase()){var l=null;l=e.symbol?e.symbol:{type:"simple-line",color:e.strokeColor,style:e.style,width:e.width,cap:e.cap,join:e.lineJoin};var a=[];e.path.forEach(function(e){a.push([e.X,e.Y,e.Z])});var s=new R({hasZ:!1,hasM:!1,paths:a,spatialReference:E.view.spatialReference}),c=e.attributes;c.uuid=e.uuid;var u=new L({geometry:s,symbol:l,attributes:c});if(z.push(u),E.mapoverlayers.push(["smap-default",e.uuid,u]),(w=E.view.map.findLayerById(E.displayedLayerid))&&w.add(u),e.label.visible){var d=null;d=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},o=new L({geometry:u.geometry.extent.center,symbol:d,attributes:c}),(g=E.view.map.findLayerById(E.displayedLayerid))&&g.add(o),E.mapoverlayers.push(["smap-default",e.uuid,o])}}else if("polygon"===e.overlaytype.toLowerCase()){var p=void 0;p=e.symbol?e.symbol:"simple"===e.symboltype?{type:"simple-fill",color:e.fillColor,style:e.style,outline:{color:e.strokeColor,width:e.strokeWeight,style:e.strokestyle}}:{type:"picture-fill",url:e.url,width:e.picwidth,height:e.picheight,outline:{style:e.strokestyle,color:e.strokeColor,width:e.strokeWeight}};var y=[];e.paths.forEach(function(e){y.push([e.X,e.Y,e.Z])});var f=new k({hasZ:!0,hasM:!0,rings:y,spatialReference:E.view.spatialReference}),h=e.attributes;h.uuid=e.uuid;var v=new L({geometry:f,symbol:p,attributes:h});if(z.push(v),E.mapoverlayers.push(["smap-default",e.uuid,v]),(w=E.view.map.findLayerById(E.displayedLayerid))&&w.add(v),e.label.visible){var b=null;b=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},o=new L({geometry:v.geometry.extent.center,symbol:b,attributes:h}),(g=E.view.map.findLayerById(E.displayedLayerid))&&g.add(o),E.mapoverlayers.push(["smap-default",e.uuid,o])}}else if("circle"===e.overlaytype.toLowerCase()&&(p=void 0,p=e.symbol?e.symbol:"simple"===e.symboltype?{type:"simple-fill",color:e.fillColor,style:e.style,outline:{color:e.strokeColor,width:e.strokeWeight,style:e.strokestyle}}:{type:"picture-fill",url:e.url,width:e.picwidth,height:e.picheight,outline:{style:e.strokestyle,color:e.strokeColor,width:e.strokeWeight}},e.attributes&&e.center&&e.radius)){var m=e.attributes;m.uuid=e.uuid;var w,g,x=new L({geometry:new A({center:new C({x:e.center.X,y:e.center.Y,z:e.center.Z,spatialReference:E.view.spatialReference}),radius:e.radius,radiusUnit:e.radiusUnit,spatialReference:E.view.spatialReference}),symbol:p,attributes:m});if(z.push(x),E.mapoverlayers.push(["smap-default",e.uuid,x]),(w=E.view.map.findLayerById(E.displayedLayerid))&&w.add(x),e.label.visible)b=null,b=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},o=new L({geometry:x.geometry.extent.center,symbol:b,attributes:m}),(g=E.view.map.findLayerById(E.displayedLayerid))&&g.add(o),E.mapoverlayers.push(["smap-default",e.uuid,o])}}):"group"===_.type?(_.overlayers.forEach(function(e){if("marker"===e.overlaytype.toLowerCase()){var t=void 0;t=e.symbol?e.symbol:"2d"===E.view.type?{type:"picture-marker",url:e.icon.image,width:e.icon.size.width,height:e.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:e.icon.size.width,resource:{href:e.icon.image}}]};var r=e.attributes;r.uuid=e.uuid;var i=new L({geometry:new C({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:E.view.spatialReference}),symbol:t,attributes:r});if(z.push(i),E.mapoverlayers.push([_.uuid,e.uuid,i]),(g=E.view.map.findLayerById(E.displayedLayerid))&&g.add(i),e.label.visible){var n=null;n=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}};var o=new L({geometry:new C({x:"3d"===E.view.type?e.position[0]+e.label.xoffset:e.position[0],y:"3d"===E.view.type?e.position[1]+e.label.yoffset:e.position[1],z:"3d"===E.view.type?e.position[2]+e.label.zoffset:e.position[2],spatialReference:E.view.spatialReference}),symbol:n,attributes:r});(w=E.view.map.findLayerById(E.displayedLayerid))&&w.add(o),E.mapoverlayers.push([_.uuid,e.uuid,o])}}else if("polyline"===e.overlaytype.toLowerCase()){var l=null;l=e.symbol?e.symbol:{type:"simple-line",color:e.strokeColor,style:e.style,width:e.width,cap:e.cap,join:e.lineJoin};var a=[];e.path.forEach(function(e){a.push([e.X,e.Y,e.Z])});var s=new R({hasZ:!1,hasM:!1,paths:a,spatialReference:E.view.spatialReference}),c=e.attributes;c.uuid=e.uuid;var u=new L({geometry:s,symbol:l,attributes:c});if(z.push(u),E.mapoverlayers.push([_.uuid,e.uuid,u]),(w=E.view.map.findLayerById(E.displayedLayerid))&&w.add(u),e.label.visible){var d=null;d=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},o=new L({geometry:u.geometry.extent.center,symbol:d,attributes:c}),(g=E.view.map.findLayerById(E.displayedLayerid))&&g.add(o),E.mapoverlayers.push([_.uuid,e.uuid,o])}}else if("polygon"===e.overlaytype.toLowerCase()){var p=void 0;p=e.symbol?e.symbol:"simple"===e.symboltype?{type:"simple-fill",color:e.fillColor,style:e.style,outline:{color:e.strokeColor,width:e.strokeWeight,style:e.strokestyle}}:{type:"picture-fill",url:e.url,width:e.picwidth,height:e.picheight,outline:{style:e.strokestyle,color:e.strokeColor,width:e.strokeWeight}};var y=[];e.paths.forEach(function(e){y.push([e.X,e.Y,e.Z])});var f=e.attributes;f.uuid=e.uuid;var h=new k({hasZ:!0,hasM:!0,rings:y,spatialReference:E.view.spatialReference}),v=new L({geometry:h,symbol:p,attributes:f});if(z.push(v),E.mapoverlayers.push([_.uuid,e.uuid,v]),(g=E.view.map.findLayerById(E.displayedLayerid))&&g.add(v),e.label.visible){var b=null;b=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},o=new L({geometry:v.geometry.extent.center,symbol:b,attributes:f}),(w=E.view.map.findLayerById(E.displayedLayerid))&&w.add(o),E.mapoverlayers.push([_.uuid,e.uuid,o])}}else if("circle"===e.overlaytype.toLowerCase()&&(p=void 0,p=e.symbol?e.symbol:"simple"===e.symboltype?{type:"simple-fill",color:e.fillColor,style:e.style,outline:{color:e.strokeColor,width:e.strokeWeight,style:e.strokestyle}}:{type:"picture-fill",url:e.url,width:e.picwidth,height:e.picheight,outline:{style:e.strokestyle,color:e.strokeColor,width:e.strokeWeight}},e.attributes&&e.center&&e.radius)){var m=e.attributes;m.uuid=e.uuid;var w,g,x=new L({geometry:new A({center:new C({x:e.center.X,y:e.center.Y,z:e.center.Z,spatialReference:E.view.spatialReference}),radius:e.radius,radiusUnit:e.radiusUnit,spatialReference:E.view.spatialReference}),symbol:p,attributes:m});if(z.push(x),E.mapoverlayers.push(["smap-default",e.uuid,x]),(w=E.view.map.findLayerById(E.displayedLayerid))&&w.add(x),e.label.visible)b=null,b=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},o=new L({geometry:x.geometry.extent.center,symbol:b,attributes:m}),(g=E.view.map.findLayerById(E.displayedLayerid))&&g.add(o),E.mapoverlayers.push(["smap-default",e.uuid,o])}}),i.minScale=_.minScale,i.maxScale=_.maxScale):"element"===_.type&&("marker"===_.overlaytype.toLowerCase()?(n=void 0,n=_.symbol?_.symbol:"2d"===this.view.type?{type:"picture-marker",url:_.icon.image,width:_.icon.size.width,height:_.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:_.icon.size.width,resource:{href:_.icon.image}}]},(o=_.attributes).uuid=_.uuid,l=new L({geometry:new C({x:_.position[0],y:_.position[1],z:void 0===_.position[2]?0:_.position[2],spatialReference:this.view.spatialReference}),symbol:n,attributes:o}),z.push(l),this.mapoverlayers.push(["smap-default",_.uuid,l]),(x=this.view.map.findLayerById(this.displayedLayerid))&&x.add(l),_.label.visible&&(a=null,a=_.label.labelingInfo?_.label.labelingInfo:{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}},F=new L({geometry:new C({x:"3d"===this.view.type?_.position[0]+_.label.xoffset:_.position[0],y:"3d"===this.view.type?_.position[1]+_.label.yoffset:_.position[1],z:"3d"===this.view.type?_.position[2]+_.label.zoffset:_.position[2],spatialReference:this.view.spatialReference}),symbol:a,attributes:o}),(I=this.view.map.findLayerById(this.displayedLayerid))&&I.add(F),this.mapoverlayers.push(["smap-default",_.uuid,F]))):"polyline"===_.overlaytype.toLowerCase()?(s=null,s=_.symbol?_.symbol:{type:"simple-line",color:_.strokeColor,style:_.style,width:_.width,cap:_.cap,join:_.lineJoin},c=[],_.path.forEach(function(e){c.push([e.X,e.Y,e.Z])}),u=new R({hasZ:!1,hasM:!1,paths:c,spatialReference:this.view.spatialReference}),(d=_.attributes).uuid=_.uuid,p=new L({geometry:u,symbol:s,attributes:d}),z.push(p),this.mapoverlayers.push(["smap-default",_.uuid,p]),(I=this.view.map.findLayerById(this.displayedLayerid))&&I.add(p),_.label.visible&&(b=null,b=_.label.labelingInfo?_.label.labelingInfo:{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}},F=new L({geometry:p.geometry.extent.center,symbol:b,attributes:d}),(x=this.view.map.findLayerById(this.displayedLayerid))&&x.add(F),this.mapoverlayers.push(["smap-default",_.uuid,F]))):"polygon"===_.overlaytype.toLowerCase()?(m=void 0,m=_.symbol?_.symbol:"simple"===_.symboltype?{type:"simple-fill",color:_.fillColor,style:_.style,outline:{color:_.strokeColor,width:_.strokeWeight,style:_.strokestyle}}:{type:"picture-fill",url:_.url,width:_.picwidth,height:_.picheight,outline:{style:_.strokestyle,color:_.strokeColor,width:_.strokeWeight}},y=[],_.paths.forEach(function(e){y.push([e.X,e.Y,e.Z])}),(f=_.attributes).uuid=_.uuid,h=new k({hasZ:!0,hasM:!0,rings:y,spatialReference:this.view.spatialReference}),v=new L({geometry:h,symbol:m,attributes:f}),z.push(v),this.mapoverlayers.push(["smap-default",_.uuid,v]),(x=this.view.map.findLayerById(this.displayedLayerid))&&x.add(v),_.label.visible&&(b=null,b=_.label.labelingInfo?_.label.labelingInfo:{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}},F=new L({geometry:v.geometry.extent.center,symbol:b,attributes:f}),(I=this.view.map.findLayerById(this.displayedLayerid))&&I.add(F),this.mapoverlayers.push(["smap-default",_.uuid,F]))):"circle"===_.overlaytype.toLowerCase()&&(m=void 0,m=_.symbol?_.symbol:"simple"===_.symboltype?{type:"simple-fill",color:_.fillColor,style:_.style,outline:{color:_.strokeColor,width:_.strokeWeight,style:_.strokestyle}}:{type:"picture-fill",url:_.url,width:_.picwidth,height:_.picheight,outline:{style:_.strokestyle,color:_.strokeColor,width:_.strokeWeight}},_.attributes&&_.center&&_.radius&&((w=_.attributes).uuid=_.uuid,g=new L({geometry:new A({center:new C({x:_.center.X,y:_.center.Y,z:_.center.Z,spatialReference:this.view.spatialReference}),radius:_.radius,radiusUnit:_.radiusUnit,spatialReference:this.view.spatialReference}),symbol:m,attributes:w}),z.push(g),this.mapoverlayers.push(["smap-default",_.uuid,g]),(x=this.view.map.findLayerById(this.displayedLayerid))&&x.add(g),_.label.visible&&(S=null,S=_.label.labelingInfo?_.label.labelingInfo:{type:_.label.type,text:_.label.text,color:_.label.color,angle:_.label.angle,backgroundColor:_.label.backgroundColor,borderLineColor:_.label.borderLineColor,borderLineSize:_.label.borderLineSize,kerning:_.label.kerning,lineHeight:_.label.lineHeight,lineWidth:_.label.lineWidth,rotated:_.label.rotated,haloColor:_.label.haloColor,haloSize:_.label.haloSize,xoffset:_.label.xoffset,yoffset:_.label.yoffset,verticalAlignment:_.label.verticalAlignment,horizontalAlignment:_.label.horizontalAlignment,font:{size:_.label.size,family:"Josefin Slab",weight:_.label.weight}},F=new L({geometry:g.geometry.extent.center,symbol:S,attributes:w}),(I=this.view.map.findLayerById(this.displayedLayerid))&&I.add(F),this.mapoverlayers.push(["smap-default",_.uuid,F]))))),[2,new B.Promise(function(e,t){e(z)})]}})})},Dt.prototype.remove=function(t){var r=this;t instanceof Array?t.forEach(function(t){r.mapoverlayers.filter(function(e){return e[1]===t.uuid}).forEach(function(e){var t=r.view.map.findLayerById(r.displayedLayerid);t&&t.remove(e[2])}),r.mapoverlayers=r.mapoverlayers.filter(function(e){return e[1]!==t.uuid})}):"group"===t.type?(this.mapoverlayers.filter(function(e){return e[0]===t.uuid}).forEach(function(e){var t=r.view.map.findLayerById(r.displayedLayerid);t&&t.remove(e[2])}),this.mapoverlayers=this.mapoverlayers.filter(function(e){return e[0]!==t.uuid})):"element"===t.type&&(this.mapoverlayers.filter(function(e){return e[1]===t.uuid}).forEach(function(e){var t=r.view.map.findLayerById(r.displayedLayerid);t&&t.remove(e[2])}),this.mapoverlayers=this.mapoverlayers.filter(function(e){return e[1]!==t.uuid}))},Dt.prototype.update=function(I){return Mt(this,void 0,void 0,function(){var t,L,C,R,k,A,z,r,i,n,o,l,a,s,c,u,d,p,y,f,h,v,b,m,w,g,x,S,F=this;return jt(this,function(e){switch(e.label){case 0:return[4,P(["esri/Graphic","esri/geometry/Point","esri/layers/GraphicsLayer","esri/symbols/PictureMarkerSymbol","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Circle"])];case 1:return t=e.sent(),L=t[0],C=t[1],t[2],t[3],R=t[4],k=t[5],A=t[6],z=[],I instanceof Array?I.forEach(function(t){if(F.mapoverlayers.filter(function(e){return e[1]===t.uuid}).forEach(function(e){var t=F.view.map.findLayerById(F.displayedLayerid);t&&t.remove(e[2])}),F.mapoverlayers=F.mapoverlayers.filter(function(e){return e[1]!==t.uuid}),"marker"===t.overlaytype.toLowerCase()){var e=void 0;e=t.symbol?t.symbol:"2d"===F.view.type?{type:"picture-marker",url:t.icon.image,width:t.icon.size.width,height:t.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:t.icon.size.width,resource:{href:t.icon.image}}]};var r=t.attributes;r.uuid=t.uuid;var i=new L({geometry:new C({x:t.position[0],y:t.position[1],z:void 0===t.position[2]?0:t.position[2],spatialReference:F.view.spatialReference}),symbol:e,attributes:r});if(z.push(i),F.mapoverlayers.push(["smap-default",t.uuid,i]),(g=F.view.map.findLayerById(F.displayedLayerid))&&g.add(i),t.label.visible){var n=null;n=t.label.labelingInfo?t.label.labelingInfo:{type:t.label.type,text:t.label.text,color:t.label.color,angle:t.label.angle,backgroundColor:t.label.backgroundColor,borderLineColor:t.label.borderLineColor,borderLineSize:t.label.borderLineSize,kerning:t.label.kerning,lineHeight:t.label.lineHeight,lineWidth:t.label.lineWidth,rotated:t.label.rotated,haloColor:t.label.haloColor,haloSize:t.label.haloSize,xoffset:t.label.xoffset,yoffset:t.label.yoffset,verticalAlignment:t.label.verticalAlignment,horizontalAlignment:t.label.horizontalAlignment,font:{size:t.label.size,family:"Josefin Slab",weight:t.label.weight}};var o=new L({geometry:new C({x:"3d"===F.view.type?t.position[0]+t.label.xoffset:t.position[0],y:"3d"===F.view.type?t.position[1]+t.label.yoffset:t.position[1],z:"3d"===F.view.type?t.position[2]+t.label.zoffset:t.position[2],spatialReference:F.view.spatialReference}),symbol:n,attributes:r});(w=F.view.map.findLayerById(F.displayedLayerid))&&w.add(o),F.mapoverlayers.push(["smap-default",t.uuid,o])}}else if("polyline"===t.overlaytype.toLowerCase()){var l=null;l=t.symbol?t.symbol:{type:"simple-line",color:t.strokeColor,style:t.style,width:t.width,cap:t.cap,join:t.lineJoin};var a=[];t.path.forEach(function(e){a.push([e.X,e.Y,e.Z])});var s=new R({hasZ:!1,hasM:!1,paths:a,spatialReference:F.view.spatialReference}),c=t.attributes;c.uuid=t.uuid;var u=new L({geometry:s,symbol:l,attributes:c});if(z.push(u),F.mapoverlayers.push(["smap-default",t.uuid,u]),(w=F.view.map.findLayerById(F.displayedLayerid))&&w.add(u),t.label.visible){var d=null;d=t.label.labelingInfo?t.label.labelingInfo:{type:t.label.type,text:t.label.text,color:t.label.color,angle:t.label.angle,backgroundColor:t.label.backgroundColor,borderLineColor:t.label.borderLineColor,borderLineSize:t.label.borderLineSize,kerning:t.label.kerning,lineHeight:t.label.lineHeight,lineWidth:t.label.lineWidth,rotated:t.label.rotated,haloColor:t.label.haloColor,haloSize:t.label.haloSize,xoffset:t.label.xoffset,yoffset:t.label.yoffset,verticalAlignment:t.label.verticalAlignment,horizontalAlignment:t.label.horizontalAlignment,font:{size:t.label.size,family:"Josefin Slab",weight:t.label.weight}},o=new L({geometry:u.geometry.extent.center,symbol:d,attributes:c}),(g=F.view.map.findLayerById(F.displayedLayerid))&&g.add(o),F.mapoverlayers.push(["smap-default",t.uuid,o])}}else if("polygon"===t.overlaytype.toLowerCase()){var p=void 0;p=t.symbol?t.symbol:"simple"===t.symboltype?{type:"simple-fill",color:t.fillColor,style:t.style,outline:{color:t.strokeColor,width:t.strokeWeight,style:t.strokestyle}}:{type:"picture-fill",url:t.url,width:t.picwidth,height:t.picheight,outline:{style:t.strokestyle,color:t.strokeColor,width:t.strokeWeight}};var y=[];t.paths.forEach(function(e){y.push([e.X,e.Y,e.Z])});var f=new k({hasZ:!0,hasM:!0,rings:y,spatialReference:F.view.spatialReference}),h=t.attributes;h.uuid=t.uuid;var v=new L({geometry:f,symbol:p,attributes:h});if(z.push(v),F.mapoverlayers.push(["smap-default",t.uuid,v]),(g=F.view.map.findLayerById(F.displayedLayerid))&&g.add(v),t.label.visible){var b=null;b=t.label.labelingInfo?t.label.labelingInfo:{type:t.label.type,text:t.label.text,color:t.label.color,angle:t.label.angle,backgroundColor:t.label.backgroundColor,borderLineColor:t.label.borderLineColor,borderLineSize:t.label.borderLineSize,kerning:t.label.kerning,lineHeight:t.label.lineHeight,lineWidth:t.label.lineWidth,rotated:t.label.rotated,haloColor:t.label.haloColor,haloSize:t.label.haloSize,xoffset:t.label.xoffset,yoffset:t.label.yoffset,verticalAlignment:t.label.verticalAlignment,horizontalAlignment:t.label.horizontalAlignment,font:{size:t.label.size,family:"Josefin Slab",weight:t.label.weight}},o=new L({geometry:v.geometry.extent.center,symbol:b,attributes:h}),(w=F.view.map.findLayerById(F.displayedLayerid))&&w.add(o),F.mapoverlayers.push(["smap-default",t.uuid,o])}}else if("circle"===t.overlaytype.toLowerCase()&&(p=void 0,p=t.symbol?t.symbol:"simple"===t.symboltype?{type:"simple-fill",color:t.fillColor,style:t.style,outline:{color:t.strokeColor,width:t.strokeWeight,style:t.strokestyle}}:{type:"picture-fill",url:t.url,width:t.picwidth,height:t.picheight,outline:{style:t.strokestyle,color:t.strokeColor,width:t.strokeWeight}},t.attributes&&t.center&&t.radius)){var m=t.attributes;m.uuid=t.uuid;var w,g,x=new L({geometry:new A({center:new C({x:t.center.X,y:t.center.Y,z:t.center.Z,spatialReference:F.view.spatialReference}),radius:t.radius,radiusUnit:t.radiusUnit,spatialReference:F.view.spatialReference}),symbol:p,attributes:m});if(z.push(x),F.mapoverlayers.push(["smap-default",t.uuid,x]),(w=F.view.map.findLayerById(F.displayedLayerid))&&w.add(x),t.label.visible)b=null,b=t.label.labelingInfo?t.label.labelingInfo:{type:t.label.type,text:t.label.text,color:t.label.color,angle:t.label.angle,backgroundColor:t.label.backgroundColor,borderLineColor:t.label.borderLineColor,borderLineSize:t.label.borderLineSize,kerning:t.label.kerning,lineHeight:t.label.lineHeight,lineWidth:t.label.lineWidth,rotated:t.label.rotated,haloColor:t.label.haloColor,haloSize:t.label.haloSize,xoffset:t.label.xoffset,yoffset:t.label.yoffset,verticalAlignment:t.label.verticalAlignment,horizontalAlignment:t.label.horizontalAlignment,font:{size:t.label.size,family:"Josefin Slab",weight:t.label.weight}},o=new L({geometry:x.geometry.extent.center,symbol:b,attributes:m}),(g=F.view.map.findLayerById(F.displayedLayerid))&&g.add(o),F.mapoverlayers.push(["smap-default",t.uuid,o])}}):"group"===I.type?(this.mapoverlayers.filter(function(e){return e[0]===I.uuid}).forEach(function(e){var t=F.view.map.findLayerById(F.displayedLayerid);t&&t.remove(e[2])}),this.mapoverlayers=this.mapoverlayers.filter(function(e){return e[0]!==I.uuid}),I.overlayers.forEach(function(e){if("marker"===e.overlaytype.toLowerCase()){var t=void 0;t=e.symbol?e.symbol:"2d"===F.view.type?{type:"picture-marker",url:e.icon.image,width:e.icon.size.width,height:e.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:e.icon.size.width,resource:{href:e.icon.image}}]};var r=e.attributes;r.uuid=e.uuid;var i=new L({geometry:new C({x:e.position[0],y:e.position[1],z:void 0===e.position[2]?0:e.position[2],spatialReference:F.view.spatialReference}),symbol:t,attributes:r});if(z.push(i),F.mapoverlayers.push([I.uuid,e.uuid,i]),(w=F.view.map.findLayerById(F.displayedLayerid))&&w.add(i),e.label.visible){var n=null;n=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}};var o=new L({geometry:new C({x:"3d"===F.view.type?e.position[0]+e.label.xoffset:e.position[0],y:"3d"===F.view.type?e.position[1]+e.label.yoffset:e.position[1],z:"3d"===F.view.type?e.position[2]+e.label.zoffset:e.position[2],spatialReference:F.view.spatialReference}),symbol:n,attributes:r});(g=F.view.map.findLayerById(F.displayedLayerid))&&g.add(o),F.mapoverlayers.push([I.uuid,e.uuid,o])}}else if("polyline"===e.overlaytype.toLowerCase()){var l=null;l=e.symbol?e.symbol:{type:"simple-line",color:e.strokeColor,style:e.style,width:e.width,cap:e.cap,join:e.lineJoin};var a=[];e.path.forEach(function(e){a.push([e.X,e.Y,e.Z])});var s=new R({hasZ:!1,hasM:!1,paths:a,spatialReference:F.view.spatialReference}),c=e.attributes;c.uuid=e.uuid;var u=new L({geometry:s,symbol:l,attributes:c});if(z.push(u),F.mapoverlayers.push([I.uuid,e.uuid,u]),(g=F.view.map.findLayerById(F.displayedLayerid))&&g.add(u),e.label.visible){var d=null;d=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},o=new L({geometry:u.geometry.extent.center,symbol:d,attributes:c}),(w=F.view.map.findLayerById(F.displayedLayerid))&&w.add(o),F.mapoverlayers.push([I.uuid,e.uuid,o])}}else if("polygon"===e.overlaytype.toLowerCase()){var p=void 0;p=e.symbol?e.symbol:"simple"===I.symboltype?{type:"simple-fill",color:I.fillColor,style:I.style,outline:{color:I.strokeColor,width:I.strokeWeight,style:I.strokestyle}}:{type:"picture-fill",url:I.url,width:I.picwidth,height:I.picheight,outline:{style:I.strokestyle,color:I.strokeColor,width:I.strokeWeight}};var y=[];I.paths.forEach(function(e){y.push([e.X,e.Y,e.Z])});var f=e.attributes;f.uuid=e.uuid;var h=new k({hasZ:!0,hasM:!0,rings:y,spatialReference:F.view.spatialReference}),v=new L({geometry:h,symbol:p,attributes:f});if(z.push(v),F.mapoverlayers.push(["smap-default",I.uuid,v]),(w=F.view.map.findLayerById(F.displayedLayerid))&&w.add(v),I.label.visible){var b=null;b=e.label.labelingInfo?e.label.labelingInfo:{type:I.label.type,text:I.label.text,color:I.label.color,angle:I.label.angle,backgroundColor:I.label.backgroundColor,borderLineColor:I.label.borderLineColor,borderLineSize:I.label.borderLineSize,kerning:I.label.kerning,lineHeight:I.label.lineHeight,lineWidth:I.label.lineWidth,rotated:I.label.rotated,haloColor:I.label.haloColor,haloSize:I.label.haloSize,xoffset:I.label.xoffset,yoffset:I.label.yoffset,verticalAlignment:I.label.verticalAlignment,horizontalAlignment:I.label.horizontalAlignment,font:{size:I.label.size,family:"Josefin Slab",weight:I.label.weight}},o=new L({geometry:v.geometry.extent.center,symbol:b,attributes:f}),(g=F.view.map.findLayerById(F.displayedLayerid))&&g.add(o),F.mapoverlayers.push(["smap-default",I.uuid,o])}}else if("circle"===e.overlaytype.toLowerCase()&&(p=void 0,p=e.symbol?e.symbol:"simple"===e.symboltype?{type:"simple-fill",color:e.fillColor,style:e.style,outline:{color:e.strokeColor,width:e.strokeWeight,style:e.strokestyle}}:{type:"picture-fill",url:e.url,width:e.picwidth,height:e.picheight,outline:{style:e.strokestyle,color:e.strokeColor,width:e.strokeWeight}},e.attributes&&e.center&&e.radius)){var m=e.attributes;m.uuid=e.uuid;var w,g,x=new L({geometry:new A({center:new C({x:e.center.X,y:e.center.Y,z:e.center.Z,spatialReference:F.view.spatialReference}),radius:e.radius,radiusUnit:e.radiusUnit,spatialReference:F.view.spatialReference}),symbol:p,attributes:m});if(z.push(x),F.mapoverlayers.push(["smap-default",e.uuid,x]),(w=F.view.map.findLayerById(F.displayedLayerid))&&w.add(x),e.label.visible)b=null,b=e.label.labelingInfo?e.label.labelingInfo:{type:e.label.type,text:e.label.text,color:e.label.color,angle:e.label.angle,backgroundColor:e.label.backgroundColor,borderLineColor:e.label.borderLineColor,borderLineSize:e.label.borderLineSize,kerning:e.label.kerning,lineHeight:e.label.lineHeight,lineWidth:e.label.lineWidth,rotated:e.label.rotated,haloColor:e.label.haloColor,haloSize:e.label.haloSize,xoffset:e.label.xoffset,yoffset:e.label.yoffset,verticalAlignment:e.label.verticalAlignment,horizontalAlignment:e.label.horizontalAlignment,font:{size:e.label.size,family:"Josefin Slab",weight:e.label.weight}},o=new L({geometry:x.geometry.extent.center,symbol:b,attributes:m}),(g=F.view.map.findLayerById(F.displayedLayerid))&&g.add(o),F.mapoverlayers.push(["smap-default",e.uuid,o])}})):"element"===I.type&&(this.mapoverlayers.filter(function(e){return e[1]===I.uuid}).forEach(function(e){var t=F.view.map.findLayerById(F.displayedLayerid);t&&t.remove(e[2])}),this.mapoverlayers=this.mapoverlayers.filter(function(e){return e[1]!==I.uuid}),"marker"===I.overlaytype.toLowerCase()?(r=void 0,r=I.symbol?I.symbol:"2d"===this.view.type?{type:"picture-marker",url:I.icon.image,width:I.icon.size.width,height:I.icon.size.height}:{type:"point-3d",symbolLayers:[{type:"icon",size:I.icon.size.width,resource:{href:I.icon.image}}]},(i=I.attributes).uuid=I.uuid,n=new L({geometry:new C({x:I.position[0],y:I.position[1],z:void 0===I.position[2]?0:I.position[2],spatialReference:this.view.spatialReference}),symbol:r,attributes:i}),z.push(n),this.mapoverlayers.push(["smap-default",I.uuid,n]),(S=this.view.map.findLayerById(this.displayedLayerid))&&S.add(n),I.label.visible&&(o=null,o=I.label.labelingInfo?I.label.labelingInfo:{type:I.label.type,text:I.label.text,color:I.label.color,angle:I.label.angle,backgroundColor:I.label.backgroundColor,borderLineColor:I.label.borderLineColor,borderLineSize:I.label.borderLineSize,kerning:I.label.kerning,lineHeight:I.label.lineHeight,lineWidth:I.label.lineWidth,rotated:I.label.rotated,haloColor:I.label.haloColor,haloSize:I.label.haloSize,xoffset:I.label.xoffset,yoffset:I.label.yoffset,verticalAlignment:I.label.verticalAlignment,horizontalAlignment:I.label.horizontalAlignment,font:{size:I.label.size,family:"Josefin Slab",weight:I.label.weight}},x=new L({geometry:new C({x:"3d"===this.view.type?I.position[0]+I.label.xoffset:I.position[0],y:"3d"===this.view.type?I.position[1]+I.label.yoffset:I.position[1],z:"3d"===this.view.type?I.position[2]+I.label.zoffset:I.position[2],spatialReference:this.view.spatialReference}),symbol:o,attributes:i}),(w=this.view.map.findLayerById(this.displayedLayerid))&&w.add(x),this.mapoverlayers.push(["smap-default",I.uuid,x]))):"polyline"===I.overlaytype.toLowerCase()?(l=null,l=I.symbol?I.symbol:{type:"simple-line",color:I.strokeColor,style:I.style,width:I.width,cap:I.cap,join:I.lineJoin},a=[],I.path.forEach(function(e){a.push([e.X,e.Y,e.Z])}),s=new R({hasZ:!1,hasM:!1,paths:a,spatialReference:this.view.spatialReference}),(c=I.attributes).uuid=I.uuid,u=new L({geometry:s,symbol:l,attributes:c}),z.push(u),this.mapoverlayers.push(["smap-default",I.uuid,u]),(w=this.view.map.findLayerById(this.displayedLayerid))&&w.add(u),I.label.visible&&(h=null,h=I.label.labelingInfo?I.label.labelingInfo:{type:I.label.type,text:I.label.text,color:I.label.color,angle:I.label.angle,backgroundColor:I.label.backgroundColor,borderLineColor:I.label.borderLineColor,borderLineSize:I.label.borderLineSize,kerning:I.label.kerning,lineHeight:I.label.lineHeight,lineWidth:I.label.lineWidth,rotated:I.label.rotated,haloColor:I.label.haloColor,haloSize:I.label.haloSize,xoffset:I.label.xoffset,yoffset:I.label.yoffset,verticalAlignment:I.label.verticalAlignment,horizontalAlignment:I.label.horizontalAlignment,font:{size:I.label.size,family:"Josefin Slab",weight:I.label.weight}},x=new L({geometry:u.geometry.extent.center,symbol:h,attributes:c}),(S=this.view.map.findLayerById(this.displayedLayerid))&&S.add(x),this.mapoverlayers.push(["smap-default",I.uuid,x]))):"polygon"===I.overlaytype.toLowerCase()?(v=void 0,v=I.symbol?I.symbol:"simple"===I.symboltype?{type:"simple-fill",color:I.fillColor,style:I.style,outline:{color:I.strokeColor,width:I.strokeWeight,style:I.strokestyle}}:{type:"picture-fill",url:I.url,width:I.picwidth,height:I.picheight,outline:{style:I.strokestyle,color:I.strokeColor,width:I.strokeWeight}},d=[],I.paths.forEach(function(e){d.push([e.X,e.Y,e.Z])}),p=new k({hasZ:!0,hasM:!0,rings:d,spatialReference:this.view.spatialReference}),(y=I.attributes).uuid=I.uuid,f=new L({geometry:p,symbol:v,attributes:y}),z.push(f),this.mapoverlayers.push(["smap-default",I.uuid,f]),(S=this.view.map.findLayerById(this.displayedLayerid))&&S.add(f),I.label.visible&&(h=null,h=I.label.labelingInfo?I.label.labelingInfo:{type:I.label.type,text:I.label.text,color:I.label.color,angle:I.label.angle,backgroundColor:I.label.backgroundColor,borderLineColor:I.label.borderLineColor,borderLineSize:I.label.borderLineSize,kerning:I.label.kerning,lineHeight:I.label.lineHeight,lineWidth:I.label.lineWidth,rotated:I.label.rotated,haloColor:I.label.haloColor,haloSize:I.label.haloSize,xoffset:I.label.xoffset,yoffset:I.label.yoffset,verticalAlignment:I.label.verticalAlignment,horizontalAlignment:I.label.horizontalAlignment,font:{size:I.label.size,family:"Josefin Slab",weight:I.label.weight}},x=new L({geometry:f.geometry.extent.center,symbol:h,attributes:y}),(w=this.view.map.findLayerById(this.displayedLayerid))&&w.add(x),this.mapoverlayers.push(["smap-default",I.uuid,x]))):"circle"===I.overlaytype.toLowerCase()&&(v=void 0,v=I.symbol?I.symbol:"simple"===I.symboltype?{type:"simple-fill",color:I.fillColor,style:I.style,outline:{color:I.strokeColor,width:I.strokeWeight,style:I.strokestyle}}:{type:"picture-fill",url:I.url,width:I.picwidth,height:I.picheight,outline:{style:I.strokestyle,color:I.strokeColor,width:I.strokeWeight}},I.attributes&&I.center&&I.radius&&((b=I.attributes).uuid=I.uuid,m=new L({geometry:new A({center:new C({x:I.center.X,y:I.center.Y,z:I.center.Z,spatialReference:this.view.spatialReference}),radius:I.radius,radiusUnit:I.radiusUnit,spatialReference:this.view.spatialReference}),symbol:v,attributes:b}),z.push(m),this.mapoverlayers.push(["smap-default",I.uuid,m]),(w=this.view.map.findLayerById(this.displayedLayerid))&&w.add(m),I.label.visible&&(g=null,g=I.label.labelingInfo?I.label.labelingInfo:{type:I.label.type,text:I.label.text,color:I.label.color,angle:I.label.angle,backgroundColor:I.label.backgroundColor,borderLineColor:I.label.borderLineColor,borderLineSize:I.label.borderLineSize,kerning:I.label.kerning,lineHeight:I.label.lineHeight,lineWidth:I.label.lineWidth,rotated:I.label.rotated,haloColor:I.label.haloColor,haloSize:I.label.haloSize,xoffset:I.label.xoffset,yoffset:I.label.yoffset,verticalAlignment:I.label.verticalAlignment,horizontalAlignment:I.label.horizontalAlignment,font:{size:I.label.size,family:"Josefin Slab",weight:I.label.weight}},x=new L({geometry:m.geometry.extent.center,symbol:g,attributes:b}),(S=this.view.map.findLayerById(this.displayedLayerid))&&S.add(x),this.mapoverlayers.push(["smap-default",I.uuid,x]))))),[2,new B.Promise(function(e,t){e(z)})]}})})},Dt.prototype.removeAll=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.removeAll(),this.mapoverlayers=[])},Dt.prototype.delete=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(this.view.map.remove(e),this.mapoverlayers=[])},Dt.prototype.show=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!0)},Dt.prototype.hide=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!1)},Dt.prototype.init=function(r){return Mt(this,void 0,void 0,function(){var t=this;return jt(this,function(e){return this.displayedLayerid=(new x).uuid,this.view=r,this.view.on(q.click,function(i){t.view.hitTest(i).then(function(r){return Mt(t,void 0,void 0,function(){var t;return jt(this,function(e){if(0<r.results.length){if(!r.results[0].graphic.layer)return[2];if(!(t=r.results[0].graphic.layer.id))return[2];t===this.displayedLayerid&&this.emit(q.click,r,i.mapPoint)}return[2]})})})}),this.view.on(q.pointermove,function(i){t.view.hitTest(i).then(function(r){return Mt(t,void 0,void 0,function(){var t;return jt(this,function(e){if(0<r.results.length){if(!r.results[0].graphic.layer)return[2];if(!(t=r.results[0].graphic.layer.id))return[2];t===this.displayedLayerid&&this.emit(q.pointermove,r,this.view.toMap({x:i.x,y:i.y}))}return[2]})})})}),[2]})})},Dt);function Dt(e){var t=Pt.call(this)||this;return t.displayedLayerid="",t.view=null,t.mapoverlayers=[],t.init(e),t}var Tt,Zt,Gt=(Tt=function(e,t){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Tt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ht=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},qt=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Jt=(Gt(Xt,Zt=e),Xt.prototype.add=function(i){var n=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/734A3D86-CF65-FC97-E8B7B8A0197A043B"]).then(function(e){var t=e[0],r={container:document.getElementById(i.container),radius:i.radius||30,maxOpacity:i.maxOpacity||.8,minOpacity:i.minOpacity||0,blur:i.blur||.7,gradient:i.gradient||{0:"rgb(0,0,0)",.3:"rgb(0,0,255)",.8:"rgb(0,255,0)",.98:"rgb(255,255,0)",1:"rgb(255,0,0)"}};n.heatmaplayer=new t(n.view,r,i.datas,i.h337,i.id),n.heatmaplayer.addData()})},Xt.prototype.remove=function(e){var t=document.getElementsByClassName("esri-view-surface")[0],r=document.getElementById(e);null!=r&&t.removeChild(r)},Xt.prototype.refreshdata=function(e){this.heatmaplayer.setVisible(!0),this.heatmaplayer.freshenLayerData(e)},Xt.prototype.show=function(){this.heatmaplayer.setVisible(!0)},Xt.prototype.hide=function(){this.heatmaplayer.setVisible(!1)},Xt.prototype.init=function(t){return Ht(this,void 0,void 0,function(){return qt(this,function(e){return this.displayedLayerid=(new x).uuid,this.view=t,[2]})})},Xt);function Xt(e){var t=Zt.call(this)||this;return t.displayedLayerid="",t.view=null,t.heatmaplayer=null,t.init(e),t}var Yt,Ut,Nt=(Yt=function(e,t){return(Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Yt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Vt=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},$t=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Qt=(Nt(Kt,Ut=e),Kt.prototype.add=function(i){var n=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/90ABC595-73BF-08E9-0567CA1FA6278EEC","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1];n.heatMap3dLayerRenderer=new t(n.view,i.data,i.options),r.add(n.view,n.heatMap3dLayerRenderer)}).catch(function(e){console.error(e)})},Kt.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.heatMap3dLayerRenderer&&t.remove(r.view,r.heatMap3dLayerRenderer)})},Kt.prototype.setMaterialColor=function(e){this.heatMap3dLayerRenderer&&this.heatMap3dLayerRenderer.setMaterialColor(e)},Kt.prototype.setwireframe=function(){this.heatMap3dLayerRenderer&&this.heatMap3dLayerRenderer.setwireframe()},Kt.prototype.setaltitude=function(e){this.heatMap3dLayerRenderer&&this.heatMap3dLayerRenderer.setaltitude(e)},Kt.prototype.setscaleZ=function(e){this.heatMap3dLayerRenderer&&this.heatMap3dLayerRenderer.setscaleZ(e)},Kt.prototype.setopacity=function(e){this.heatMap3dLayerRenderer&&this.heatMap3dLayerRenderer.setopacity(e)},Kt.prototype.init=function(t){return Vt(this,void 0,void 0,function(){return $t(this,function(e){return this.view=t,[2]})})},Kt);function Kt(e){var t=Ut.call(this)||this;return t.heatMap3dLayerRenderer=null,t.view=null,t.init(e),t}var er=(tr.shqxboundary="qx_boundary",tr.shjdboundary="jd_boundary",tr.shjwhboundary="jwh_boundary",tr);function tr(){}var rr,ir,nr=(rr=function(e,t){return(rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}rr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),or=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},lr=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ar=(nr(sr,ir=e),sr.prototype.add=function(i){var n=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/LayerSkyRenderer","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1];n.cloudRendererRenderer=new t(n.view,i.url,i.options),r.add(n.view,n.cloudRendererRenderer)}).catch(function(e){console.error(e)})},sr.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.cloudRendererRenderer&&t.remove(r.view,r.cloudRendererRenderer)})},sr.prototype.init=function(t){return or(this,void 0,void 0,function(){return lr(this,function(e){return this.view=t,[2]})})},sr);function sr(e){var t=ir.call(this)||this;return t.cloudRendererRenderer=null,t.view=null,t.init(e),t}var cr,ur,dr=(cr=function(e,t){return(cr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}cr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),pr=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},yr=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},fr=(dr(hr,ur=e),hr.prototype.add=function(y){var f=this;P(["esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Polygon","esri/geometry/geometryEngineAsync","esri/geometry/SpatialReference","esri/Color"]).then(function(e){var c=e[0],t=e[1],r=e[2],u=e[3],d=(e[4],e[5]),i=null;"qx_boundary"!==y.boundaryType&&"jd_boundary"!==y.boundaryType&&"jwh_boundary"!==y.boundaryType||(i=f.view.map.findLayerById(y.boundaryType));var p=f.view.map.findLayerById(f.displayedLayerid);if(null==p&&(p=new t({id:f.displayedLayerid,title:y.boundaryType+"遮罩层",listMode:"hide"}),f.view.map.add(p)),p.removeAll(),y.inputgeometry){if(null===(i=f.view.map.findLayerById("qx_boundary")))return;var n=new r({rings:y.inputgeometry,spatialReference:f.view.spatialReference}),o=i.fullExtent;o.spatialReference=f.view.spatialReference;var s=n;s.spatialReference=f.view.spatialReference,u.buffer(s,y.boundarydistance,"meters").then(function(e){u.difference(o,e).then(function(e){var t;t="3d"===f.view.type?y.symbol?{type:"polygon-3d",symbolLayers:[{type:"extrude",material:{color:y.maskColor},size:y.symbol.size,edges:{type:"solid",color:y.maskColor}}]}:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:y.maskColor},outline:{color:"white",size:"0px"}}]}:{type:"simple-fill",color:y.maskColor,style:"solid",outline:{color:y.maskColor,width:1}};var r=new c({geometry:e,symbol:t});p.add(r);for(var n=void 0===y.bounarycount?30:y.bounarycount,o=Math.ceil(y.boundarydistance/n),l=new d(y.boundaryColor).toRgba(),i=function(i){u.buffer(s,i*n,"meters").then(function(t){u.buffer(s,(i-1)*n,"meters").then(function(e){u.difference(t,e).then(function(e){var t;l[3]=1/o*i,t="3d"===f.view.type?y.symbol?{type:"polygon-3d",symbolLayers:[{type:"extrude",material:{color:l},size:y.symbol.size,edges:{type:"solid",color:l}}]}:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:l},outline:{color:"white",size:"0px"}}]}:{type:"simple-fill",color:l,style:"solid",outline:{color:l,width:1}};var r=new c({geometry:e,symbol:t});p.add(r)})})})},a=1;a<=o;a++)i(a)})})}else{if(null===i)return;var l=i.createQuery();l.where=y.boundaryDefinition,i.queryFeatures(l).then(function(e){if(e.features.length){var t=i.fullExtent;t.spatialReference=f.view.spatialReference;var s=e.features[0].geometry;s.spatialReference=f.view.spatialReference,u.buffer(s,y.boundarydistance,"meters").then(function(e){u.difference(t,e).then(function(e){var t;t="3d"===f.view.type?y.symbol?{type:"polygon-3d",symbolLayers:[{type:"extrude",material:{color:y.maskColor},size:y.symbol.size,edges:{type:"solid",color:y.maskColor}}]}:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:y.maskColor},outline:{color:"white",size:"0px"}}]}:{type:"simple-fill",color:y.maskColor,style:"solid",outline:{color:y.maskColor,width:1}};var r=new c({geometry:e,symbol:t});p.add(r);for(var n=void 0===y.bounarycount?30:y.bounarycount,o=Math.ceil(y.boundarydistance/n),l=new d(y.boundaryColor).toRgba(),i=function(i){u.buffer(s,i*n,"meters").then(function(t){u.buffer(s,(i-1)*n,"meters").then(function(e){u.difference(t,e).then(function(e){var t;l[3]=1/o*i,t="3d"===f.view.type?y.symbol?{type:"polygon-3d",symbolLayers:[{type:"extrude",material:{color:l},size:y.symbol.size,edges:{type:"solid",color:l}}]}:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:l},outline:{color:"white",size:"0px"}}]}:{type:"simple-fill",color:l,style:"solid",outline:{color:l,width:1}};var r=new c({geometry:e,symbol:t});p.add(r)})})})},a=1;a<=o;a++)i(a)})})}})}})},hr.prototype.remove=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&this.view.map.remove(e)},hr.prototype.show=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!0)},hr.prototype.hide=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!1)},hr.prototype.init=function(t){return pr(this,void 0,void 0,function(){return yr(this,function(e){return this.displayedLayerid=(new x).uuid,this.view=t,[2]})})},hr);function hr(e){var t=ur.call(this)||this;return t.displayedLayerid="",t.view=null,t.init(e),t}var vr,br,mr=(vr=function(e,t){return(vr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}vr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),wr=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},gr=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},xr=(mr(Lr,br=e),Lr.prototype.circle=function(){var g=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Point","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],h=e[1],r=e[2],v=e[3],b=e[4];g.drawtool=new t({view:g.view}),g.drawtool.reset();var m=g.view.map.findLayerById(g.displayedLayerid);null==m&&(m=new r({id:g.displayedLayerid,title:"测量结果显示层",listMode:"hide"}),g.view.map.add(m));var i=(new x).uuid,w=g.view.map.findLayerById(i);w||(w=new r({id:g.displayedLayerid,title:"测量圆实时追踪显示层",listMode:"hide"}),g.view.map.add(w));var n=g.drawtool.create("circle",{mode:"click"});g.view.focus(),n.on("vertex-add",function(e){if(2===e.vertices.length){w.removeAll();var t=new v({x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:g.view.spatialReference}),r=new v({x:e.vertices[1][0],y:e.vertices[1][1],spatialReference:g.view.spatialReference}),i=new h({geometry:{type:"polyline",paths:[[e.vertices[0],e.vertices[1]]],spatialReference:g.view.spatialReference},symbol:g.polylinesymbol}),n=b.geodesicLength(i.geometry,"meters"),o=b.buffer(t,n,"meters"),l=b.geodesicArea(o,"square-meters"),a=new h({geometry:o,symbol:g.polygonsymbol}),s=g.textsymbol,c=1e3<n?"半径:"+(n/1e3).toFixed(3)+"千米":"半径:"+parseFloat(n).toFixed(3)+"米";s.text=c;var u=new h({geometry:r,symbol:s}),d=g.textsymbol,p=1e5<l?"面积:"+(l/1e6).toFixed(3)+"平千方米":"面积:"+parseFloat(l).toFixed(3)+"平方米";d.text=p;var y=new h({geometry:t,symbol:d});w.add(a),w.add(i),w.add(u),w.add(y)}}),n.on("vertex-remove",function(e){console.log(e)}),n.on("cursor-update",function(e){if(2===e.vertices.length){w.removeAll();var t=new v({x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:g.view.spatialReference}),r=new v({x:e.vertices[1][0],y:e.vertices[1][1],spatialReference:g.view.spatialReference}),i=new h({geometry:{type:"polyline",paths:[[e.vertices[0],e.vertices[1]]],spatialReference:g.view.spatialReference},symbol:g.polylinesymbol}),n=b.geodesicLength(i.geometry,"meters"),o=b.buffer(t,n,"meters"),l=b.geodesicArea(o,"square-meters"),a=new h({geometry:o,symbol:g.polygonsymbol}),s=g.textsymbol,c=1e3<n?"半径:"+(n/1e3).toFixed(3)+"千米":"半径:"+parseFloat(n).toFixed(3)+"米";s.text=c;var u=new h({geometry:r,symbol:s}),d=g.textsymbol,p=1e5<l?"面积:"+(l/1e6).toFixed(3)+"平千方米":"面积:"+parseFloat(l).toFixed(3)+"平方米";d.text=p;var y=new h({geometry:t,symbol:d});w.add(a),w.add(i),w.add(u),w.add(y)}}),n.on("redo",function(e){console.log(e)}),n.on("undo",function(e){console.log(e)}),n.on("draw-complete",function(e){if(2===e.vertices.length){var t=new v({x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:g.view.spatialReference}),r=new v({x:e.vertices[1][0],y:e.vertices[1][1],spatialReference:g.view.spatialReference}),i=new h({geometry:{type:"polyline",paths:[[e.vertices[0],e.vertices[1]]],spatialReference:g.view.spatialReference},symbol:g.polylinesymbol}),n=b.geodesicLength(i.geometry,"meters"),o=b.buffer(t,n,"meters"),l=b.geodesicArea(o,"square-meters"),a=new h({geometry:o,symbol:g.polygonsymbol}),s=g.textsymbol,c=1e3<n?"半径:"+(n/1e3).toFixed(3)+"千米":"半径:"+parseFloat(n).toFixed(3)+"米";s.text=c;var u=new h({geometry:r,symbol:s}),d=g.textsymbol,p=1e5<l?"面积:"+(l/1e6).toFixed(3)+"平千方米":"面积:"+parseFloat(l).toFixed(3)+"平方米";d.text=p;var y=new h({geometry:t,symbol:d});g.view.map.remove(w),m.add(a),m.add(i),m.add(u),m.add(y);var f={radiusdistance:n,circlearea:l};g.emit("measurementcomplete",a,f,"circle")}})})},Lr.prototype.rectangle=function(){var _=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Point","esri/geometry/Polygon","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],A=e[1],r=e[2],z=e[3],S=e[4],F=e[5];_.drawtool=new t({view:_.view}),_.drawtool.reset();var I=_.view.map.findLayerById(_.displayedLayerid);I||(I=new r({id:_.displayedLayerid,title:"测量结果显示层",listMode:"hide"}),_.view.map.add(I));var i=(new x).uuid,E=_.view.map.findLayerById(i);null==E&&(E=new r({id:_.displayedLayerid,title:"测量矩形实时追踪显示层",listMode:"hide"}),_.view.map.add(E));var n=_.drawtool.create("rectangle",{mode:"click"});_.view.focus(),n.on("vertex-add",function(e){if(2===e.vertices.length){E.removeAll();var t=e.vertices[0][0]>e.vertices[1][0]?e.vertices[1][0]:e.vertices[0][0],r=e.vertices[0][1]>e.vertices[1][1]?e.vertices[1][1]:e.vertices[0][1],i=e.vertices[0][0]>e.vertices[1][0]?e.vertices[0][0]:e.vertices[1][0],n=e.vertices[0][1]>e.vertices[1][1]?e.vertices[0][1]:e.vertices[1][1],o=new S({hasZ:!0,hasM:!0,rings:[[[t,r],[i,r],[i,n],[t,n],[t,r]]],spatialReference:_.view.spatialReference}),l=new A({geometry:o,symbol:_.polygonsymbol}),a=new z({x:t+(i-t)/2,y:r,spatialReference:_.view.spatialReference}),s=new z({x:t,y:r,spatialReference:_.view.spatialReference}),c=new z({x:i,y:t,spatialReference:_.view.spatialReference}),u=F.distance(s,c,"meters"),d=_.textsymbol,p=1e3<u?"长度:"+(u/1e3).toFixed(3)+"千米":"长度:"+u.toFixed(3)+"米";d.text=p;var y=new A({geometry:a,symbol:d}),f=new z({x:i,y:r+(n-r)/2,spatialReference:_.view.spatialReference}),h=new z({x:i,y:r,spatialReference:_.view.spatialReference}),v=new z({x:i,y:n,spatialReference:_.view.spatialReference}),b=F.distance(h,v,"meters"),m=_.textsymbol,w=1e3<b?"宽度:"+(b/1e3).toFixed(3)+"千米":"宽度:"+b.toFixed(3)+"米";m.text=w;var g=new A({geometry:f,symbol:m}),x=new z({x:t+(i-t)/2,y:r+(n-r)/2,spatialReference:_.view.spatialReference}),L=_.textsymbol,C=u*b,R=1e5<C?"面积:"+(C/1e6).toFixed(3)+"平方千米":"面积:"+C.toFixed(3)+"平方米";L.text=R;var k=new A({geometry:x,symbol:L});E.add(y),E.add(g),E.add(k),E.add(l)}}),n.on("vertex-remove",function(e){console.log(e)}),n.on("cursor-update",function(e){if(2===e.vertices.length){E.removeAll();var t=e.vertices[0][0]>e.vertices[1][0]?e.vertices[1][0]:e.vertices[0][0],r=e.vertices[0][1]>e.vertices[1][1]?e.vertices[1][1]:e.vertices[0][1],i=e.vertices[0][0]>e.vertices[1][0]?e.vertices[0][0]:e.vertices[1][0],n=e.vertices[0][1]>e.vertices[1][1]?e.vertices[0][1]:e.vertices[1][1],o=new S({hasZ:!0,hasM:!0,rings:[[[t,r],[i,r],[i,n],[t,n],[t,r]]],spatialReference:_.view.spatialReference}),l=new A({geometry:o,symbol:_.polygonsymbol}),a=new z({x:t+(i-t)/2,y:r,spatialReference:_.view.spatialReference}),s=new z({x:t,y:r,spatialReference:_.view.spatialReference}),c=new z({x:i,y:r,spatialReference:_.view.spatialReference}),u=F.distance(s,c,"meters"),d=_.textsymbol,p=1e3<u?"长度:"+(u/1e3).toFixed(3)+"千米":"长度:"+u.toFixed(3)+"米";d.text=p;var y=new A({geometry:a,symbol:d}),f=new z({x:i,y:r+(n-r)/2,spatialReference:_.view.spatialReference}),h=new z({x:i,y:r,spatialReference:_.view.spatialReference}),v=new z({x:i,y:n,spatialReference:_.view.spatialReference}),b=F.distance(h,v,"meters"),m=_.textsymbol,w=1e3<b?"宽度:"+(b/1e3).toFixed(3)+"千米":"宽度:"+b.toFixed(3)+"米";m.text=w;var g=new A({geometry:f,symbol:m}),x=new z({x:t+(i-t)/2,y:r+(n-r)/2,spatialReference:_.view.spatialReference}),L=_.textsymbol,C=u*b,R=1e5<C?"面积:"+(C/1e6).toFixed(3)+"平方千米":"面积:"+C.toFixed(3)+"平方米";L.text=R;var k=new A({geometry:x,symbol:L});E.add(y),E.add(g),E.add(k),E.add(l)}}),n.on("redo",function(e){console.log(e)}),n.on("undo",function(e){console.log(e)}),n.on("draw-complete",function(e){if(2===e.vertices.length){var t=e.vertices[0][0]>e.vertices[1][0]?e.vertices[1][0]:e.vertices[0][0],r=e.vertices[0][1]>e.vertices[1][1]?e.vertices[1][1]:e.vertices[0][1],i=e.vertices[0][0]>e.vertices[1][0]?e.vertices[0][0]:e.vertices[1][0],n=e.vertices[0][1]>e.vertices[1][1]?e.vertices[0][1]:e.vertices[1][1],o=new S({hasZ:!0,hasM:!0,rings:[[[t,r],[i,r],[i,n],[t,n],[t,r]]],spatialReference:_.view.spatialReference}),l=new A({geometry:o,symbol:_.polygonsymbol}),a=new z({x:t+(i-t)/2,y:r,spatialReference:_.view.spatialReference}),s=new z({x:t,y:r,spatialReference:_.view.spatialReference}),c=new z({x:i,y:r,spatialReference:_.view.spatialReference}),u=F.distance(s,c,"meters"),d=_.textsymbol,p=1e3<u?"长度:"+(u/1e3).toFixed(3)+"千米":"长度:"+u.toFixed(3)+"米";d.text=p;var y=new A({geometry:a,symbol:d}),f=new z({x:i,y:r+(n-r)/2,spatialReference:_.view.spatialReference}),h=new z({x:i,y:r,spatialReference:_.view.spatialReference}),v=new z({x:i,y:n,spatialReference:_.view.spatialReference}),b=F.distance(h,v,"meters"),m=_.textsymbol,w=1e3<b?"宽度:"+(b/1e3).toFixed(3)+"千米":"宽度:"+b.toFixed(3)+"米";m.text=w;var g=new A({geometry:f,symbol:m}),x=new z({x:t+(i-t)/2,y:r+(n-r)/2,spatialReference:_.view.spatialReference}),L=_.textsymbol,C=u*b,R=1e5<C?"面积:"+(C/1e6).toFixed(3)+"平方千米":"面积:"+C.toFixed(3)+"平方米";L.text=R;var k=new A({geometry:x,symbol:L});_.view.map.remove(E),I.add(y),I.add(g),I.add(k),I.add(l),_.emit("measurementcomplete",l,{length:u,width:b,area:b*u},"rectangle")}})})},Lr.prototype.Point=function(){var c=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer"]).then(function(e){var t=e[0],l=e[1],r=e[2];c.drawtool=new t({view:c.view}),c.drawtool.reset();var a=c.view.map.findLayerById(c.displayedLayerid);a||(a=new r({id:c.displayedLayerid,title:"测量结果显示层",listMode:"hide"}),c.view.map.add(a));var i=(new x).uuid,s=c.view.map.findLayerById(i);null==s&&(s=new r({id:c.displayedLayerid,title:"测量点移动实时追踪显示层",listMode:"hide"}),c.view.map.add(s));var n=c.drawtool.create("point",{mode:"click"});c.view.focus(),n.on("vertex-add",function(e){console.log(e)}),n.on("vertex-remove",function(e){console.log(e)}),n.on("cursor-update",function(e){s.removeAll();var t={type:"point",x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:c.view.spatialReference},r=new l({geometry:t,symbol:c.marksymbol});s.add(r);var i=c.textsymbol;i.text="("+parseFloat(e.vertices[0][0]).toFixed(3)+","+parseFloat(e.vertices[0][1]).toFixed(3)+")";var n=new l({geometry:t,symbol:i});s.add(n)}),n.on("redo",function(e){console.log(e)}),n.on("undo",function(e){console.log(e)}),n.on("draw-complete",function(e){var t={type:"point",x:e.vertices[0][0],y:e.vertices[0][1],spatialReference:c.view.spatialReference},r=new l({geometry:t,symbol:c.marksymbol}),i=c.textsymbol;i.text="("+parseFloat(e.vertices[0][0]).toFixed(3)+","+parseFloat(e.vertices[0][1]).toFixed(3)+")";var n=new l({geometry:t,symbol:i});c.view.map.remove(s),a.add(n),a.add(r);var o="("+parseFloat(e.vertices[0][0]).toFixed(3)+","+parseFloat(e.vertices[0][0]).toFixed(3)+")";c.emit("measurementcomplete",r,o,"point")})})},Lr.prototype.Multipoint=function(){var d=this;P(["esri/views/draw/Draw","esri/views/draw/PointDrawAction","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Polygon","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],a=(e[1],e[2]),r=e[3];e[4],e[5],d.drawtool=new t({view:d.view}),d.drawtool.reset();var s=d.view.map.findLayerById(d.displayedLayerid);s||(s=new r({id:d.displayedLayerid,title:"测量结果显示层",listMode:"hide"}),d.view.map.add(s));var i=(new x).uuid,c=d.view.map.findLayerById(i);null==c&&(c=new r({id:d.displayedLayerid,title:"测量多点临时显示层",listMode:"hide"}),d.view.map.add(c));var n=(new x).uuid,u=d.view.map.findLayerById(n);null==u&&(u=new r({id:d.displayedLayerid,title:"测量多点移动追踪显示层",listMode:"hide"}),d.view.map.add(u));var o=d.drawtool.create("multipoint",{mode:"click"});d.view.focus(),o.on("vertex-add",function(e){c.removeAll(),e.vertices.map(function(e){var t={type:"point",x:e[0],y:e[1],spatialReference:d.view.spatialReference},r=new a({geometry:t,symbol:d.marksymbol}),i=d.textsymbol;i.text="("+parseFloat(e[0]).toFixed(3)+","+parseFloat(e[1]).toFixed(3)+")";var n=new a({geometry:t,symbol:i});c.add(n),c.add(r)})}),o.on("vertex-remove",function(e){console.log(e)}),o.on("cursor-update",function(e){u.removeAll(),e.vertices.map(function(e){var t={type:"point",x:e[0],y:e[1],spatialReference:d.view.spatialReference},r=new a({geometry:t,symbol:d.marksymbol}),i=d.textsymbol;i.text="("+parseFloat(e[0]).toFixed(3)+","+parseFloat(e[1]).toFixed(3)+")";var n=new a({geometry:t,symbol:i});u.add(n),u.add(r)})}),o.on("redo",function(e){console.log(e)}),o.on("undo",function(e){console.log(e)}),o.on("draw-complete",function(e){d.view.map.remove(c),d.view.map.remove(u);var o=[],l=[];e.vertices.map(function(e){var t={type:"point",x:e[0],y:e[1],spatialReference:d.view.spatialReference},r=new a({geometry:t,symbol:d.marksymbol}),i=d.textsymbol;i.text="("+parseFloat(e[0]).toFixed(3)+","+parseFloat(e[1]).toFixed(3)+")";var n=new a({geometry:t,symbol:i});s.add(r),s.add(n),o.push(r),l.push(e)}),d.emit("measurementcomplete",o,l,"multipoint")})})},Lr.prototype.drawPolyline=function(){var v=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],p=e[1],r=e[2],y=e[3];v.drawtool=new t({view:v.view}),v.drawtool.reset();var f=v.view.map.findLayerById(v.displayedLayerid);f||(f=new r({id:v.displayedLayerid,title:"测量结果显示层",listMode:"hide"}),v.view.map.add(f));var i=(new x).uuid,h=v.view.map.findLayerById(i);null==h&&(h=new r({id:v.displayedLayerid,title:"测量多边线实时追踪显示层",listMode:"hide"}),v.view.map.add(h));var n=v.drawtool.create("polyline");v.view.focus(),n.on(["vertex-add","vertex-remove","cursor-update","redo","undo"],function(e){if(1<e.vertices.length){var t=e.vertices;h.removeAll();var r=new p({geometry:{type:"polyline",paths:t,spatialReference:v.view.spatialReference},symbol:v.polylinesymbol}),i=function(e){var t=e.clone(),r=t.removePoint(0,t.paths[0].length-1),i=t.getPoint(0,t.paths[0].length-1);return{type:"polyline",spatialReference:v.view.spatialReference,hasZ:!1,paths:[[[i.x,i.y],[r.x,r.y]]]}};if(function(e){if(!(e.paths[0].length<3)){var t=e.clone(),r=i(e);return t.removePoint(0,t.paths[0].length-1),y.crosses(r,t)}}(r.geometry)){var n=new p({geometry:i(r.geometry),symbol:v.polylinesymbol});n&&h.addMany([r,n]),n&&e.preventDefault()}else h.add(r);var o=v.textsymbol,l=y.geodesicLength(r.geometry,"meters"),a=1e3<l?"长度:"+(l/1e3).toFixed(3)+"千米":"长度:"+l.toFixed(3)+"米";o.text=a;var s=r.geometry.clone(),c=s.removePoint(0,s.paths[0].length-1),u=new p({geometry:c,symbol:o});h.add(u)}}),n.on("draw-complete",function(e){if(1<e.vertices.length){var t=e.vertices;h.removeAll();var r=new p({geometry:{type:"polyline",paths:t,spatialReference:v.view.spatialReference},symbol:v.polylinesymbol}),i=function(e){var t=e.clone(),r=t.removePoint(0,t.paths[0].length-1),i=t.getPoint(0,t.paths[0].length-1);return{type:"polyline",spatialReference:v.view.spatialReference,hasZ:!1,paths:[[[i.x,i.y],[r.x,r.y]]]}},n=null;if(function(e){if(!(e.paths[0].length<3)){var t=e.clone(),r=i(e);return t.removePoint(0,t.paths[0].length-1),y.crosses(r,t)}}(r.geometry)){var o=new p({geometry:i(r.geometry),symbol:v.polylinesymbol});o&&(f.addMany([r,o]),n=new p({geometry:y.union(r.geometry,o.geometry),symbol:v.polylinesymbol})),o&&e.preventDefault()}else n=r,f.add(r);var l=v.textsymbol,a=y.geodesicLength(r.geometry,"meters"),s=1e3<a?"长度:"+(a/1e3).toFixed(3)+"千米":"长度:"+a.toFixed(3)+"米";l.text=s;var c=r.geometry.clone(),u=c.removePoint(0,c.paths[0].length-1),d=new p({geometry:u,symbol:l});f.add(d),v.view.map.remove(h),v.emit("measurementcomplete",n,{distance:a},"polyline")}})})},Lr.prototype.drawPolygon=function(){var p=this;P(["esri/views/draw/Draw","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/geometryEngine"]).then(function(e){var t=e[0],s=e[1],r=e[2],c=e[3];p.drawtool=new t({view:p.view}),p.drawtool.reset();var u=p.view.map.findLayerById(p.displayedLayerid);u||(u=new r({id:p.displayedLayerid,title:"测量结果显示层",listMode:"hide"}),p.view.map.add(u));var i=(new x).uuid,d=p.view.map.findLayerById(i);null==d&&(d=new r({id:p.displayedLayerid,title:"测量多边形实时追踪显示层",listMode:"hide"}),p.view.map.add(d));var n=p.drawtool.create("polygon");p.view.focus(),n.on(["vertex-add","vertex-remove","cursor-update","redo","undo"],function(e){var t=e.vertices;d.removeAll();var r={type:"polygon",rings:t,spatialReference:p.view.spatialReference},i=new s({geometry:r,symbol:p.polygonsymbol});if(3<e.vertices.length){var n=c.geodesicArea(i.geometry,"square-meters"),o=p.textsymbol,l=1e5<Math.abs(n)?"面积:"+(Math.abs(n)/1e6).toFixed(3)+"平方千米":"面积:"+Math.abs(n).toFixed(3)+"平方米";o.text=l;var a=new s({geometry:i.geometry.extent.center,symbol:o});d.add(a)}d.add(i)}),n.on("draw-complete",function(e){var t=e.vertices;d.removeAll();var r={type:"polygon",rings:t,spatialReference:p.view.spatialReference},i=new s({geometry:r,symbol:p.polygonsymbol}),n=c.geodesicArea(i.geometry,"square-meters"),o=p.textsymbol,l=1e5<Math.abs(n)?"面积:"+(Math.abs(n)/1e6).toFixed(3)+"平方千米":"面积:"+Math.abs(n).toFixed(3)+"平方米";o.text=l;var a=new s({geometry:i.geometry.extent.center,symbol:o});p.view.map.remove(d),u.add(a),u.add(i),p.emit("measurementcomplete",i,{area:n},"polygon")})})},Lr.prototype.reset=function(){this.drawtool&&this.drawtool.reset()},Lr.prototype.clean=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&this.view.map.remove(e)},Lr.prototype.show=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!0)},Lr.prototype.hide=function(){var e=this.view.map.findLayerById(this.displayedLayerid);e&&(e.visible=!1)},Lr.prototype.init=function(r){return wr(this,void 0,void 0,function(){var t=this;return gr(this,function(e){return this.displayedLayerid=(new x).uuid,this.view=r,"2d"===this.view.type?(this.polygonsymbol={type:"simple-fill",color:[255,255,255,.6],style:"solid",outline:{color:[255,255,0,.8],width:2}},this.polylinesymbol={type:"simple-line",color:[255,255,255,.6],width:"4px",style:"solid"},this.marksymbol={type:"simple-marker",style:"circle",color:[255,255,0,.6],size:"24px",outline:{color:[255,255,0,.8],width:2}}):(this.polygonsymbol={type:"polygon-3d",symbolLayers:[{type:"extrude",castShadows:!1,size:10,material:{color:[255,255,255,.4]},edges:{type:"solid",color:[50,50,50,.5]}}]},this.polylinesymbol={type:"line-3d",symbolLayers:[{type:"path",anchor:"center",Values:"center",profile:"quad",width:2,height:10,material:{color:[255,255,255,.4]},cap:"square",join:"miter",castShadows:!1,profileRotation:"heading"}]},this.marksymbol={type:"point-3d",symbolLayers:[{type:"object",width:20,height:20,depth:20,resource:{primitive:"sphere"},material:{color:[0,0,255,.8]}}],verticalOffset:{screenLength:60,maxWorldLength:1e3,minWorldLength:20},callout:{type:"line",size:1.5,color:"white",border:{color:"black"}}}),this.textsymbol={type:"text",color:"white",angle:0,text:"",xoffset:60,yoffset:10,horizontalAlignment:"right",verticalAlignment:"bottom",font:{size:12,family:"Josefin Slab",weight:"bold"}},this.view.on(q.click,function(e){t.view.hitTest(e).then(function(e){return wr(t,void 0,void 0,function(){return gr(this,function(e){return[2]})})})}),this.view.on(q.pointermove,function(e){t.view.hitTest(e).then(function(e){return wr(t,void 0,void 0,function(){return gr(this,function(e){return[2]})})})}),[2]})})},Lr);function Lr(e){var t=br.call(this)||this;return t.marksymbol=null,t.polylinesymbol=null,t.polygonsymbol=null,t.textsymbol=null,t.displayedLayerid="",t.view=null,t.drawtool=null,t.drawlayerscollection=[],t.init(e),t}var Cr,Rr,kr=(Cr=function(e,t){return(Cr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Cr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ar=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},zr=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Sr=(kr(Fr,Rr=e),Fr.prototype.add=function(n){var o=this;void 0===n&&(n={}),P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/B622344F-BB19-15F1-3920E863621B4D9B","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1];if(n.paths){var i=new t(o.view,n.paths,n.width,n.color,n.opacity,n.dash,n.rest,n.linesegment,n.linesegmentfade);r.add(o.view,i),o.meshLineRendererArray.push([(new x).uuid,i])}}).catch(function(e){console.error(e)})},Fr.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.meshLineRendererArray.map(function(e){t.remove(r.view,e[1])}),r.meshLineRendererArray=[]})},Fr.prototype.init=function(t){return Ar(this,void 0,void 0,function(){return zr(this,function(e){return this.view=t,[2]})})},Fr);function Fr(e){var t=Rr.call(this)||this;return t.meshLineRendererArray=[],t.view=null,t.init(e),t}var Ir,Er,_r=(Ir=function(e,t){return(Ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Ir(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Br=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Pr=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Or=(_r(Mr,Er=e),Mr.prototype.add=function(o){var l=this;void 0===o&&(o={}),P(["esri/layers/599EFB79-18C9-DC0A-E2C9FC2F2316C660"]).then(function(e){var t=e[0],r=[];o.datas.forEach(function(e,t){r.push({name:e[0]+" Top10",type:"lines",coordinateSystem:"arcgis",zlevel:1,effect:{show:!0,period:6,trailLength:.7,color:"#fff",symbolSize:3},lineStyle:{normal:{color:o.color[t],width:0,curveness:.2}},data:l.convertData(e[1],o.geoCoordMap)},{name:e[0]+" Top10",type:"lines",coordinateSystem:"arcgis",zlevel:2,symbol:["none","arrow"],symbolSize:10,effect:{show:!0,period:6,trailLength:0,symbol:o.planePath,symbolSize:15},lineStyle:{normal:{color:o.color[t],width:1,opacity:.6,curveness:.2}},data:l.convertData(e[1],o.geoCoordMap)},{name:e[0]+" Top10",type:"effectScatter",coordinateSystem:"arcgis",zlevel:2,rippleEffect:{brushType:"stroke"},legendHoverLink:!0,hoverAnimation:!0,symbol:o.symbol,label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:function(e){return e[2]/8},itemStyle:{normal:{color:o.color[t],shadowBlur:10,shadowColor:"#333"}},data:e[1].map(function(e){return{name:e[1].name,value:o.geoCoordMap[e[1].name].concat([e[1].value])}})})});var i=new t(l.view,"",o.id),n={title:{text:"",subtext:"",left:"center",textStyle:{color:"#fff"}},series:r};i.setChartOption(n)})},Mr.prototype.remove=function(e){var t=document.getElementsByClassName("esri-view-surface")[0],r=document.getElementById(e);null!=r&&t.removeChild(r)},Mr.prototype.convertData=function(e,t){for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i],l=t[o[0].name],a=t[o[1].name];l&&a&&r.push({fromName:o[0].name,toName:o[1].name,coords:[l,a],value:o[1].value})}return r},Mr.prototype.getAPIScript=function(e){return document.querySelector("script["+e+"]")},Mr.prototype.loadAPIScript=function(n,o){var l=this;return new B.Promise(function(e,t){var r=l.getAPIScript(n);if(r){var i=r.getAttribute("src");i!==o?t(new Error("The echartgl is already loaded ("+i+").")):l.handleScriptLoad(r,e,t)}else r=l.createScript(n,o),l.handleScriptLoad(r,function(){r.setAttribute(n,"loaded"),e(r)},t),document.head.appendChild(r)})},Mr.prototype.createScript=function(e,t){var r=document.createElement("script");return r.type="text/javascript",r.src=t,r.setAttribute(e,"loading"),r},Mr.prototype.handleScriptLoad=function(e,t,r){var i;r&&(i=this.handleScriptError(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",n,!1)},Mr.prototype.handleScriptError=function(t,r){var i=function(e){r(e.error||new Error("There was an error attempting to load "+t.src)),t.removeEventListener("error",i,!1)};return t.addEventListener("error",i,!1),i},Mr.prototype.init=function(t){return Br(this,void 0,void 0,function(){return Pr(this,function(e){return this.view=t,[2]})})},Mr);function Mr(e){var t=Er.call(this)||this;return t.view=null,t.init(e),t}var jr,Wr,Dr=(jr=function(e,t){return(jr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}jr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Tr=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Zr=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Gr=(Dr(Hr,Wr=e),Hr.prototype.add=function(i){var n=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/A3918F4D-C4F3-2F18-68573969137963CE","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1];n.ripplewallRenderer=new t(n.view,i.points,i.options),r.add(n.view,n.ripplewallRenderer)}).catch(function(e){console.error(e)})},Hr.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.ripplewallRenderer&&t.remove(r.view,r.ripplewallRenderer)})},Hr.prototype.setMaterialColor=function(e){this.ripplewallRenderer&&this.ripplewallRenderer.setMaterialColor(e)},Hr.prototype.setwireframe=function(){this.ripplewallRenderer&&this.ripplewallRenderer.setwireframe()},Hr.prototype.setaltitude=function(e){this.ripplewallRenderer&&this.ripplewallRenderer.setaltitude(e)},Hr.prototype.setscaleZ=function(e){this.ripplewallRenderer&&this.ripplewallRenderer.setscaleZ(e)},Hr.prototype.setopacity=function(e){this.ripplewallRenderer&&this.ripplewallRenderer.setopacity(e)},Hr.prototype.init=function(t){return Tr(this,void 0,void 0,function(){return Zr(this,function(e){return this.view=t,[2]})})},Hr);function Hr(e){var t=Wr.call(this)||this;return t.ripplewallRenderer=null,t.view=null,t.init(e),t}var qr,Jr,Xr=(qr=function(e,t){return(qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}qr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Yr=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},Ur=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Nr=(Xr(Vr,Jr=e),Vr.prototype.add=function(n){var o=this;P(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/2FEB8C35-3834-8C8E-451683376C475670","esri/views/3d/externalRenderers"]).then(function(e){var t=e[0],r=e[1],i=new t(o.view,n.multiLineStrings,n.options);o.spriteLineRendererArray.push([(new x).uuid,i]),r.add(o.view,i)}).catch(function(e){console.error(e)})},Vr.prototype.remove=function(){var r=this;P(["esri/views/3d/externalRenderers"]).then(function(e){var t=e[0];r.spriteLineRendererArray.map(function(e){t.remove(r.view,e[1])})})},Vr.prototype.setaltitude=function(t){this.spriteLineRendererArray&&this.spriteLineRendererArray.map(function(e){e[1].setaltitude(t)})},Vr.prototype.init=function(t){return Yr(this,void 0,void 0,function(){return Ur(this,function(e){return this.view=t,[2]})})},Vr);function Vr(e){var t=Jr.call(this)||this;return t.spriteLineRendererArray=[],t.view=null,t.init(e),t}var $r,Qr,Kr=($r=function(e,t){return($r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}$r(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ei=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},ti=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ri=(Kr(ii,Qr=e),ii.prototype.play=function(l){var a=this;void 0===l&&(l={}),P(["geolocate","esri/widgets/Track","esri/geometry/support/webMercatorUtils"]).then(function(e){var r=e[0],t=e[1],i=e[2];if(void 0!==l.coords){var n=0;a.track=new t({view:a.view,goToLocationEnabled:!1});var o=0;r.use(),void 0!==a.routepalybackinternal&&clearInterval(a.routepalybackinternal),a.routepalybackinternal=setInterval(function(){var e=i.xyToLngLat(l.coords[o].x,l.coords[o].y),t={lng:e[0],lat:e[1]};r.change(t),o=(o+1)%l.coords.length,++n===l.coords.length&&clearInterval(a.routepalybackinternal)},2500),a.view.when(function(){var t=a.view.center;a.track.on("track",function(){l.mobilesymbol&&(a.track.graphic.symbol=l.mobilesymbol);var e=a.track.graphic.geometry;1<n&&l.showtrail&&a.createAnimateRoute(e,t,l.trailsymbol),a.view.goTo({center:e,tilt:70,scale:2500,heading:360-a.getHeading(e,t),rotation:360-a.getHeading(e,t)}).catch(function(e){"AbortError"!==e.name&&console.error(e)}),t=e.clone()}),a.track.start()})}}).catch(function(e){console.error(e)})},ii.prototype.remove=function(){this.routepalybackinternal,clearInterval(this.routepalybackinternal),this.track.destroy();var e=this.view.map.findLayerById(this.displayedLayerid);e&&this.view.map.remove(e)},ii.prototype.getHeading=function(e,t){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI-90},ii.prototype.createAnimateRoute=function(o,l,a){var s=this;P(["esri/Graphic","esri/layers/GraphicsLayer"]).then(function(e){var t=e[0],r=e[1],i=new t({geometry:{type:"polyline",paths:[[l.longitude,l.latitude],[o.longitude,o.latitude]]},symbol:void 0!==a?a:{type:"simple-line",color:[156,39,176],width:10}}),n=s.view.map.findLayerById(s.displayedLayerid);void 0===n&&(n=new r({title:"路径轨迹播放",id:s.displayedLayerid,listMode:"hide"}),s.view.map.add(n)),n.add(i)})},ii.prototype.init=function(t){return ei(this,void 0,void 0,function(){return ti(this,function(e){return this.displayedLayerid=(new x).uuid,this.view=t,[2]})})},ii);function ii(e){var t=Qr.call(this)||this;return t.displayedLayerid="",t.view=null,t.routepalybackinternal=null,t.track=null,t.init(e),t}var ni,oi,li=(ni=function(e,t){return(ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ni(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ai=function(e,l,a,s){return new(a=a||Promise)(function(r,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((s=s.apply(e,l||[])).next())})},si=function(r,i){var n,o,l,e,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(l=0<(l=a.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ci=(li(ui,oi=e),ui.prototype.play=function(p){var y=this;void 0===p&&(p={}),P(["esri/geometry/Point","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/support/webMercatorUtils"]).then(function(e){var n=e[0],o=e[1],l=e[2];if(e[3],void 0!==p.coords){var a=0,s=0,c=y.view.center;void 0!==y.mapRoamplayinternal&&clearInterval(y.mapRoamplayinternal);var u=void 0!==p.duration?p.duration:2e3,d=void 0!==p.speedFactor?p.speedFactor:1;y.mapRoamplayinternal=setInterval(function(){var e={x:p.coords[s].x,y:p.coords[s].y,z:void 0!==p.coords[s].z?p.coords[s].z:0};s=(s+1)%p.coords.length,++a;var t=new n({x:e.x,y:e.y,z:e.z,spatialReference:y.view.spatialReference}),r=y.view.map.findLayerById(y.mobilelayerid);void 0===r&&(r=new l({title:"漫游路径"+y.mobilelayerid,id:y.mobilelayerid,listMode:"hide"}),y.view.map.add(r)),r.removeAll();var i=new o({geometry:t,symbol:p.mobilesymbol});r.add(i),1<a&&p.showtrail&&y.createAnimateRoute(t,c,p.trailsymbol),y.view.goTo({center:t,tilt:70,scale:2500,heading:360-y.getHeading(t,c),rotation:360-y.getHeading(t,c)},{speedFactor:d,duration:u-.2*u,maxDuration:u-.2*u,easing:"in-out-coast-quadratic"}).then().catch(function(e){"AbortError"!==e.name&&console.error(e)}),c=t.clone(),a===p.coords.length&&clearInterval(y.mapRoamplayinternal)},u)}}).catch(function(e){console.error(e)})},ui.prototype.remove=function(){this.mapRoamplayinternal,clearInterval(this.mapRoamplayinternal);var e=this.view.map.findLayerById(this.displayedLayerid);e&&this.view.map.remove(e);var t=this.view.map.findLayerById(this.mobilelayerid);t&&this.view.map.remove(t)},ui.prototype.getHeading=function(e,t){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI-90},ui.prototype.createAnimateRoute=function(o,l,a){var s=this;P(["esri/Graphic","esri/layers/GraphicsLayer"]).then(function(e){var t=e[0],r=e[1],i=new t({geometry:{type:"polyline",paths:[[l.x,l.y,l.z],[o.x,o.y,o.z]],spatialReference:s.view.spatialReference},symbol:void 0!==a?a:{type:"simple-line",color:[156,39,176],width:10}}),n=s.view.map.findLayerById(s.displayedLayerid);void 0===n&&(n=new r({title:"漫游路径"+s.displayedLayerid,id:s.displayedLayerid,listMode:"hide"}),s.view.map.add(n)),n.add(i)})},ui.prototype.init=function(t){return ai(this,void 0,void 0,function(){return si(this,function(e){return this.displayedLayerid=(new x).uuid,this.mobilelayerid=(new x).uuid,this.view=t,[2]})})},ui);function ui(e){var t=oi.call(this)||this;return t.displayedLayerid="",t.view=null,t.mapRoamplayinternal=null,t.mobilelayerid="",t.init(e),t}return{load:P,Aurora:G,Layers:er,Boundary:$,CloudRenderer:ne,FireRenderer:bt,Draw:Le,RipplewallRenderer:Gr,CurveLineRenderer:he,ArcLineAnimationRenderer:A,ElectricShieldRenderer:it,DynamicPolygon:Me,GraphicOverlays:Wt,FeaureOverlays:ut,EchartFlashPointLayer:Ve,FlashPoint3DLayer:Et,FlashGifLayer:Rt,HeatMap:Jt,LayerSkyRenderer:ar,HeatMap3dLayer:Qt,ContourMapLayer:se,Measurement:xr,MeshLine:Sr,MaskBoundary:fr,SpriteLineRenderer:Nr,ArcLineRenderer:O,TrajectoryPlus:ci,DynamicSquareFence:He,DynamicCylinderFence:Fe,MigrationMap:Or,Trajectory:ri}});
//# sourceMappingURL=Plugins.min.js.map

! function (e, t) {
    "object" == typeof exports && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define(["exports"], t) : t(e.SMap = e.SMap || {})
}(this, function (e) {
    "use strict";
    var t = (r.prototype._addListener = function (e, t, r) {
        if (this.emit("newListener", e, t), this.events.has(e)) {
            var n = this.events.get(e);
            r ? n.unshift(t) : n.push(t)
        } else this.events.set(e, [t]);
        var i = this.getMaxListeners();
        if (0 < i && this.listenerCount(e) > i) {
            var o = new Error("Possible EventEmitter memory leak detected.\n         " + this.listenerCount(e) + " " + e.toString() + " listeners.\n         Use emitter.setMaxListeners() to increase limit");
            o.name = "MaxListenersExceededWarning", console.warn(o)
        }
        return this
    }, r.prototype.addListener = function (e, t) {
        return this._addListener(e, t, !1)
    }, r.prototype.emit = function (e) {
        for (var t = [], r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
        if (this.events.has(e)) {
            for (var n = 0, i = this.events.get(e).slice(); n < i.length; n++) {
                var o = i[n];
                try {
                    o.apply(this, t)
                } catch (e) {
                    this.emit("error", e)
                }
            }
            return !0
        }
        if ("error" === e) throw 0 < t.length ? t[0] : Error("Unhandled error.");
        return !1
    }, r.prototype.eventNames = function () {
        return Array.from(this.events.keys())
    }, r.prototype.getMaxListeners = function () {
        return this.maxListeners || r.defaultMaxListeners
    }, r.prototype.listenerCount = function (e) {
        return this.events.has(e) ? this.events.get(e).length : 0
    }, r.prototype._listeners = function (e, t, r) {
        if (!e.events.has(t)) return [];
        var n = e.events.get(t);
        return r ? this.unwrapListeners(n) : n.slice(0)
    }, r.prototype.unwrapListeners = function (e) {
        for (var t = new Array(e.length), r = 0; r < e.length; r++) t[r] = e[r].listener || e[r];
        return t
    }, r.prototype.listeners = function (e) {
        return this._listeners(this, e, !0)
    }, r.prototype.rawListeners = function (e) {
        return this._listeners(this, e, !1)
    }, r.prototype.off = function (e, t) {
        return this.removeListener(e, t)
    }, r.prototype.on = function (e, t) {
        return this.addListener(e, t)
    }, r.prototype.once = function (e, t) {
        var r = this.onceWrap(e, t);
        return this.on(e, r), this
    }, r.prototype.onceWrap = function (e, t) {
        function r() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this.context.removeListener(this.eventName, this.rawListener), this.listener.apply(this.context, e)
        }
        var n = {
                eventName: e,
                listener: t,
                rawListener: r,
                context: this
            },
            i = r.bind(n);
        return (n.rawListener = i).listener = t, i
    }, r.prototype.prependListener = function (e, t) {
        return this._addListener(e, t, !0)
    }, r.prototype.prependOnceListener = function (e, t) {
        var r = this.onceWrap(e, t);
        return this.prependListener(e, r), this
    }, r.prototype.removeAllListeners = function (e) {
        var t = this;
        if (void 0 === this.events) return this;
        if (this.events.has(e)) {
            var r = this.events.get(e).slice();
            this.events.delete(e);
            for (var n = 0, i = r; n < i.length; n++) {
                var o = i[n];
                this.emit("removeListener", e, o)
            }
        } else this.eventNames().map(function (e) {
            t.removeAllListeners(e)
        });
        return this
    }, r.prototype.removeListener = function (e, t) {
        if (this.events.has(e)) {
            var r = this.events.get(e); - 1 !== r.indexOf(t) && (r.splice(r.indexOf(t), 1), this.emit("removeListener", e, t), 0 === r.length && this.events.delete(e))
        }
        return this
    }, r.prototype.setMaxListeners = function (e) {
        return this.maxListeners = e, this
    }, r.defaultMaxListeners = 50, r);

    function r() {
        this.events = new Map
    }
    var l = (n.jsapi = "http://10.201.37.225:8080/smiapi/arcgis", n.jsapiversion4X = "4.16", n);

    function n() {}
    var s = l.jsapiversion4X,
        i = "next";

    function o(e) {
        if (null === e && (e = s), e.toString().toLowerCase() === i) return i;
        var t = e && e.match(/^(\d)\.(\d+)/);
        return t && {
            major: parseInt(t[1], 10),
            minor: parseInt(t[2], 10)
        }
    }

    function a(e) {
        return void 0 === e && (e = s), l.jsapi + "/" + e + "/init.js"
    }

    function u(e) {
        var t = document.createElement("link");
        return t.rel = "stylesheet", t.href = e, t
    }

    function c(e, t) {
        if (t) {
            var r = document.querySelector(t);
            r.parentNode.insertBefore(e, r)
        } else document.head.appendChild(e)
    }

    function f(e) {
        return document.querySelector('link[href*="' + e + '"]')
    }

    function p(e) {
        return !e || o(e) ? function (e) {
            void 0 === e && (e = s), null === e && (e = s);
            var t = a(e),
                r = t.substring(0, t.indexOf("init.js")),
                n = o(e);
            return n === i || 3 !== n.major ? r + "esri/themes/light/main.css" : r + (n.minor <= 10 ? "js/" : "") + "esri/css/esri.css"
        }(e) : e
    }

    function h(e, t) {
        var r = p(e),
            n = f(r);
        if (n || c(n = u(r), t), 4 === function (e) {
                null === e && (e = s);
                var t = e && e.match(/^(\d)\.(\d+)/);
                return t && {
                    major: parseInt(t[1], 10),
                    minor: parseInt(t[2], 10)
                }
            }(e).major) {
            var i = r.substring(0, r.indexOf("esri/themes/")) + "esri/themes/gis/css/gis.css",
                o = f(i);
            o || c(o = u(i), t)
        }
        return n
    }
    var d = {
            Promise: "undefined" != typeof window ? window.Promise : void 0
        },
        v = {};

    function m(e, t, r) {
        var n, i, o, s;
        r && (o = r, s = function (e) {
            o(e.error || new Error("There was an error attempting to load " + i.src)), i.removeEventListener("error", s, !1)
        }, (i = e).addEventListener("error", s, !1), n = s);
        var a = function () {
            t(e), e.removeEventListener("load", a, !1), n && e.removeEventListener("error", n, !1)
        };
        e.addEventListener("load", a, !1)
    }

    function y() {
        return document.querySelector("script[data-shsmi]")
    }

    function w() {
        var e = window.require;
        return e && e.on
    }

    function g(e) {
        void 0 === e && (e = {});
        var u = {};
        [v, e].forEach(function (e) {
            for (var t in e) Object.prototype.hasOwnProperty.call(e, t) && (u[t] = e[t])
        });
        var c = u.version,
            f = u.url || a(c);
        return new d.Promise(function (e, t) {
            var r, n, i = y();
            if (i) {
                var o = i.getAttribute("src");
                o !== f ? t(new Error("The ArcGIS API for JavaScript is already loaded (" + o + ").")) : w() ? e(i) : m(i, e, t)
            } else if (w()) t(new Error("The ArcGIS API for JavaScript is already loaded."));
            else {
                var s = u.css;
                if (s) h(!0 === s ? c : s, u.insertCssBefore);
                else h(null, u.insertCssBefore);
                if (u.dojoConfig) window.dojoConfig = u.dojoConfig;
                else {
                    var a = {
                        async: !0,
                        packages: [{
                            location: l.jsapi + "/extensions",
                            name: "82B44794-5CE0-A64A-9047F07CAF08BD2C"
                        }, {
                            location: l.jsapi + "/extensions/geolocation",
                            name: "geolocate",
                            main: "geolocate"
                        }],
                        deps: ["@dojo/framework/shim/main"],
                        has: {
                            "esri-promise-compatibility": 1,
                            "esri-featurelayer-webgl": 1
                        }
                    };
                    window.dojoConfig = a
                }
                r = f, (n = document.createElement("script")).type = "text/javascript", n.src = r, n.setAttribute("data-shsmi", "loading"), m(i = n, function () {
                    i.setAttribute("data-shsmi", "loaded"), e(i)
                }, t), document.head.appendChild(i)
            }
        })
    }

    function L(t) {
        return new d.Promise(function (r, e) {
            var n = window.require.on("error", e);
            window.require(t, function () {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                n.remove(), r(e)
            })
        })
    }

    function b(e, t) {
        if (void 0 === t && (t = {}), w()) return L(e);
        var r = y(),
            n = r && r.getAttribute("src");
        return !t.url && n && (t.url = n), g(t).then(function () {
            return L(e)
        })
    }
    var x = (j.setup = "setup", j.render = "render", j);

    function j() {}
    var E, A, C = (E = function (e, t) {
            return (E = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (e, t) {
                    e.__proto__ = t
                } || function (e, t) {
                    for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r])
                })(e, t)
        }, function (e, t) {
            function r() {
                this.constructor = e
            }
            E(e, t), e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype, new r)
        }),
        _ = function (e, s, a, u) {
            return new(a = a || Promise)(function (r, t) {
                function n(e) {
                    try {
                        o(u.next(e))
                    } catch (e) {
                        t(e)
                    }
                }

                function i(e) {
                    try {
                        o(u.throw(e))
                    } catch (e) {
                        t(e)
                    }
                }

                function o(e) {
                    var t;
                    e.done ? r(e.value) : ((t = e.value) instanceof a ? t : new a(function (e) {
                        e(t)
                    })).then(n, i)
                }
                o((u = u.apply(e, s || [])).next())
            })
        },
        S = function (r, n) {
            var i, o, s, e, a = {
                label: 0,
                sent: function () {
                    if (1 & s[0]) throw s[1];
                    return s[1]
                },
                trys: [],
                ops: []
            };
            return e = {
                next: t(0),
                throw: t(1),
                return: t(2)
            }, "function" == typeof Symbol && (e[Symbol.iterator] = function () {
                return this
            }), e;

            function t(t) {
                return function (e) {
                    return function (t) {
                        if (i) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (i = 1, o && (s = 2 & t[0] ? o.return : t[0] ? o.throw || ((s = o.return) && s.call(o), 0) : o.next) && !(s = s.call(o, t[1])).done) return s;
                            switch (o = 0, s && (t = [2 & t[0], s.value]), t[0]) {
                                case 0:
                                case 1:
                                    s = t;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: t[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, o = t[1], t = [0];
                                    continue;
                                case 7:
                                    t = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(s = 0 < (s = a.trys).length && s[s.length - 1]) && (6 === t[0] || 2 === t[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === t[0] && (!s || t[1] > s[0] && t[1] < s[3])) {
                                        a.label = t[1];
                                        break
                                    }
                                    if (6 === t[0] && a.label < s[1]) {
                                        a.label = s[1], s = t;
                                        break
                                    }
                                    if (s && a.label < s[2]) {
                                        a.label = s[2], a.ops.push(t);
                                        break
                                    }
                                    s[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            t = n.call(r, a)
                        } catch (e) {
                            t = [6, e], o = 0
                        } finally {
                            i = s = 0
                        }
                        if (5 & t[0]) throw t[1];
                        return {
                            value: t[0] ? t[1] : void 0,
                            done: !0
                        }
                    }([t, e])
                }
            }
        },
        O = (C(P, A = t), P.prototype.remove = function () {
            var r = this;
            b(["esri/views/3d/externalRenderers"]).then(function (e) {
                var t = e[0];
                r.arcgiswebglRenderer && t.remove(r.view, r.arcgiswebglRenderer)
            })
        }, P.prototype.init = function (t) {
            return _(this, void 0, void 0, function () {
                var n = this;
                return S(this, function (e) {
                    return this.view = t, b(["82B44794-5CE0-A64A-9047F07CAF08BD2C/08F60FEF-C6FF-A788-344D-1755CB0E3870/arcgiswebgl", "esri/views/3d/externalRenderers"]).then(function (e) {
                        var t = e[0],
                            r = e[1];
                        n.arcgiswebglRenderer = new t(function (e) {
                            n.emit(x.setup, e, r)
                        }, function (e) {
                            n.emit(x.render, e, r)
                        }), r.add(n.view, n.arcgiswebglRenderer)
                    }).catch(function (e) {
                        console.error(e)
                    }), [2]
                })
            })
        }, P);

    function P(e) {
        var t = A.call(this) || this;
        return t.arcgiswebglRenderer = null, t.view = null, t.init(e), t
    }
    var M = {
        load: b,
        ArcGISWebglExtend: O
    };
    e.three = M, Object.defineProperty(e, "__esModule", {
        value: !0
    })
});
//# sourceMappingURL=SMap.three.min.js.map